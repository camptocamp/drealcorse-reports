(self.webpackChunkTJS_MapStoreExtension=self.webpackChunkTJS_MapStoreExtension||[]).push([[879],{86570:(e,t,r)=>{var n={"./cesium/Layers":13530,"./leaflet/Layers":27415,"./openlayers/Layers":75866};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=86570},39583:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LOAD_NEW_MAP:()=>n,LOAD_MAP_CONFIG:()=>o,MAP_CONFIG_LOADED:()=>a,MAP_CONFIG_LOAD_ERROR:()=>i,LOAD_MAP_INFO:()=>u,MAP_INFO_LOAD_START:()=>s,MAP_INFO_LOADED:()=>l,MAP_INFO_LOAD_ERROR:()=>c,MAP_SAVE_ERROR:()=>f,MAP_SAVED:()=>p,RESET_MAP_SAVE_ERROR:()=>d,configureMap:()=>g,configureError:()=>m,loadNewMap:()=>y,loadMapConfig:()=>v,mapInfoLoaded:()=>b,mapInfoLoadError:()=>h,mapInfoLoadStart:()=>O,loadMapInfo:()=>E,mapSaveError:()=>P,mapSaved:()=>S,resetMapSaveError:()=>_});var n="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",a="MAP_CONFIG_LOADED",i="MAP_CONFIG_LOAD_ERROR",u="MAP_LOAD_INFO",s="MAP_INFO_LOAD_START",l="MAP_INFO_LOADED",c="MAP_INFO_LOAD_ERROR",f="MAP:MAP_SAVE_ERROR",p="MAP:MAP_SAVED",d="MAP:RESET_MAP_SAVE_ERROR";function g(e,t,r){return{type:a,config:e,legacy:!!t,mapId:t,zoomToExtent:r}}function m(e,t){return{type:i,error:e,mapId:t}}function y(e,t){return{type:n,configName:e,contextId:t}}function v(e,t,r,n,a){return{type:o,configName:e,mapId:t,config:r,mapInfo:n,overrideConfig:a}}function b(e,t){return{type:l,mapId:t,info:e}}function h(e,t){return{type:c,mapId:e,error:t}}function O(e){return{type:s,mapId:e}}function E(e){return{type:u,mapId:e}}var P=function(e){return{type:f,error:e}},S=function(e){return{type:p,resourceId:e}},_=function(){return{type:d}}},6149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CHANGE_LAYER_PROPERTIES:()=>n,CHANGE_LAYER_PARAMS:()=>o,CHANGE_GROUP_PROPERTIES:()=>a,TOGGLE_NODE:()=>i,CONTEXT_NODE:()=>u,SORT_NODE:()=>s,REMOVE_NODE:()=>l,UPDATE_NODE:()=>c,MOVE_NODE:()=>f,LAYER_LOADING:()=>p,LAYER_LOAD:()=>d,LAYER_ERROR:()=>g,ADD_LAYER:()=>m,ADD_GROUP:()=>y,REMOVE_LAYER:()=>v,SHOW_SETTINGS:()=>b,HIDE_SETTINGS:()=>h,UPDATE_SETTINGS:()=>O,REFRESH_LAYERS:()=>E,UPDATE_LAYERS_DIMENSION:()=>P,LAYERS_REFRESHED:()=>S,LAYERS_REFRESH_ERROR:()=>_,BROWSE_DATA:()=>w,DOWNLOAD:()=>x,CLEAR_LAYERS:()=>T,SELECT_NODE:()=>A,FILTER_LAYERS:()=>j,SHOW_LAYER_METADATA:()=>L,HIDE_LAYER_METADATA:()=>R,UPDATE_SETTINGS_PARAMS:()=>D,showSettings:()=>I,hideSettings:()=>M,updateSettings:()=>C,changeLayerProperties:()=>N,changeLayerParams:()=>F,changeGroupProperties:()=>k,toggleNode:()=>U,contextNode:()=>G,sortNode:()=>B,removeNode:()=>J,updateNode:()=>q,moveNode:()=>W,layerLoading:()=>V,layerLoad:()=>K,layerError:()=>H,addLayer:()=>Y,addGroup:()=>z,removeLayer:()=>Z,refreshLayerVersion:()=>X,refreshLayers:()=>Q,layersRefreshed:()=>$,layersRefreshError:()=>ee,updateLayerDimension:()=>te,browseData:()=>re,download:()=>ne,clearLayers:()=>oe,selectNode:()=>ae,filterLayers:()=>ie,showLayerMetadata:()=>ue,hideLayerMetadata:()=>se,updateSettingsParams:()=>le});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",a="CHANGE_GROUP_PROPERTIES",i="TOGGLE_NODE",u="CONTEXT_NODE",s="SORT_NODE",l="REMOVE_NODE",c="UPDATE_NODE",f="MOVE_NODE",p="LAYER_LOADING",d="LAYER_LOAD",g="LAYER_ERROR",m="ADD_LAYER",y="ADD_GROUP",v="REMOVE_LAYER",b="SHOW_SETTINGS",h="HIDE_SETTINGS",O="UPDATE_SETTINGS",E="REFRESH_LAYERS",P="LAYERS:UPDATE_LAYERS_DIMENSION",S="LAYERS_REFRESHED",_="LAYERS_REFRESH_ERROR",w="LAYERS:BROWSE_DATA",x="LAYERS:DOWNLOAD",T="LAYERS:CLEAR_LAYERS",A="LAYERS:SELECT_NODE",j="LAYERS:FILTER_LAYERS",L="LAYERS:SHOW_LAYER_METADATA",R="LAYERS:HIDE_LAYER_METADATA",D="LAYERS:UPDATE_SETTINGS_PARAMS";function I(e,t,r){return{type:b,node:e,nodeType:t,options:r}}function M(){return{type:h}}function C(e){return{type:O,options:e}}function N(e,t){return{type:n,newProperties:t,layer:e}}function F(e,t){return{type:o,layer:e,params:t}}function k(e,t){return{type:a,newProperties:t,group:e}}function U(e,t,r){return{type:i,node:e,nodeType:t,status:!r}}function G(e){return{type:u,node:e}}function B(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:s,node:e,order:t,sortLayers:r}}function J(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:l,node:e,nodeType:t,removeEmpty:r}}function q(e,t,r){return{type:c,node:e,nodeType:t,options:r}}function W(e,t,r){return{type:f,node:e,groupId:t,index:r}}function V(e){return{type:p,layerId:e}}function K(e,t){return{type:d,layerId:e,error:t}}function H(e,t,r){return{type:g,layerId:e,tilesCount:t,tilesErrorCount:r}}function Y(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:m,layer:e,foreground:t}}function z(e,t,r){return{type:y,group:e,parent:t,options:r}}function Z(e){return{type:v,layerId:e}}function X(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function Q(e,t){return{type:E,layers:e,options:t}}function $(e){return{type:S,layers:e}}function ee(e,t){return{type:_,layers:e,error:t}}function te(e,t,r,n){return{type:P,dimension:e,value:t,options:r,layers:n}}function re(e){return{type:w,layer:e}}function ne(e){return{type:x,layer:e}}function oe(){return{type:T}}function ae(e,t,r){return{type:A,id:e,nodeType:t,ctrlKey:r}}function ie(e){return{type:j,text:e}}function ue(e,t){return{type:L,metadataRecord:e,maskLoading:t}}function se(){return{type:R}}function le(e,t){return{type:D,newParams:e,update:t}}},83358:(e,t,r)=>{"use strict";r.r(t),r.d(t,{toDescribeURL:()=>g,getFeatureSimple:()=>m,getCapabilitiesURL:()=>y,getFeatureURL:()=>v,getFeature:()=>b,getCapabilities:()=>h,describeFeatureTypeOGCSchemas:()=>O,describeFeatureType:()=>E});var n=r(10306),o=r.n(n),a=r(72500),i=r.n(a),u=r(51312),s=r.n(u);function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e,t){var r=i().parse(e,!0);return i().format(p(p({},r),{},{search:void 0,query:p(p({},r.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},m=function(e,t){return o().get(e+"?service=WFS&version=1.1.0&request=GetFeature",{params:s()({outputFormat:"application/json"},t)}).then((function(e){return"object"!==c(e.data)?JSON.parse(e.data):e.data}))},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.version,n=void 0===r?"1.1.0":r,o=i().parse(e,!0);return i().format(s()({},o,{query:s()({service:"WFS",version:n,request:"GetCapabilities"},o.query)}))},v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.version,o=void 0===n?"1.1.0":n,a=l(r,["version"]),u=i().parse(e,!0);return i().format(s()({},u,{query:s()(p({service:"WFS",typeName:t,version:o,request:"GetFeature"},a),u.query)}))},b=function(e,t,r){return o().get(v(e,t,r))},h=function(e){return o().get(y(e))},O=function(e,t){var n=i().parse(e,!0),a=i().format(s()({},n,{query:s()({service:"WFS",version:"1.1.0",typeName:t,request:"DescribeFeatureType"},n.query)}));return new Promise((function(e){Promise.all([r.e(985),r.e(370)]).then(function(){var t=r(27563).unmarshaller;e(o().get(a).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value})))}.bind(null,r)).catch(r.oe)}))},E=function(e,t){return o().get(g(e,t)).then((function(e){return e.data}))}},10306:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(7185),u=r(56647),s=r(72500),l=r(59154).default,c=r(36493),f=c.isAuthenticationActivated,p=c.getAuthenticationRule,d=c.getToken,g=c.getBasicAuthHeader,m=r(51312),y=r(86494),v=y.isObject,b=y.omitBy,h=y.isNil,O=r(72500);function E(e,t,r){e.params=m({},e.params,a({},t,r)),e.url=e.url?l.getUrlWithoutParameters(e.url,[t]):e.url}function P(e,t,r){e.headers=m({},e.headers,a({},t,r))}var S=[];i.interceptors.request.use((function(e){var t=e.url||"",r=!(0===t.indexOf("http")),n=!r&&t.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(function(e){if(!e||!e.url||!f())return e;var t=u(e.baseURL||"",e.url),r=p(t);switch(r&&r.method){case"browserWithCredentials":return e.withCredentials=!0,e;case"authkey":var n=d();return n?(E(e,r.authkeyParamName||"authkey",n),e):e;case"test":var o=r?r.token:"";return o?(E(e,r.authkeyParamName||"authkey",o),e):e;case"basic":var a=g();return a?(P(e,"Authorization",a),e):e;case"bearer":var i=d();i&&P(e,"Authorization","Bearer "+i)}}(e),n){var o=window.location;r=n[1]===o.protocol&&n[3]===o.hostname;var a=n[4],i=o.port,s=0===o.protocol.indexOf("https")?443:80;a=""===a?s+"":a+"",i=""===i?s+"":i+"",r=r&&a===i}if(!r){var c=l.getProxyUrl(e);if(c){var y=[],_=!1;v(c)&&(y=c.useCORS||[],_=c.autoDetectCORS||!1,c=c.url);var w=y.reduce((function(e,r){return e||0===t.indexOf(r)}),!1),x=S.reduce((function(e,r){return e||0===t.indexOf(r)}),!1);if(w||_&&!x)_&&(e.autoDetectCORS=!0);else{var T=O.parse(t,!0,!0),A=b(e.params,h);e.url=c+encodeURIComponent(O.format(m({},T,{search:null,query:m({},T.query,A)}))),e.params=void 0}}}return e})),i.interceptors.response.use((function(e){return e}),(function(e){if(e.config&&e.config.autoDetectCORS){var t=s.parse(e.config.url),r=t.protocol+"//"+t.host+t.pathname;if(-1===S.indexOf(r))return S.push(r),new Promise((function(t,r){i(o(o({},e.config),{},{autoDetectCORS:!1})).then(t).catch(r)}))}return Promise.reject(e.response?o(o({},e.response),{},{originalError:e}):e)})),e.exports=i},59154:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getConfigurationOptions:()=>w,cleanDuplicatedQuestionMarks:()=>x,getUrlWithoutParameters:()=>T,filterUrlParams:()=>A,getParsedUrl:()=>j,getDefaults:()=>L,setLocalConfigurationFile:()=>R,loadConfiguration:()=>D,getCenter:()=>I,setApiKeys:()=>M,setLayerId:()=>C,replacePlaceholders:()=>N,setUrlPlaceholders:()=>F,normalizeConfig:()=>k,getUserConfiguration:()=>U,getConfigUrl:()=>G,setupSources:()=>B,normalizeSourceUrl:()=>J,copySourceOptions:()=>q,setupLayers:()=>W,convertFromLegacy:()=>V,mergeConfigs:()=>K,getProxyUrl:()=>H,getProxiedUrl:()=>Y,getBrowserProperties:()=>z,getConfigProp:()=>Z,setConfigProp:()=>X,removeConfigProp:()=>Q,default:()=>$});var n=r(23291),o=r(77580),a=r.n(o),i=r(72500),u=r.n(i),s=r(7185),l=r.n(s),c=r(86494),f=r(51312),p=r.n(f),d=r(89820),g=r(10082),m=r.n(g);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=n.Z?new n.Z.Proj("EPSG:4326"):null,E=a().shape({x:a().number.isRequired,y:a().number.isRequired,crs:a().string}),P=u().parse(window.location.href,!0).query,S="localConfig.json",_={proxyUrl:"/mapstore/proxy/?url=",geoStoreUrl:"/rest/geostore/",printUrl:"/mapstore/print/info.json",translationsPath:"translations",extensionsRegistry:"extensions.json",extensionsFolder:"",configurationFolder:"",contextPluginsConfiguration:"pluginsConfig.json",projectionDefs:[],themePrefix:"ms2",bingApiKey:null,mapquestApiKey:null,defaultSourceType:"gxp_wmssource",backgroundGroup:"background",userSessions:{enabled:!1}},w=function(e,t,r,n){var o=e.mapId;return{configUrl:o?(n||_.geoStoreUrl)+"data/"+o:_.configurationFolder+(e.config||t||"config")+"."+(r||"json"),legacy:!!o}},x=function(e){var t=e.split("?");if(t.length>2){var r=t.slice(1);return t[0]+"?"+r.join("&")}return e},T=function(e,t){var r=x(e).split("?"),n="";if(r.length>=2&&r[1]){var o=r[1].split(/[&;]/g).filter((function(e){return!!e}));o.forEach((function(e,r){var a=e.split("=");if(-1===t.indexOf(a[0].toLowerCase())){var i=r===o.length-1?"":"&";n+=a.join("=")+i}}))}return n?r[0]+"?"+n:r[0]},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,c.isNil)(e)||""===e?null:T(x(e),t)},j=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){var n=u().parse(A(e,r),!0),o=null;if((0,c.endsWith)(n.pathname,"wfs")||(0,c.endsWith)(n.pathname,"wms")||(0,c.endsWith)(n.pathname,"ows"))return o=n.pathname.replace(/(wms|ows|wfs|wps)$/,"wps"),u().format(p()({},n,{search:null,pathname:o},{query:p()(b({service:"WPS"},t),n.query)}))}return null},L=function(){return b({},_)},R=function(e){S=e},D=function(){return S?l().get(S).then((function(e){return"object"===y(e.data)&&(_=p()({},_,e.data)),b({},_)})):new d.Promise((function(e){e(b({},_))}))},I=function(e,t){var r=(0,c.isArray)(e)?{x:e[0],y:e[1]}:e,o=e.crs||t||"EPSG:4326",a="EPSG:4326"!==o?n.Z.transform(new n.Z.Proj(o),O,r):r;return p()({},a,{crs:"EPSG:4326"})},M=function(e){return"bing"===e.type&&(e.apiKey=_.bingApiKey),"mapquest"===e.type&&(e.apiKey=_.mapquestApiKey),e},C=function(e,t){return e.id||(e.id=e.name+"__"+t),e},N=function(e){var t=e;return(t.match(/\{.*?\}/g)||[]).forEach((function(e){var r=_[e.substring(1,e.length-1)];void 0!==r&&(t=t.replace(e,r||""))})),t},F=function(e){return e.url&&((0,c.isArray)(e.url)?e.url=e.url.map((function(e){return N(e)})):e.url=N(e.url)),e},k=function(e){var t=e.layers,r=e.groups,n=e.plugins,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers","groups","plugins"]);return o.center=I(o.center),{map:o,layers:t.map(M,e).map(C).map(F),groups:r,plugins:n}},U=function(e,t,r){return w(P,e,t,r)},G=function(e){var t=e.mapId,r=t,n=e.config;try{var o=parseInt(r,10);isNaN(o)&&(n=t,r=null)}catch(e){n=t,r=null}return w({mapId:r,config:n})},B=function(e,t){var r,n=t;for(r in t||(n=_.defaultSourceType),e)e.hasOwnProperty(r)&&(e[r].ptype||(e[r].ptype=n))},J=function(e){return e&&-1!==e.indexOf("?")?e.split("?")[0]:e},q=function(e,t){if(e.baseParams=t.baseParams,t.url){var r=u().parse(t.url,!0);for(var n in r.query)"REQUEST"===n.toUpperCase()&&delete r.query[n];e.baseParams=p()({},e.baseParams,r.query)}e.url=J(t.url)},W=function(e,t,r){var n,o,a,i;for(o=0;o<e.length;o++){(i=t[(a=e[o]).source])&&q(a,i);var u=i.ptype;a.type=u?u.replace(/^gxp_(.*)source$/i,"$1"):"unknown",a&&(r.indexOf(i&&i.ptype)>=0?a.group===_.backgroundGroup&&(a.visibility=a.visibility||!1,n&&n.visibility?a.visibility&&(n.visibility=!1,n=a):n=a):a.visibility=!1)}n&&(n.visibility=!0)},V=function(e){var t=e.map,r=e.gsSources||e.sources,n=t.layers.filter((function(e){return r[e.source]})),o=I(t.center,t.projection),a=t.zoom,i=t.maxExtent||t.extent;return B(r,e.defaultSourceType),W(n,r,["gxp_osmsource","gxp_wmssource","gxp_googlesource","gxp_bingsource","gxp_mapquestsource","gxp_olsource"]),k({center:o,zoom:a,maxExtent:i,layers:n,projection:t.projection||"EPSG:3857"})},K=function(e,t){return e.map=t.map,e.gsSources=t.gsSources||t.sources,e},H=function(e){return e.proxyUrl?e.proxyUrl:_.proxyUrl},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(0===e.indexOf("http")),n=!r&&e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(n){var o=window.location;r=n[1]===o.protocol&&n[3]===o.hostname;var a=n[4],i=o.port,u=0===o.protocol.indexOf("https")?443:80;a=""===a?u+"":a+"",i=""===i?u+"":i+"",r=r&&a===i}if(!r){var s=H(t);if(s){var l=[];(0,c.isObject)(s)&&(l=s.useCORS||[],s=s.url);var f=l.reduce((function(t,r){return t||0===e.indexOf(r)}),!1);if(!f)return s+encodeURIComponent(e)}}return e},z=function(){var e="ActiveXObject"in window,t=e&&!document.addEventListener,r=e&&window.location.hash===!!window.MSInputMethodContext&&!!document.documentMode,n=navigator.userAgent.toLowerCase(),o=-1!==n.indexOf("webkit"),a=-1!==n.indexOf("chrome"),i=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),u=-1!==n.indexOf("phantom"),s=-1!==n.indexOf("android"),l=-1!==n.search("android [23]"),c=-1!==n.indexOf("gecko"),f=m().any,p=!window.PointerEvent&&window.MSPointerEvent,d=window.PointerEvent&&window.navigator.pointerEnabled&&window.navigator.maxTouchPoints||p,g="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,y=document.documentElement,v=e&&"transition"in y.style,b="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!l,h="MozPerspective"in y.style,O="OTransition"in y.style,E=!window.L_DISABLE_3D&&(v||b||h||O)&&!u,P=!window.L_NO_TOUCH&&!u&&(d||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);return{ie:e,ie11:r,ielt9:t,webkit:o,gecko:c&&!o&&!window.opera&&!e,android:s,android23:l,chrome:a,safari:i,ie3d:v,webkit3d:b,gecko3d:h,opera3d:O,any3d:E,mobile:f,mobileWebkit:f&&o,mobileWebkit3d:f&&b,mobileOpera:f&&window.opera,touch:P,msPointer:p,pointer:d,retina:g}},Z=function(e){return _[e]},X=function(e,t){_[e]=t},Q=function(e){delete _[e]};const $={PropTypes:{center:E,config:a().shape({center:E,zoom:a().number.isRequired}),mapStateSource:a().string},getParsedUrl:j,getDefaults:L,setLocalConfigurationFile:R,loadConfiguration:D,getCenter:I,normalizeConfig:k,getUserConfiguration:U,getConfigurationOptions:w,getConfigUrl:G,convertFromLegacy:V,setupSources:B,normalizeSourceUrl:J,copySourceOptions:q,setupLayers:W,mergeConfigs:K,getProxyUrl:H,cleanDuplicatedQuestionMarks:x,getUrlWithoutParameters:T,filterUrlParams:A,getProxiedUrl:Y,getBrowserProperties:z,setApiKeys:M,setUrlPlaceholders:F,replacePlaceholders:N,setLayerId:C,getConfigProp:Z,setConfigProp:X,removeConfigProp:Q}},89735:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FORMULAS:()=>L,getProjUrl:()=>D,determineCrs:()=>M,normalizePoint:()=>N,reproject:()=>k,reprojectExtent:()=>G,getPolygonFromExtent:()=>B,getExtentFromNormalized:()=>J,crsCodeTable:()=>q,setCrsLabels:()=>W,getUnits:()=>V,getProjectedBBox:()=>K,createBBox:()=>H,reprojectGeoJson:()=>Y,lineIntersectPolygon:()=>z,normalizeLng:()=>Z,reprojectBbox:()=>X,bboxToFeatureGeometry:()=>Q,getCompatibleSRS:()=>$,getEquivalentSRS:()=>ee,getEPSGCode:()=>te,normalizeSRS:()=>re,isAllowedSRS:()=>ne,getAvailableCRS:()=>oe,filterCRSList:()=>ae,calculateAzimuth:()=>ie,calculateDistance:()=>ue,extendExtent:()=>se,getGeoJSONExtent:()=>le,isValidExtent:()=>ce,calculateCircleCoordinates:()=>fe,transformLineToArcs:()=>pe,transformArcsToLine:()=>de,coordsOLtoLeaflet:()=>ge,mergeToPolyGeom:()=>me,getViewportGeometry:()=>ye,getExtentFromViewport:()=>ve,fetchProjRemotely:()=>be,parseURN:()=>he,parseString:()=>Oe,getWMSBoundingBox:()=>Ee,isSRSAllowed:()=>Pe,getNormalizedLatLon:()=>Se,isInsideVisibleArea:()=>_e,centerToVisibleArea:()=>we,calculateCircleRadiusFromPixel:()=>xe,roundCoord:()=>Te,midpoint:()=>Ae,pointObjectToArray:()=>je,isPointInsideExtent:()=>Le,isBboxCompatible:()=>Re,extractCrsFromURN:()=>De,makeNumericEPSG:()=>Ie,makeBboxFromOWS:()=>Me,getPolygonFromCircle:()=>Ce,getLonLatFromPoint:()=>Ne,default:()=>Fe});var n=r(43034),o=r(23291),a=r(10306),i=r.n(a),u=r(51312),s=r.n(u),l=r(86494),c=r(70370),f=r(88060),p=r.n(f),d=r(31114),g=r.n(d),m=r(54323),y=r(39881),v=r.n(y),b=r(79853),h=r(44903),O=r(29516);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A,j=o.Z,L={vincenty:function(e){for(var t=0,r=0;r<e.length-1;++r){var o=e[r],a=e[r+1],i=w(o,2),u=i[0],s=i[1],l=w(a,2),c=l[0],f=l[1];t+=parseFloat(n.Kl({longitude:u,latitude:s},{longitude:c,latitude:f}))}return t},haversine:function(e){for(var t=0,r=0;r<e.length-1;++r){var o=e[r],a=e[r+1],i=w(o,2),u=i[0],s=i[1],l=w(a,2),c=l[0],f=l[1];t+=parseFloat(n.e8({longitude:u,latitude:s},{longitude:c,latitude:f}))}return t}};function R(e,t){return(r=e).length>=2&&"number"==typeof r[0]&&"number"==typeof r[1]?t(e):e.map((function(e){return R(e,t)}));var r}var D=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function I(e,t,r){if(null===e)return e;var n=(0,l.cloneDeep)(e);return"Feature"===e.type?n.geometry=I(e.geometry,t,r):"FeatureCollection"===e.type?n.features=n.features.map((function(e){return I(e,t,r)})):"GeometryCollection"===e.type?n.geometries=n.geometries.map((function(e){return I(e,t,r)})):t&&t(n),r&&r(n),n}function M(e){return"string"==typeof e||e instanceof String?o.Z.defs(e)?new o.Z.Proj(e):null:e}var C={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},N=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},F=function(e){var t=e;return(0,l.isNumber)(e.x)||(t.x=parseFloat(e.x)),(0,l.isNumber)(e.y)||(t.y=parseFloat(e.y)),t},k=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t&&o.Z.defs(t)?new o.Z.Proj(t):null,i=r&&o.Z.defs(r)?new o.Z.Proj(r):null;if(a&&i){var u=(0,l.isArray)(e)?o.Z.toPoint(e):o.Z.toPoint([e.x,e.y]),c=s()({},t===r?F(u):o.Z.transform(a,i,F(u)),{srs:r});return n?N(c):c}return null},U=["EPSG:900913","EPSG:4326","EPSG:3857"],G=function(e,t,r){return"EPSG:4326"===t?e:r?e.map((function(e){return[k([e[0],e[1]],"EPSG:4326",t),k([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(_(e),[t.x,t.y])}),[])})):[k([e[0],e[1]],"EPSG:4326",t),k([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(_(e),[t.x,t.y])}),[])},B=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:(0,b.Z)(e):null},J=function(e,t){var r=function(e,t){var r="EPSG:4326"!==t?[k([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),k([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(_(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],n=!1;return"EPSG:4326"===t?n=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(n=Math.abs(e.maxx-e.minx)>=40075016.68557849),n?[0,r[1],360,r[3]]:[(r[0]+180)%360,r[1],(r[2]+180)%360,r[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),n=r[2]<r[0];return n?{extent:G([[-180,r[1],r[2]-180,r[3]],[r[0]-180,r[1],180,r[3]]],t,n),isIDL:n}:{extent:G([r[0]-180,r[1],r[2]-180,r[3]],t,n),isIDL:n}},q={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},W=function(e){C=s()({},C,e)},V=function(e){return new o.Z.Proj(e).units||"degrees"},K=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=t*n[0]/2,a=t*n[1]/2,i=Math.cos(r),u=Math.sin(r),s=o*i,l=o*u,c=a*i,f=a*u,p=e.x,d=e.y,g=p-s+f,m=p-s-f,y=p+s-f,v=p+s+f,b=d-l-c,h=d-l+c,O=d+l+c,E=d+l-c,P=A.createBBox(Math.min(g,m,y,v),Math.min(b,h,O,E),Math.max(g,m,y,v),Math.max(b,h,O,E));return P},H=function(e,t,r,n){return{minx:e,miny:t,maxx:r,maxy:n}},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",n=t,o=r;"string"==typeof n&&(n=M(n)),"string"==typeof o&&(o=M(o));var a=j(n,o);return I(e,(function(e){e.crs&&delete e.crs,e.coordinates=R(e.coordinates,(function(e){var t=w(e,2),r=t[0],n=t[1];return a.forward([r,n])}))}),(function(e){var t,r;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],r=[-Number.MAX_VALUE,-Number.MAX_VALUE],I(e,(function(e){R(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),r[0]=Math.max(r[0],e[0]),r[1]=Math.max(r[1],e[1])}))})),[t[0],t[1],r[0],r[1]]))}))},z=function(e,t){var r=g()(t).features[0];return 0!==p()(e,r).features.length},Z=function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},X=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n=(0,l.isArray)(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var a=[];for(var i in n)if(n.hasOwnProperty(i)){var u=A.reproject(n[i],t,r,o);if(!u)return null;var s=u.x,c=u.y;a.push(s),a.push(c)}return a},Q=function(e){var t=(0,l.isArray)(e)?{minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}:e,r=t.minx,n=t.miny,o=t.maxx,a=t.maxy;return{type:"Polygon",coordinates:[[[r,n],[r,a],[o,a],[o,n],[r,n]]]}},$=function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},ee=function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},te=function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},re=function(e,t){var r="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[r]?A.getCompatibleSRS(r,t):r},ne=function(e,t){return t[A.getCompatibleSRS(e,t)]},oe=function(){var e={};for(var t in o.Z.defs)o.Z.defs.hasOwnProperty(t)&&(e[t]={label:C[t]||t});return e},ae=function(e,t,r,n){var o=Object.keys(e).reduce((function(r,n){return s()({},-1===t.indexOf(n)?r:P(P({},r),{},S({},n,e[n])))}),{}),a=n.map((function(e){return e.code})),i=Object.keys(r).reduce((function(e,t){return s()({},-1===a.indexOf(t)?e:P(P({},e),{},S({},t,r[t])))}),{});return s()({},o,i)},ie=function(e,t,r){var n=A.reproject(e,r,"EPSG:4326"),o=A.reproject(t,r,"EPSG:4326"),a=n.x*Math.PI/180,i=n.y*Math.PI/180,u=o.x*Math.PI/180,s=o.y*Math.PI/180,l=u-a,c=Math.sin(l)*Math.cos(s),f=Math.cos(i)*Math.sin(s)-Math.sin(i)*Math.cos(s)*Math.cos(l);return(180*Math.atan2(c,f)/Math.PI+360)%360},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(L).indexOf(t)?L[t](e):0},se=function(e,t){var r=e.slice();return t[0]<e[0]&&(r[0]=t[0]),t[2]>e[2]&&(r[2]=t[2]),t[1]<e[1]&&(r[1]=t[1]),t[3]>e[3]&&(r[3]=t[3]),r},le=function(e){var t=[1/0,1/0,-1/0,-1/0],r=function(e,t){var r=A.getGeoJSONExtent(t);return A.isValidExtent(r)?A.extendExtent(r,e):r};if(e.coordinates){if("Point"===e.type){var n=e.coordinates;t[0]=n[0]-.01*n[0],t[1]=n[1]-.01*n[1],t[2]=n[0]+.01*n[0],t[3]=n[1]+.01*n[1]}return(0,l.chunk)((0,l.flattenDeep)(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),t)}if("GeometryCollection"===e.type)return e.geometries.reduce(r,t);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(r,t);if("Feature"===e.type&&e.geometry)return A.getGeoJSONExtent(e.geometry)}return t},ce=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},fe=function(e,t,r,n){var o,a,i,u=Math.PI*(1/r-.5);n&&(u+=n/180*Math.PI);for(var s=[[]],l=0;l<r;l++)o=u+2*l*Math.PI/r,a=e.x+t*Math.cos(o),i=e.y+t*Math.sin(o),s[0].push([a,i]);return s[0].push(s[0][0]),s},pe=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},r=[],n=0;n<e.length-1;++n){var o=e[n],a=e[n+1],i=v()(o),u=v()(a);if(o[0]!==a[0]||o[1]!==a[1]){var s=(0,m.Z)(i,u,t);r=[].concat(_(r),_(s.geometry.coordinates))}}return r},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[(0,l.head)(e),(0,l.last)(e)]:e.length>t?[(0,l.head)(e)].concat(A.transformArcsToLine((0,l.slice)(e,t))):[]},ge=function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},me=function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},ye=function(e,t){if((0,l.head)(U.filter((function(e){return e===t})))){var r=J(e,t),n=r.extent,o=r.isIDL,a=(o?n:[n]).map((function(e){var t=[e[0],e[1]],r=[e[2],e[3]];return[[t,[t[0],r[1]],r,[r[0],t[1]],t]]}));if(o){var i=n[1][0]+(Math.abs(n[0][0]-n[0][2])+Math.abs(n[1][0]-n[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:a,extent:n,center:[i=i>180?i-360:i,(n[0][1]+n[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:a[0],extent:n,center:[(n[0]+n[2])/2,(n[1]+n[3])/2]}}var u=[e.minx,e.miny,e.maxx,e.maxy],s=[u[0],u[1]],c=[u[2],u[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[s,[s[0],c[1]],c,[c[0],s[1]],s]],extent:u,center:[(u[0]+u[2])/2,(u[1]+u[3])/2]}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,r=e.crs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!r)return null;var o=A.getViewportGeometry(t,r),a=o.extent;if(4===a.length)return A.reprojectBbox(a,r,n);var i=a.map((function(e){return e[2]-e[0]})),u=w(i,2),s=u[0],l=u[1];return s>l?A.reprojectBbox(a[0],r,n):A.reprojectBbox(a[1],r,n)},be=function(e,t){var r=2===e.split(":").length?e.split(":")[1]:"3857";return i().get(t||D(r),null,{timeout:2e3})},he=function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,r=t&&(0,l.last)(t.split(":"));return"WGS 1984"===r||"WGS84"===r?"EPSG:4326":r?"EPSG:"+r:null},Oe=function(e){var t=e.split(" "),r=parseFloat(t[0]),n=parseFloat(t[1]);return!isNaN(r)&&!isNaN(n)&&{x:r,y:n}||null},Ee=function(e,t){var r=t||"EPSG:3857",n=e&&(0,l.isArray)(e)&&(0,l.head)(e.filter((function(e){return e&&e.$&&e.$.SRS===r&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&A.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],r,"EPSG:4326")})));return(0,l.isArray)(n)&&{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]}||null},Pe=function(e){return!!o.Z.defs(e)},Se=function(e){var t=e.lng,r=void 0===t?1:t,n=e.lat;return{lat:void 0===n?1:n,lng:A.normalizeLng(r)}},_e=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=A.getNormalizedLatLon(e),a=k([o.lng,o.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var i=A.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),u=P({left:0,right:0,top:0,bottom:0},r),s={minx:i[0]+u.left*n,miny:i[1]+u.bottom*n,maxx:i[2]-u.right*n,maxy:i[3]-u.top*n},c=A.getViewportGeometry(s,t.projection),f=4===c.extent.length?[_(c.extent)]:_(c.extent);return(0,l.head)(f.map((function(e){return a.x>=e[0]&&a.y>=e[1]&&a.x<=e[2]&&a.y<=e[3]})).filter((function(e){return e})))||!1},we=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=A.getNormalizedLatLon(e),a=k([o.lng,o.lat],"EPSG:4326",t.projection),i=P({left:0,right:0,top:0,bottom:0},r),u={width:(t.size.width-i.right-i.left)*n,height:(t.size.height-i.top-i.bottom)*n},s={minx:a.x-u.width/2-i.left*n,miny:a.y-u.height/2-i.bottom*n,maxx:a.x+u.width/2+i.right*n,maxy:a.y+u.height/2+i.top*n},l=A.getViewportGeometry(s,t.projection);if(4===l.extent.length)return{pos:k([l.extent[0]+t.size.width/2*n,l.extent[1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(l.extent[0][2]-l.extent[0][0])>Math.abs(l.extent[1][2]-l.extent[1][0])){var c=k([l.extent[0][2]-t.size.width/2*n,l.extent[0][3]-t.size.height/2*n],t.projection,"EPSG:4326"),f=P(P({},c),{},{x:c.x+(o.lng>c.x?360:0)});return{pos:f,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:k([l.extent[1][0]+t.size.width/2*n,l.extent[1][1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,a=(0,l.isArray)(r)?r:[r.x,r.y];if((0,l.isNumber)(a[0])&&!isNaN(a[0])&&(0,l.isNumber)(a[1])&&!isNaN(a[1])&&(0,l.isNumber)(t.x)&&!isNaN(t.x)&&(0,l.isNumber)(t.y)&&!isNaN(t.y)){var i=(0,l.isFunction)(e)?e([t.x,t.y>=n?t.y-n:t.y+n]):null,u=i&&((0,l.isArray)(i)?i:[i.x,i.y]);return(0,l.isArray)(u)?Math.sqrt((a[0]-u[0])*(a[0]-u[0])+(a[1]-u[1])*(a[1]-u[1])):o}return o},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,r=void 0===t?"round":t,n=e.value,o=void 0===n?0:n,a=e.maximumFractionDigits,i=void 0===a?0:a;return 0===i&&Math[r]?Math[r](o):o},Ae=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,l.isArray)(e)?{x:e[0],y:e[1]}:e,o=(0,l.isArray)(t)?{x:t[0],y:t[1]}:t,a={x:.5*(n.x+o.x),y:.5*(n.y+o.y)};return r?[a.x,a.y]:a},je=function(e){return(0,l.isObject)(e)&&(0,l.isNumber)(e.x)&&(0,l.isNumber)(e.y)?[e.x,e.y]:e},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return(0,O.Z)(B(t),v()([e.lng,e.lat]))},Re=function(e,t){return(0,h.Z)(e,t)||(0,O.Z)(e,t)||(0,O.Z)(t,e)},De=function(e){if(e){var t=e.split(":");if("urn"===t[0]&&("ogc"===t[1]||"x-ogc"===t[1])&&"def"===t[2]&&"crs"===t[3]&&(t[4]||t[6])){var r=t[4],n=t[6];return r?"".concat(r,":").concat(n):n}}return null},Ie=function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),r=parseInt(t,10);if(r>=1024&&r<=32767)return e;var n=t.replace(" ","").replace(":","").toLowerCase(),o=q[n];return o>=1024&&o<=32767?"EPSG:".concat(o):null},Me=function(e,t){var r=[e[0],e[1]],n=[t[0],t[1]];if(r[1]>n[1]){var o=r;r=n,n=o}if(r[0]>n[0]){var a=r.slice(),i=n.slice();r=[i[0],a[1]],n=[a[0],i[1]]}return[r[0],r[1],n[0],n[1]]},Ce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"degrees",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return e&&t?(0,c.Z)(e,t,{steps:n,units:r}):null},Ne=function(e){var t=e&&e.latlng||null,r=null;return t&&(r=t&&Math.round(1e17*t.lng)/1e17,r-=360*Math.floor(r/360+.5)),[r,t&&t.lat]};const Fe=A={setCrsLabels:W,getUnits:V,reproject:k,getProjectedBBox:K,createBBox:H,reprojectGeoJson:Y,lineIntersectPolygon:z,normalizePoint:N,normalizeLng:Z,reprojectBbox:X,getCompatibleSRS:$,getEquivalentSRS:ee,getEPSGCode:te,normalizeSRS:re,isAllowedSRS:ne,getAvailableCRS:oe,filterCRSList:ae,calculateAzimuth:ie,calculateDistance:ue,FORMULAS:L,extendExtent:se,getGeoJSONExtent:le,isValidExtent:ce,calculateCircleCoordinates:fe,transformLineToArcs:pe,transformArcsToLine:de,coordsOLtoLeaflet:ge,mergeToPolyGeom:me,getViewportGeometry:ye,getProjUrl:D,getExtentFromViewport:ve,fetchProjRemotely:be,parseURN:he,determineCrs:M,parseString:Oe,getWMSBoundingBox:Ee,isSRSAllowed:Pe,getNormalizedLatLon:Se,isInsideVisibleArea:_e,centerToVisibleArea:we,calculateCircleRadiusFromPixel:xe,roundCoord:Te,midpoint:Ae,pointObjectToArray:je,getExtentFromNormalized:J,getPolygonFromExtent:B,isPointInsideExtent:Le,isBboxCompatible:Re,extractCrsFromURN:De,crsCodeTable:q,makeNumericEPSG:Ie,makeBboxFromOWS:Me,getPolygonFromCircle:Ce,getLonLatFromPoint:Ne}},24357:(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--unknown--";return function(){return e.apply(void 0,arguments).catch((function(e,r){return console.error('Error in epic "'.concat(t,'". Original error:'),e),setTimeout((function(){throw e}),0),r}))}},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return Object.keys(e).map((function(r){return t(e[r],r)}))}},95525:(e,t,r)=>{"use strict";r.r(t),r.d(t,{generateEnvString:()=>n});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.map((function(e){var t=e.name,r=e.value;return"".concat(t,":").concat(r)})).join(";"):""}},36515:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getWpsUrl:()=>N,getNode:()=>G,getGroupNodes:()=>B,getNestedGroupTitle:()=>J,deepChange:()=>q,getSourceId:()=>W,extractTileMatrixFromSources:()=>V,extractTileMatrixSetFromLayers:()=>K,extractSourcesFromLayers:()=>H,extractDataFromSources:()=>Y,getURLs:()=>z,getLayerUrl:()=>X,getGroupByName:()=>Q,getDimension:()=>$,getLayerId:()=>ee,normalizeLayer:()=>te,normalizeMap:()=>re,belongsToGroup:()=>ne,getLayersByGroup:()=>oe,removeEmptyGroups:()=>ae,getNotEmptyGroup:()=>ie,reorderFunc:()=>ue,denormalizeGroups:()=>se,sortLayers:()=>le,toggleByType:()=>ce,sortUsing:()=>fe,splitMapAndLayers:()=>pe,geoJSONToLayer:()=>de,saveLayer:()=>ge,REG_GEOSERVER_RULE:()=>me,setRegGeoserverRule:()=>ye,getRegGeoserverRule:()=>ve,findGeoServerName:()=>be,getCapabilitiesUrl:()=>he,getSearchUrl:()=>Oe,invalidateUnsupportedLayer:()=>Ee,isSupportedLayer:()=>Pe,getLayerTitleTranslations:()=>Se,setCustomUtils:()=>_e,getAuthenticationParam:()=>we,excludeGoogleBackground:()=>xe,creditsToAttribution:()=>Te,formatCapabitiliesOptions:()=>Ae,getLayerTitle:()=>je,isInsideResolutionsLimits:()=>Le});var n,o=r(51312),a=r.n(o),i=r(75820),u=r.n(i),s=r(55595),l=r.n(s),c=r(88042),f=r.n(c),p=r(20238),d=r.n(p),g=r(21389),m=r.n(g),y=r(81938),v=r.n(y),b=r(23317),h=r.n(b),O=r(8364),E=r.n(O),P=r(61394),S=r.n(P),_=r(97764),w=r.n(_),x=r(54702),T=r.n(x),A=r(36493);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=/\/[\w- ]*geoserver[\w- ]*\//,C=function(e,t){return t.filter((function(t){return(t.group||"Default")===e})).map((function(e){return e.id})).reverse()},N=function(e){return e&&e.wpsUrl||e.search&&e.search.url||e.url},F=function e(t,r){return t.slice(0).reverse().reduce((function(t,n){return t.concat(n.nodes.slice(0).reverse().reduce((function(t,n){return d()(n)?t.concat(e([n],r)):t.concat(function(e,t){return v()(t.filter((function(t){return t.id===e})))}(n,r))}),[]))}),[])},k=function(e,t){return F(e,t)},U=function(e,t){var n=r(86570)("./"+t+"/Layers");return"mapquest"===e.type||"bing"===e.type?n.isSupported(e.type)&&e.apiKey&&"__API_KEY_MAPQUEST__"!==e.apiKey&&!e.invalid:"empty"===e.type||n.isSupported(e.type)&&!e.invalid},G=function e(t,r){return t&&m()(t)?t.reduce((function(t,n){return t||(!n||n.name!==r&&n.id!==r&&n!==r?n&&n.nodes&&n.nodes.length>0?e(n.nodes,r):t:n)}),null):null},B=function e(t){return t&&t.nodes?t.nodes.reduce((function(t,r){var n=[].concat(t);return r.nodes&&(n=t.concat(e(r))),f()(r)?[].concat(D(n),[r]):[].concat(D(n),[r.id])}),[]):[]},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return m()(t)&&v()(t.map((function(t){var r=t.id===e?t:null;if(r)return r.title;var n=G(t.nodes,e);return n?n.title:null})))},q=function e(t,r,n,o){return t&&m()(t)&&t.length>0?t.map((function(t){if(d()(t)){if(t.id===r)return L(L({},t),d()(n)?n:R({},n,o));if(t.nodes)return L(L({},t),{},{nodes:e(t.nodes,r,n,o)})}return t})):[]},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.capabilitiesURL||v()(h()(e.url))},V=function(e,t){if(!e||!t)return{};!m()(t.matrixIds)&&d()(t.matrixIds)&&(t.matrixIds=D(Object.keys(t.matrixIds)));var r=W(t),n=t.matrixIds&&t.matrixIds.reduce((function(t,n){var o=e[r]&&e[r].tileMatrixSet&&e[r].tileMatrixSet[n]&&e[r].tileMatrixSet[n].TileMatrix.map((function(e){return{identifier:e["ows:Identifier"],ranges:e.ranges}}))||[];return 0===o.length?a()({},t):a()({},t,R({},n,D(o)))}),{})||null,o=t.tileMatrixSet&&t.matrixIds.map((function(t){return e[r].tileMatrixSet[t]})).filter((function(e){return e}))||null;return o&&n&&{tileMatrixSet:o,matrixIds:n}||{}},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.keys(e).reduce((function(r,n){var o=e[n].reduce((function(e,t){return a()(e,R({},t.id||t.name,{srs:D(Object.keys(t.matrixIds)),matrixIds:a()({},t.matrixIds)}))}),{}),i=e[n].reduce((function(e,t){var r=t.tileMatrixSet.reduce((function(e,t){return a()({},e,R({},t["ows:Identifier"],a()({},t)))}),{}),n=Object.keys(r).reduce((function(e,t){var n=Object.keys(o).filter((function(e){return v()(o[e].srs.filter((function(e){return e===t})))})).map((function(e){return o[e].matrixIds[t]})),i=n[0]&&r[t].TileMatrix.map((function(e,t){return n[0][t]&&n[0][t].ranges?a()({},e,{ranges:n[0][t].ranges}):a()({},e)}));return v()(n)?a()({},e,R({},t,a()({},r[t],{TileMatrix:i}))):a()({},e)}),{});return a()({},e,n)}),{});return a()({},r,R({},n,a()({},t[n]||{},{tileMatrixSet:a()({},r[n]&&r[n].tileMatrixSet||{},i)})))}),a()({},t))||t},H=function(e){var t=e.filter((function(e){return e.tileMatrixSet})).reduce((function(e,t){var r=W(t);return e[r]?a()({},e,R({},r,[].concat(D(e[r]),[t]))):a()({},e,R({},r,[t]))}),{});return K(t)},Y=function(e){if(!e||!e.layers||!m()(e.layers))return null;var t=e.mapInitialConfig&&e.mapInitialConfig.sources&&a()({},e.mapInitialConfig.sources)||{};return E()(t)?D(e.layers):e.layers.map((function(e){var r=V(t,e);return a()({},e,r)}))},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((function(e){return e.split("?")[0]+t}))},Z={},X=function(e){return m()(e.url)?e.url[0]:e.url},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=v()(t.filter((function(t){return t.name===e})));return r||t.reduce((function(t,r){return t||!!r.nodes&&n.getGroupByName(e,r.nodes)}),void 0)},$=function(e,t){switch(t.toLowerCase()){case"elevation":return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return"elevation"===t.name.toLowerCase()||"depth"===t.name.toLowerCase()?a()({positive:"elevation"===t.name.toLowerCase()},t,{name:"elevation"===t.name.toLowerCase()?t.name:"DIM_"+t.name}):e}),null)}(e);default:return null}},ee=function(e,t){return e&&e.id||e.name+"__"+(t?t.length:Math.random().toString(36).substring(2,15))},te=function(e){return e.id?e:L(L({},e),{},{id:n.getLayerId(e)})},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[function(e){return(e.layers||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return!t})).length>0?L(L({},e),{},{layers:(e.layers||[]).map((function(e){return n.normalizeLayer(e)}))}):e},function(e){return e.groups?e:L(L({},e),{},{groups:{id:"Default",expanded:!0}})}].reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))(e)},ne=function(e){return function(t){return(t.group||"Default")===e||0===(t.group||"").indexOf("".concat(e,"."))}},oe=function(e,t){var r=0,n=e.map((function(e){return a()({},e,{storeIndex:r++})}));return n.reduce((function(e,t){return-1===e.indexOf(t.group||"Default")?e.concat([t.group||"Default"]):e}),[]).filter((function(e){return"background"!==e})).reverse().reduce((function(e,r){var o=r||"Default";return o.split(".").reduce((function(e,r,i,u){var s=o.split(".",i+1).join("."),l=function(e,t){return v()(t.filter((function(t){return d()(t)&&t.id===e})))}(s,e),c=i===u.length-1;return l?c&&(l.nodes=l.nodes.concat(C(s,n))):(l=function(e,t,r,n,o){return a()({},{id:e,title:null!=t?t:(r||"").replace(/\${dot}/g,"."),name:r,nodes:o?C(e,n):[],expanded:!0})}(s,J(s,t)||r,r,n,c),e.push(l)),l.nodes}),e),e}),[])},ae=function(e){return e.reduce((function(e,t){return e.concat(n.getNotEmptyGroup(t))}),[])},ie=function(e){var t=e.nodes.reduce((function(e,t){return t.nodes?e.concat(n.getNotEmptyGroup(t)):e.concat(t)}),[]);return t.length>0?a()({},e,{nodes:t}):[]},ue=function(e,t){return t.filter((function(e){return"background"===e.group})).concat(k(e,t))},se=function(e,t){var r=function(e){var t=!0;return e.forEach((function(e){e.visibility||(t=!1)})),t},n=function e(t,n){var o=t.nodes.map((function(t){return d()(t)?e(t,n):n.filter((function(e){return e.id===t}))[0]}));return a()({},t,{nodes:o,visibility:r(o)})},o=e.map((function(e){return a()({},e,{expanded:e.expanded||!1})}));return{flat:o,groups:t.map((function(e){return n(e,o)}))}},le=function(e,t){return t.filter((function(e){return"background"===e.group})).concat(k(e,t))},ce=function(e,t){return function(r,n){return t(r,e,n)}},fe=function(e,t){return function(r,n){return t(r,n,e)}},pe=function(e){if(e&&m()(e.layers)){var t=n.getLayersByGroup(e.layers,e.groups);m()(e.groups)&&(t=e.groups.reduce((function(e,t){var r=e;if(t.title){var o={title:t.title,description:t.description,tooltipOptions:t.tooltipOptions,tooltipPlacement:t.tooltipPlacement};r=n.deepChange(r,t.id,o)}return n.deepChange(r,t.id,"expanded",t.expanded)}),[].concat(t)));var r=Y(e);return a()({},e,{layers:{flat:n.reorder(t,r),groups:t}})}return e},de=function(e,t){var r,n=u()(e);return r="FeatureCollection"===e.type?e.features.map((function(e,t){return e.id||(e.id=t),e.geometry&&e.geometry.bbox&&isNaN(e.geometry.bbox[0])&&(e.geometry.bbox=[null,null,null,null]),e})):[w()(L(L({},e),{},{id:T()(e.id)?l()():e.id}),["geometry","type","style","id"])],{type:"vector",visibility:!0,group:"Local shape",id:t,name:e.fileName,hideLoading:!0,bbox:{bounds:{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]},crs:"EPSG:4326"},features:r}},ge=function(e){return a()({id:e.id,features:e.features,format:e.format,thumbURL:e.thumbURL&&"blob"===e.thumbURL.split(":")[0]?void 0:e.thumbURL,group:e.group,search:e.search,source:e.source,name:e.name,opacity:e.opacity,provider:e.provider,description:e.description,styles:e.styles,style:e.style,styleName:e.styleName,availableStyles:e.availableStyles,layerFilter:e.layerFilter,title:e.title,transparent:e.transparent,tiled:e.tiled,type:e.type,url:e.url,bbox:e.bbox,visibility:e.visibility,singleTile:e.singleTile||!1,allowedSRS:e.allowedSRS,matrixIds:e.matrixIds,tileMatrixSet:e.tileMatrixSet,requestEncoding:e.requestEncoding,dimensions:e.dimensions||[],maxZoom:e.maxZoom,maxNativeZoom:e.maxNativeZoom,maxResolution:e.maxResolution,minResolution:e.minResolution,disableResolutionLimits:e.disableResolutionLimits,hideLoading:e.hideLoading||!1,handleClickOnLayer:e.handleClickOnLayer||!1,queryable:e.queryable,featureInfo:e.featureInfo,catalogURL:e.catalogURL,capabilitiesURL:e.capabilitiesURL,useForElevation:e.useForElevation||!1,hidden:e.hidden||!1,origin:e.origin,thematic:e.thematic,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,legendOptions:e.legendOptions,tileSize:e.tileSize,version:e.version},e.params?{params:e.params}:{},e.credits?{credits:e.credits}:{},e.extendedParams?{extendedParams:e.extendedParams}:{},e.localizedLayerStyles?{localizedLayerStyles:e.localizedLayerStyles}:{})},me=M,ye=function(e){M=e},ve=function(){return M},be=function(e){var t=e.url,r=e.regexRule||n.getRegGeoserverRule(),o=m()(t)?t[0]:t;return r.test(o)&&o.match(r)[0]||null},he=function(e){var t,r,o,a=n.findGeoServerName({url:e.url}),i=X(e);if(a){var u=i.split(a);if(2===u.length){var s=e.name.split(":");2===s.length&&(i=u[0]+a+s[0]+"/"+s[1]+"/"+u[1])}}return t=i,r=L(L({},e.baseParams),e.params),o=Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("&"),-1===t.indexOf("?")?t+"?"+o:t+"&"+o},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.search&&e.search.url||e.url},Ee=function(e,t){return U(e,t)?function(e){return e&&e.invalid?a()({},e,{invalid:!1}):e}(e):a()({},e,{invalid:!0})},Pe=function(e,t){return!!U(e,t)},Se=function(e){return Z.getLayerTitleTranslations?Z.getLayerTitleTranslations(e):e.Title},_e=function(e,t){Z[e]=t},we=function(e){var t=z(m()(e.url)?e.url:[e.url]),r={};return t.forEach((function(t){(0,A.addAuthenticationParameter)(t,r,e.securityToken)})),r},xe=function(e){var t=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.group,n=e.visibility;return"background"===r&&"google"===t&&n})).length>0,r=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"google"!==t})),n=r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.group;return"background"===t}));if(t&&0===n.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visibility;return t})).length){if(n.length>0){var o=S()(r,{group:"background"});return r.map((function(e,t){return t===o?L(L({},e),{},{visibility:!0}):e}))}return[{type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0}].concat(D(r))}return r},Te=function(e){var t=e.imageUrl,r=e.link,n=e.title,o=t?'<img src="'.concat(t,'" ').concat(n?'title="'.concat(n,'"'):"",">"):n;return r&&o?'<a href="'.concat(r,'" target="_blank">').concat(o,"</a>"):o},Ae=function(e){return d()(e)?{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}:{}},je=function(e){var t=e.title,r=e.name,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return(null==t?void 0:t[n])||(null==t?void 0:t.default)||t||r},Le=function(e,t){if(e.disableResolutionLimits)return!0;var r=e.minResolution||-1/0,n=e.maxResolution||1/0;return void 0===t||t<n&&t>=r};n={getGroupByName:Q,getLayerId:ee,normalizeLayer:te,getNotEmptyGroup:ie,getLayersByGroup:oe,deepChange:q,reorder:ue,getRegGeoserverRule:ve,findGeoServerName:be,isInsideResolutionsLimits:Le}},17850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{COMPUTE_BBOX_HOOK:()=>T,DEFAULT_SCREEN_DPI:()=>O,EXTENT_TO_ZOOM_HOOK:()=>S,GET_COORDINATES_FROM_PIXEL_HOOK:()=>j,GET_PIXEL_FROM_COORDINATES_HOOK:()=>A,GOOGLE_MERCATOR:()=>P,METERS_PER_UNIT:()=>E,RESOLUTIONS_HOOK:()=>w,RESOLUTION_HOOK:()=>x,ZOOM_TO_EXTENT_HOOK:()=>_,addRootParentGroup:()=>oe,clearHooks:()=>M,compareMapChanges:()=>fe,createRegisterHooks:()=>pe,default:()=>de,defaultGetZoomForExtent:()=>K,dpi2dpm:()=>C,dpi2dpu:()=>N,executeHook:()=>I,generateNewUUIDs:()=>re,getBbox:()=>Z,getCenterForExtent:()=>z,getCurrentResolution:()=>Y,getGoogleMercatorResolutions:()=>J,getGoogleMercatorScale:()=>k,getGoogleMercatorScales:()=>G,getHook:()=>D,getIdFromUri:()=>ue,getResolutions:()=>q,getResolutionsForScales:()=>B,getScales:()=>W,getSimpleGeomType:()=>ie,getSphericalMercatorScale:()=>F,getSphericalMercatorScales:()=>U,getZoomForExtent:()=>H,getZoomFromResolution:()=>V,groupSaveFormatted:()=>ee,isNearlyEqual:()=>X,isSimpleGeomType:()=>ae,mapUpdated:()=>Q,mergeMapConfigs:()=>ne,parseLayoutValue:()=>se,prepareMapObjectToCompare:()=>le,registerHook:()=>R,saveMapConfiguration:()=>te,transformExtent:()=>$,updateObjectFieldKey:()=>ce});var n=r(86494),o=r(55595),a=r.n(o),i=r(89735),u=r(91577),s=r.n(u),l=(r(44436),r(2991),s()),c=r(36515),f=r(51312),p=r.n(f);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=96,E={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},P={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},S="EXTENT_TO_ZOOM_HOOK",_="ZOOM_TO_EXTENT_HOOK",w="RESOLUTIONS_HOOK",x="RESOLUTION_HOOK",T="COMPUTE_BBOX_HOOK",A="GET_PIXEL_FROM_COORDINATES_HOOK",j="GET_COORDINATES_FROM_PIXEL_HOOK",L={};function R(e,t){L[e]=t}function D(e){return L[e]}function I(e,t,r){var n=D(e);return n?t(n):r?r():null}function M(){L={}}function C(e){return e*(100/2.54)}function N(e,t){var r=(0,i.getUnits)(t||"EPSG:3857");return E[r]*C(e||O)}function F(e,t,r,n,o){return 2*Math.PI*e/(t*Math.pow(r,n)/C(o||O))}function k(e,t){return F(P.RADIUS,P.TILE_WIDTH,P.ZOOM_FACTOR,e,t)}function U(e,t,r,n,o,a){for(var i=[],u=n;u<=o;u++)i.push(F(e,t,r,u,a));return i}function G(e,t,r){return U(P.RADIUS,P.TILE_WIDTH,P.ZOOM_FACTOR,e,t,r)}function B(e,t,r){var n=N(r,t);return e.map((function(e){return e/n}))}function J(e,t,r){return B(G(e,t,r),"EPSG:3857",r)}function q(){return D("RESOLUTIONS_HOOK")?D("RESOLUTIONS_HOOK")():J(0,21,O)}function W(e,t){var r=N(t,e);return q().map((function(e){return e*r}))}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q(),r=t.map((function(t,r){return{diff:Math.abs(t-e),zoom:r}})),o=(0,n.minBy)(r,"diff"),a=o.zoom;return a}function K(e,t,r,n,o,a){var i=e[2]-e[0],u=e[3]-e[1],s=Math.abs(i/t.width),l=Math.abs(u/t.height),c=Math.max(s,l),f=(a||B(G(r,n,o||O),"EPSG:3857",o)).reduce((function(e,t,r){var n=Math.abs(t-c);return n>e.diff?e:{diff:n,zoom:r}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(f,n))}function H(e,t,r,n,o){return D("EXTENT_TO_ZOOM_HOOK")?D("EXTENT_TO_ZOOM_HOOK")(e,t,r,n,o):K(e,t,r,n,o,D("RESOLUTIONS_HOOK")?D("RESOLUTIONS_HOOK")(e,t,r,n,o,C(o||O)):null)}function Y(e,t,r,n){return D("RESOLUTION_HOOK")?D("RESOLUTION_HOOK")(e,t,r,n):J(t,r,n)[e]}function z(e,t){var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return{x:e[0]+r,y:e[1]+n,crs:t}}function Z(e,t){return I("COMPUTE_BBOX_HOOK",(function(r){return r(e,t)}))}var X=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Q(e,t){var r,o,a,i;return!(!e||(0,n.isEmpty)(e)||!t||(0,n.isEmpty)(t)||X(null==t||null===(r=t.center)||void 0===r?void 0:r.x,null==e||null===(o=e.center)||void 0===o?void 0:o.x)&&X(null==t||null===(a=t.center)||void 0===a?void 0:a.y,null==e||null===(i=e.center)||void 0===i?void 0:i.y)&&(null==t?void 0:t.zoom)===(null==e?void 0:e.zoom))}function $(e,t,r,n){var o=(0,i.getUnits)(e);return"ft"===o?{width:r/E.ft,height:n/E.ft}:"us-ft"===o?{width:r/E["us-ft"],height:n/E["us-ft"]}:"degrees"===o?{width:r/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:n/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:r,height:n}}var ee=function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}};function te(e,t,r,o,a,i,u){var s={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},f=t.map((function(e){return(0,c.saveLayer)(e)})),d=r.reduce((function(e,t){return e.concat((0,c.getGroupNodes)(t))}),[].concat(r.map((function(e){return e.id})))).map((function(e){var t=(0,c.getNode)(r,e);return t&&t.nodes?ee(t):null})).filter((function(e){return e})),g=o.filter((function(e){return!!e.thumbnail})),m=(0,c.extractSourcesFromLayers)(f),y=f.map((function(e){return p()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),v=(0,n.findIndex)(y,(function(e){return"annotations"===e.id}));if(-1!==v){var h=y[v].features.map((function(e){return"FeatureCollection"===e.type?b(b({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?l("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?l("properties.geometryGeodesic",null,e):{}}));y[v]=l("features",h,y[v])}return b({version:2,map:p()({},s,{layers:y,groups:d,backgrounds:g,text_search_config:a,bookmark_search_config:i},!(0,n.isEmpty)(m)&&{sources:m}||{})},u)}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.cloneDeep)(e),r=b(b({},(0,n.get)(e,"map.layers",[]).reduce((function(e,t){return b(b({},e),{},h({},t.id,"annotations"===t.id?t.id:a()()))}),{})),(0,n.get)(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return b(b({},e),{},h({},t.id,a()()))}),{}));return l("map.backgrounds",(0,n.get)(e,"map.backgrounds",[]).map((function(e){return b(b({},e),{},{id:r[e.id]})})),l("widgetsConfig",{collapsed:(0,n.mapValues)((0,n.mapKeys)((0,n.get)(e,"widgetsConfig.collapsed",{}),(function(e,t){return r[t]})),(function(e){return b(b({},e),{},{layouts:(0,n.mapValues)(e.layouts,(function(e){return b(b({},e),{},{i:r[e.i]})}))})})),layouts:(0,n.mapValues)((0,n.get)(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return b(b({},e),{},{i:r[e.i]})}))})),widgets:(0,n.get)(e,"widgetsConfig.widgets",[]).map((function(e){return b(b({},e),{},{id:r[e.id],layer:b(b({},(0,n.get)(e,"layer",{})),{},{id:r[(0,n.get)(e,"layer.id")]})})}))},l("map.layers",(0,n.get)(e,"map.layers",[]).map((function(e){return b(b({},e),{},{id:r[e.id]})})),t)))},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return(0,n.pick)(e,(0,n.keys)(e).filter((function(t){return void 0!==e[t]})))}))},o=re(t),a=[].concat(m((0,n.get)(e,"map.backgrounds",[])),m((0,n.get)(o,"map.backgrounds",[]))),i=r((0,n.get)(e,"map.layers",[])),u=r((0,n.get)(o,"map.layers",[])),s=(0,n.find)(i,(function(e){return"annotations"===e.id})),l=(0,n.find)(u,(function(e){return"annotations"===e.id})),c=[].concat(m(u.filter((function(e){return"annotations"!==e.id}))),m(i.filter((function(e){return"annotations"!==e.id}))),m(s||l?[b(b(b({},s||{}),l||{}),{},{features:[].concat(m((0,n.get)(s,"features",[])),m((0,n.get)(l,"features",[])))})]:[])),f=c.filter((function(e){return"background"===e.group})),p=(0,n.findIndex)(f,(function(e){return e.visibility})),d=(0,n.get)(e,"map.sources",{}),g=(0,n.get)(o,"map.sources",{}),y=b(b({},d),g),v=(0,n.get)(e,"widgetsConfig",{}),O=(0,n.get)(o,"widgetsConfig",{});return b(b(b({},o),e),{},{catalogServices:b(b({},(0,n.get)(e,"catalogServices",{})),{},{services:b(b({},(0,n.get)(e,"catalogServices.services",{})),(0,n.get)(o,"catalogServices.services",{}))}),map:b(b(b({},o.map),e.map),{},{backgrounds:a,groups:(0,n.uniqWith)([].concat(m((0,n.get)(e,"map.groups",[])),m((0,n.get)(o,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(m(f.slice(0,p+1)),m(f.slice(p+1).map((function(e){return b(b({},e),{},{visibility:!1})}))),m(c.filter((function(e){return"background"!==e.group})))),sources:(0,n.isEmpty)(y)?void 0:y}),widgetsConfig:{collapsed:b(b({},v.collapsed),O.collapsed),layouts:(0,n.uniq)([].concat(m((0,n.keys)(v.layouts)),m((0,n.keys)(O.layouts)))).reduce((function(e,t){return b(b({},e),{},h({},t,[].concat(m((0,n.get)(v,"layouts.".concat(t),[])),m((0,n.get)(O,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(m((0,n.get)(v,"widgets",[])),m((0,n.get)(O,"widgets",[])))},timelineData:b(b({},(0,n.get)(e,"timelineData",{})),(0,n.get)(o,"timelineData",{})),dimensionData:b(b({},(0,n.get)(e,"dimensionData",{})),(0,n.get)(o,"dimensionData",{}))})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",r=(0,n.get)(e,"map.groups",[]),o=r.filter((function(e){return"Default"!==e.id})),i=(0,n.find)(r,(function(e){return"Default"===e.id})),u=i&&{id:a()(),title:t,expanded:i.expanded},s=i?[].concat(m(o.map((function(e){var t=e.id,r=g(e,["id"]);return b({id:"".concat(u.id,".").concat(t)},r)}))),[u]):o;return b(b({},e),{},{map:b(b({},e.map),{},{groups:s,layers:(0,n.get)(e,"map.layers",[]).map((function(e){var t,r=e.group;return b(b({},g(e,["group"])),{},{group:!i||"background"===r||"Default"!==r&&r?i&&(null===(t=(0,n.find)(s,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===r})))||void 0===t?void 0:t.id)||r:u.id})}))})})};function ae(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;case"Point":case"Circle":case"LineString":case"Polygon":default:return!0}}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":return e;case"MultiPoint":case"Marker":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection";case"Text":return"Point";default:return e}}var ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,r=decodeURIComponent(e),n=t.exec(r);return n&&n.length&&n.length>1?n[1]:null},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,n.isString)(e)&&-1!==e.indexOf("%")?parseFloat((0,n.trim)(e))*t/100:(0,n.isNumber)(e)?e:0},le=function e(t){var r=["apiKey","time","args","fixed"],n=function(e){return r.reduce((function(t,r){return t||e===r}),!1)};Object.keys(t).forEach((function(r){var o=t[r],a=d(o);"object"!==a||null===o||n(r)?"undefined"!==a&&o&&!n(r)||delete t[r]:(e(o),Object.keys(o).length||delete t[r])}))},ce=function(e,t,r){e[t]&&(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],o=(0,n.pick)((0,n.cloneDeep)(e),r),a=(0,n.pick)((0,n.cloneDeep)(t),r);return ce(o.map,"text_serch_config","text_search_config"),ce(a.map,"text_serch_config","text_search_config"),le(o),le(a),(0,n.isEqual)(o,a)},pe=function(){var e={};return{registerHook:function(t,r){e[t]=r},getHook:function(t){return e[t]},executeHook:function(t,r,n){var o=e[t];return o?r(o):n?n():null}}};const de={createRegisterHooks:pe,EXTENT_TO_ZOOM_HOOK:S,RESOLUTIONS_HOOK:w,RESOLUTION_HOOK:x,COMPUTE_BBOX_HOOK:T,GET_PIXEL_FROM_COORDINATES_HOOK:A,GET_COORDINATES_FROM_PIXEL_HOOK:j,DEFAULT_SCREEN_DPI:O,ZOOM_TO_EXTENT_HOOK:_,registerHook:R,getHook:D,dpi2dpm:C,getSphericalMercatorScales:U,getSphericalMercatorScale:F,getGoogleMercatorScales:G,getGoogleMercatorResolutions:J,getGoogleMercatorScale:k,getResolutionsForScales:B,getZoomForExtent:H,defaultGetZoomForExtent:K,getCenterForExtent:z,getResolutions:q,getScales:W,getBbox:Z,mapUpdated:Q,getCurrentResolution:Y,transformExtent:$,saveMapConfiguration:te,generateNewUUIDs:re,mergeMapConfigs:ne,addRootParentGroup:oe,isSimpleGeomType:ae,getSimpleGeomType:ie,getIdFromUri:ue,parseLayoutValue:se,prepareMapObjectToCompare:le,updateObjectFieldKey:ce,compareMapChanges:fe,clearHooks:M}},59766:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{bh:()=>getMonitoredState});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24852),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),object_assign__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51312),object_assign__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(object_assign__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(86494),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(71703),react_redux__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_3__),url__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72500),url__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_4__),lodash_curry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(85359),lodash_curry__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_curry__WEBPACK_IMPORTED_MODULE_5__),redux_observable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1376),redux_observable__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(redux_observable__WEBPACK_IMPORTED_MODULE_6__),redux__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(70913),_EpicsUtils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(24357);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function loadScript(e){return new Promise((function(t,r){var n,o=document.createElement("script"),a=!1;o.type="text/javascript",o.src=e,o.async=!0,o.onerror=function(e){r(e,o)},o.onload=o.onreadystatechange=function(){a||this.readyState&&"complete"!==this.readyState||(a=!0,t())};var i=null===(n=document.getElementsByTagName("script"))||void 0===n?void 0:n[0];i?i.parentElement.insertBefore(o,i):document.head.appendChild(o)}))}var dynamicFederation=function(e,t){return new Promise((function(e){return e(__webpack_require__.I&&__webpack_require__.I("default"))})).then((function(){return window[e].init(__webpack_require__.S.default)})).then((function(){return window[e].get(t).then((function(e){return e()}))}))},defaultMonitoredState=[{name:"mapType",path:"maptype.mapType"},{name:"user",path:"security.user"}],getFromPlugins=lodash_curry__WEBPACK_IMPORTED_MODULE_5___default()((function(e,t){return Object.keys(t).map((function(r){return t[r][e]})).reduce((function(e,t){return _objectSpread(_objectSpread({},e),t)}),{})})),getReducers=getFromPlugins("reducers"),getEpics=getFromPlugins("epics"),combineReducers=function(e,t){var r=getReducers(e);return(0,redux__WEBPACK_IMPORTED_MODULE_7__.UY)(_objectSpread(_objectSpread({},t),r))},combineEpics=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=_objectSpread(_objectSpread({},getEpics(e)),t);return redux_observable__WEBPACK_IMPORTED_MODULE_6__.combineEpics.apply(void 0,_toConsumableArray((0,_EpicsUtils__WEBPACK_IMPORTED_MODULE_8__.f)(n,r)))},filterState=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.memoize)((function(e,t){return t.reduce((function(t,r){return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(t,_defineProperty({},r.name,(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,r.path)))}),{})}),(function(e,t){return t.reduce((function(t,r){return t+JSON.stringify((0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,r.path))}),"")})),getPluginSimpleName=function(e){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.endsWith)(e,"Plugin")&&e.substring(0,e.length-6)||e},normalizeName=function(e){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.endsWith)(e,"Plugin")&&e||e+"Plugin"},getPluginConfiguration=function(e,t){var r=getPluginSimpleName(t);return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.head)(e.filter((function(e){return e.name===r||e===r})).map((function(e){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isString)(e)?{name:e}:e})))||{}},parseExpression=function parseExpression(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},value=arguments.length>2?arguments[2]:void 0,searchExpression=/^\{(.*)\}$/,expression=searchExpression.exec(value),dispatch=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){return state("store").dispatch(e.apply(null,[e].concat(r)))}},request=url__WEBPACK_IMPORTED_MODULE_4___default().parse(location.href,!0);return null!==expression?eval(expression[1]):value},handleExpression=function(e,t,r){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isString)(r)&&0===r.indexOf("{")?parseExpression(e,t,r):r},filterDisabledPlugins=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,"cfg.disablePluginIf")||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,"plugin.disablePluginIf");return!(n&&!(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,"cfg.skipAutoDisable")&&handleExpression(t,r.requires,n))},isContainedInList=function(e,t,r,n){return e&&t&&-1!==handleExpression(r,n,t).indexOf(e)},showIn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return(isContainedInList(o,r.showIn,e,t)||isContainedInList(n,r.showIn,e,t)||!r.showIn&&a)&&!(isContainedInList(o,r.hideFrom,e,t)||isContainedInList(n,r.hideFrom,e,t))},isMapStorePlugin=function(e){var t;return e.loadPlugin||e.displayName||(null===(t=e.prototype)||void 0===t?void 0:t.isReactComponent)||e.isMapStorePlugin},getPluginImplementation=function(e,t){return isMapStorePlugin(e)?e:e(t)},includeLoaded=function(e,t,r,n){if(t[e]){var o=t[e],a=getPluginImplementation(o.component||o,n);return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(a,r,{loadPlugin:void 0},_objectSpread({},o.containers))}return r},getPriority=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(t,r+".priority")||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,r+".priority")||0},getMorePrioritizedContainer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return r.reduce((function(r,n){var o=n.name||n,a=getPriority(e,t,o);return a>r.priority?{plugin:{name:o,impl:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e[o],t[o])},priority:a}:r}),{plugin:null,priority:n})},parsePluginConfig=function e(t,r,n){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isArray)(n)?n.map((function(n){return e(t,r,n)})):(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?Object.keys(n).reduce((function(o,a){var i=n[a];return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(o,_defineProperty({},a,e(t,r,i)))}),{}):parseExpression(t,r,n)},canContain=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t[e]||r[e]||!1},isMorePrioritizedContainer=function(e,t,r,n){return null===getMorePrioritizedContainer(e,t,r,n).plugin},isValidConfiguration=function(e){return e&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isString)(e)||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)&&e.name},executeDeferredProp=function(e,t,r){return e&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(e[r])?_objectSpread(_objectSpread({},e),{},_defineProperty({},r,e[r](t))):e},getPluginItems=function e(t,r,n,o,a,i,u,s){return Object.keys(r).map((function(e){var t=getPluginConfiguration(n,e);return{name:e,impl:executeDeferredProp(includeLoaded(getPluginSimpleName(e),u,r[e]),t,o),config:t}})).filter((function(e){return isValidConfiguration(e.config)})).filter((function(e){return canContain(o,e.impl,e.config.override)})).filter((function(e){return showIn(t,r.requires,e.config,o,a,i)})).filter((function(e){return isMorePrioritizedContainer(e.impl,e.config.override,n,getPriority(e.impl,e.config.override,o))})).map((function(a){var i=getPluginSimpleName(a.name),s=includeLoaded(i,u,a.impl),l=object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(s,o+".impl")||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(s,o),(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(a.config,"override."+o));return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({name:i},l,{cfg:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},s.cfg||{},parsePluginConfig(t,r.requires,a.config.cfg||{})||void 0)},{plugin:s,items:e(t,r,n,i,null,!0,u)})})).filter((function(e){return filterDisabledPlugins(e,t,r)})).filter((function(e){return!s||s(e)}))},pluginsMergeProps=function(e,t,r){var n=r.pluginCfg,o=_objectWithoutProperties(r,["pluginCfg"]);return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},o,e,t,n||{})},importPlugin=function(e){return dynamicFederation(e,"./plugin")},getMonitoredState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return filterState(e,defaultMonitoredState.concat(t))},mapPluginsPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var r=t.cfg&&t.cfg.containerPosition||"bodyPlugins";return _objectSpread(_objectSpread({},e),{},_defineProperty({},r,e[r]?[].concat(_toConsumableArray(e[r]),[t]):[t]))}),{})},getPlugins=function(e){return Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e,(0,lodash__WEBPACK_IMPORTED_MODULE_2__.omit)(t,"reducers","epics"))}),{})},getPluginDescriptor=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.name:n,i=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.id:null,u=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.stateSelector:i||void 0,s=!(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)||void 0===n.isDefault||n.isDefault,l=((0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.name:n)+"Plugin",c=t[l];return c?{id:i||a,name:a,impl:includeLoaded(a,o,getPluginImplementation(c,u),u),cfg:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},c.cfg||{},(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?parsePluginConfig(e,t.requires,n.cfg):{}),items:getPluginItems(e,t,r,a,i,s,o)}:null},getConfiguredPlugin=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(e){var n=t[e.name]||!e.plugin.loadPlugin&&e.plugin,o=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)?e.id:null,a=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)?e.stateSelector:o||void 0,i=getPluginImplementation(n,a),u=function(t){return i?react__WEBPACK_IMPORTED_MODULE_0___default().createElement(i,_extends({key:e.id},t,e.cfg,{pluginCfg:e.cfg,items:e.items||[]})):r};return u.loaded=!!n,u}return e},setRefToWrappedComponent=function(e){return function(t){t&&(window["".concat(e,"Plugin")]=t)}},connect=function(e,t,r,n){return(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.connect)(e,t,r||pluginsMergeProps,n)},createPlugin=function(e,t){var r,n=t.component,o=t.options,a=void 0===o?{}:o,i=t.containers,u=void 0===i?{}:i,s=t.reducers,l=void 0===s?{}:s,c=t.epics,f=void 0===c?{}:c,p=t.lazy,d=void 0!==p&&p,g=t.enabler,m=void 0===g?function(){return!0}:g,y=t.loader,v=normalizeName(e),b=d?{loadPlugin:function(e){y().then((function(t){var r=t.default||t;e(object_assign__WEBPACK_IMPORTED_MODULE_1___default()(r,{isMapStorePlugin:!0}))}))},enabler:m}:object_assign__WEBPACK_IMPORTED_MODULE_1___default()(n,{isMapStorePlugin:!0});return _defineProperty(r={},v,object_assign__WEBPACK_IMPORTED_MODULE_1___default()(b,u,a)),_defineProperty(r,"reducers",l),_defineProperty(r,"epics",f),r},loadPlugin=function(e,t){return loadScript(e).then((function(){return importPlugin(t)})).then((function(e){return{name:t,plugin:e}}))},__WEBPACK_DEFAULT_EXPORT__={combineReducers,combineEpics,filterState,filterDisabledPlugins,getMonitoredState,mapPluginsPosition,getPlugins,getPluginDescriptor,getPluginItems,getConfiguredPlugin,setRefToWrappedComponent,connect,createPlugin,importPlugin,loadPlugin,handleExpression,getMorePrioritizedContainer,getPluginConfiguration,isMapStorePlugin}},36493:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addAuthenticationParameter:()=>C,addAuthenticationToSLD:()=>k,addAuthenticationToUrl:()=>N,cleanAuthParamsFromURL:()=>U,clearNilValuesForParams:()=>F,default:()=>G,findUserAttribute:()=>A,findUserAttributeValue:()=>j,getAuthKeyParameter:()=>M,getAuthenticationMethod:()=>D,getAuthenticationRule:()=>I,getAuthenticationRules:()=>L,getBasicAuthHeader:()=>_,getRefreshToken:()=>x,getSecurityInfo:()=>P,getToken:()=>w,getUser:()=>S,getUserAttributes:()=>T,isAuthenticationActivated:()=>R,setStore:()=>E});var n=r(59154),o=r(72500),a=r.n(o),i=r(51312),u=r.n(i),s=r(81938),l=r.n(s),c=r(54702),f=r.n(c),p=r(21389),d=r.n(p),g=(r(70913),r(46569),r(54863),r(1376),r(8364)),m=r.n(g);r(49977);var y="persisted.reduxStore",v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"persisted.reduxStore";return n.default.getConfigProp(e)||{}};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;n.default.setConfigProp(t,e)}(e)}function P(){return(!m()(v(e))&&(null===(t=v(e))||void 0===t?void 0:t.getState())||{}).security||{};var e,t}function S(){var e;return null===(e=P())||void 0===e?void 0:e.user}function _(){var e;return null===(e=P())||void 0===e?void 0:e.authHeader}function w(){var e;return null===(e=P())||void 0===e?void 0:e.token}function x(){var e;return null===(e=P())||void 0===e?void 0:e.refresh_token}function T(e){var t=e||S();if(!t||!t.attribute)return[];var r=t.attribute;return d()(r)?r:[r]}function A(e){var t=T();return t&&e?l()(t.filter((function(t){return t.name&&t.name.toLowerCase()===e.toLowerCase()}))):null}function j(e){var t=A(e);return null==t?void 0:t.value}function L(){return n.default.getConfigProp("authenticationRules")||[]}function R(){return n.default.getConfigProp("useAuthenticationRules")||!1}function D(e){var t=l()(L().filter((function(t){return t&&t.urlPattern&&e.match(new RegExp(t.urlPattern,"i"))})));return null==t?void 0:t.method}function I(e){return l()(L().filter((function(t){return t&&t.urlPattern&&e.match(new RegExp(t.urlPattern,"i"))})))}function M(e){var t,r=I(e);return null!==(t=null==r?void 0:r.authkeyParamName)&&void 0!==t?t:"authkey"}function C(e,t,r){if(!e||!R())return t;switch(D(e)){case"authkey":var n=f()(r)?w():r;if(!n)return t;var o=M(e);return u()(t||{},O({},o,n));case"test":var a=I(e),i=a?a.token:"",s=M(e);return u()(t||{},O({},s,i));default:return t}}function N(e){if(!e||!R())return e;var t=a().parse(e,!0);return t.query=C(e,t.query),delete t.search,a().format(t)}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){return f()(e[r])?t:h(h({},t),{},O({},r,e[r]))}),{})}function k(e,t){if(e.SLD){var r=a().parse(e.SLD,!0),n=C(e.SLD,r.query,t.securityToken);return u()({},e,{SLD:a().format(u()({},r,{query:n,search:void 0}))})}return e}function U(e){return n.default.filterUrlParams(e,[M(e)].filter((function(e){return e})))}const G={setStore:E,getSecurityInfo:P,getUser:S,getBasicAuthHeader:_,getToken:w,getRefreshToken:x,getUserAttributes:T,findUserAttribute:A,findUserAttributeValue:j,getAuthenticationRules:L,isAuthenticationActivated:R,getAuthenticationMethod:D,getAuthenticationRule:I,addAuthenticationToUrl:N,addAuthenticationParameter:C,clearNilValuesForParams:F,addAuthenticationToSLD:k,getAuthKeyParameter:M,cleanAuthParamsFromURL:U}},15442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{optionsToVendorParams:()=>N});var n=r(89223),o=r(67451),a=r(57784),i=r(70831),u=r(96191),s=r.n(u),l=r(97240),c=r.n(l),f=r(89735),p=r(86494);function d(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b,h=function(e){return e&&e.replace?e.replace(/\'/g,"''"):e},O=function(e,t){return!(0,p.isNil)(e)&&"isNull"!==t||!(0,p.isUndefined)(e)&&"isNull"===t},E=function(e){return'"'+e+'"'},P=function(e){return e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0"},S={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},_=function(e,t,r,n){var o;if("><"===t){if(r.startDate&&r.endDate){var i=r.startDate.toISOString?r.startDate.toISOString():r.startDate,u=r.endDate.toISOString?r.endDate.toISOString():r.endDate;o=a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+i+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+u+"</"+n+":Literal></"+n+":UpperBoundary>")}}else if(r.startDate){var s=r.startDate.toISOString?r.startDate.toISOString():r.startDate;o=a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+s+"</"+n+":Literal>")}return o},w=function(e,t,r,n){var o;return O(r,t)&&(o="isNull"===t?a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag):"="===t?a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>"):a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>*"+r+"*</"+n+":Literal>")),o},x=function(e,t,r,n){var o="";return O(r,t)&&"="===t&&""!==r&&(o=a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},T=function(e,t,r,n){var o;if("><"===t)(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(o=a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+r.lowBound+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+r.upBound+"</"+n+":Literal></"+n+":UpperBoundary>")):o=a.ogcComparisonOperators["<="](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r.upBound+"</"+n+":Literal>"):o=a.ogcComparisonOperators[">="](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r.lowBound+"</"+n+":Literal>");else{var i=(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;(0,p.isNil)(i)||(o=a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+i+"</"+n+":Literal>"))}return o},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName,r=e.geometryName,n=e.cqlFilter,o=void 0===n?"INCLUDE":n;return"queryCollection('".concat(t,"', '").concat(r,"','").concat(h(o),"')")},j=function(e){return"collectGeometries(".concat(e,")")},L=function(e,t,r){var n,u,l,f,d,g,m,v=[];if(e.filterFields&&e.filterFields.length>0)""!==(n=e.groupFields&&e.groupFields.length>0?b.processOGCFilterGroup(e.groupFields[0],e,r):b.processOGCFilterFields(null,e,r))&&v.push(n);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){var h=a.ogcLogicalOperators.AND(r,e.simpleFilterFields.map((function(e){return function(e,t){var r="";switch(e.type){case"date":r=_(e.attribute,e.operator,e.values,t);break;case"number":r=T(e.attribute,e.operator,e.values,t);break;case"string":r=w(e.attribute,e.operator,e.values,t);break;case"boolean":r=x(e.attribute,e.operator,e.values,t);break;case"list":e.values&&e.values.length>0&&(r=e.values.reduce((function(r,n){var o=null===n||"null"===n?"isNull":"=";return r+w(e.attribute,o,n,t)}),""),r=a.ogcLogicalOperators.OR(t,r))}return r}(e,r)})).join(""));v.push(h)}if((0,p.isArray)(e.spatialField)?(f=(0,p.find)(e.spatialField,(function(e){return"BBOX"===e.operation})))||(l=e.spatialField):e.spatialField&&("BBOX"===e.spatialField.operation?f=e.spatialField:l=[e.spatialField]),f){if((0,p.isArray)(f.geometry&&f.geometry.extent[0])){var O=f.geometry.extent.reduce((function(e,n){var o=Object.assign({},f);return f.geometry.extent=n,e+b.processOGCSpatialFilter(t,o,r)}),"");u=a.ogcLogicalOperators.OR(r,O)}v.push(u)}else if(l&&(l=l.filter((function(e){return e&&e.geometry&&e.operation}))).length>0){var E=l.map((function(e){return b.processOGCSpatialFilter(t,e,r)})).join("");u=l.length>1?a.ogcLogicalOperators[e.spatialFieldOperator||"AND"](r,E):E,v.push(u)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){var P=y(y({},e.crossLayerFilter),{},{attribute:e.crossLayerFilter.attribute});Array.isArray()?P.forEach((function(e){return v.push(b.processOGCCrossLayerFilter(e,r))})):v.push(b.processOGCCrossLayerFilter(P,r))}return e.options&&e.options.cqlFilter&&v.push((d=e.options.cqlFilter,g={filterNS:r,wfsVersion:t,gmlVersion:(0,o.wfsToGmlVersion)(t)},m=c()(g),s()(m)((0,i.read)(d)))),v},R=function(e){var t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}var r,n,o=[];if(t.filterFields&&t.filterFields.length>0)(r=b.processCQLFilterGroup(t.groupFields[0],t))&&o.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){var a=t.simpleFilterFields.reduce((function(e,t){var r=e,n=b.processCQLSimpleFilterField(t);return!1!==n&&(r=e.length>0?e+" AND ("+n+")":"("+n+")"),r}),"");a=a.length>0?a:"INCLUDE",o.push(a)}if(t.spatialField&&(n=b.processCQLSpatialFilter(t))&&o.push(n),t.crossLayerFilter){var i=t.crossLayerFilter,u=i.operation,s=i.attribute,l=i.collectGeometries&&i.collectGeometries.queryCollection;if(u&&s&&l){var c=l.typeName,f=l.geometryName,p=b.getCrossLayerCqlFilter(i),d=j(A({typeName:c,geometryName:f,cqlFilter:p}));o.push("".concat(u,"(").concat(s,",").concat(d,")"))}}return o.length?"("+(o.length>1?o.join(") AND ("):o[0])+")":null},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||(0,p.isArray)(e.spatialField)&&(0,p.findIndex)(e.spatialField,(function(e){return e.operation&&e.geometry}))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}b={processOGCFilterGroup:function(e,t,r){var n=b.processOGCFilterFields(e,t,r),o=b.findSubGroups(e,t.groupFields);return o.length>0&&o.forEach((function(e){n+=b.processOGCFilterGroup(e,t,r)})),""!==n?a.ogcLogicalOperators[e.logic](r,n):""},processOGCFilterFields:function(e,t,r){var n=e?t.filterFields.filter((function(t){return t.groupId===e.id&&O(t.value,t.operator)})):t.filterFields.filter((function(e){return O(e.value,e.operator)}));return n.length?n.reduce((function(e,t){var n;switch(t.type){case"date":case"date-time":case"time":n=_(t.attribute,t.operator,t.value,r);break;case"number":n=T(t.attribute,t.operator,t.value,r);break;case"string":n=w(t.attribute,t.operator,t.value,r);break;case"boolean":n=x(t.attribute,t.operator,t.value,r);break;case"list":n=function(e,t,r,n){var o;return(0,p.isNil)(r)||(o=a.ogcComparisonOperators[t](n,S[n].startTag+e+S[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o}(t.attribute,t.operator,t.value,r)}return"isNull"===t.operator&&(n=w(t.attribute,t.operator,t.operator,r)),n&&e.push(n),e}),[]).join(""):""},processOGCCrossLayerFilter:function(e,t){var r=t||"ogc",n=S[r].startTag+e.attribute+S[r].endTag;if(e.collectGeometries){var o=b.getCrossLayerCqlFilter(e);n+='<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection">'+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.typeName,"</ogc:Literal>")+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.geometryName,"</ogc:Literal>")+"<ogc:Literal><![CDATA[".concat(o,"]]></ogc:Literal>")+"</ogc:Function></ogc:Function>"}return"DWITHIN"===e.operation&&(n+="<"+r+':Distance units="m">'+(e.distance||0)+"</"+r+":Distance>"),a.ogcSpatialOperators[e.operation](r,n)},getGetFeatureBase:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=P(e),i="<wfs:GetFeature ";switch(i+=n?'outputFormat="'+n+'" ':"",i+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",i+=o.viewParams?' viewParams="'.concat(o.viewParams,'" '):"",a){case"1.0.0":i+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",i=r?i+' resultType="hits"':i,i+='service="WFS" version="'+a+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":i+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",i=r?i+' resultType="hits"':i,i+='service="WFS" version="'+a+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:i+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",i=r&&!t?i+' resultType="hits"':i,i+='service="WFS" version="'+a+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return i},toOGCFilterParts:L,findSubGroups:function(e,t){return t.filter((function(t){return t.groupId===e.id}))},toCQLFilter:R,getCrossLayerCqlFilter:function(e){return(0,p.get)(e,"collectGeometries.queryCollection.cqlFilter")||((0,p.get)(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&((0,p.get)(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&b.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE"},processCQLFilterGroup:function(e,t){var r="NOR"===e.logic?y(y({},e),{},{logic:"AND",negateAll:!0}):e,n=b.processCQLFilterFields(r,t),o=b.findSubGroups(r,t.groupFields);if(o.length>0){var a=o.map((function(e){return(r.negateAll?"NOT (":"(")+b.processCQLFilterGroup(e,t)+")"})).join(" "+r.logic+" ");return n?[n,a].join(" "+r.logic+" "):a}return n},processCQLSimpleFilterField:function(e){var t=!1;switch(e.type){case"date":t=b.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=b.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=b.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=b.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){var r=!1,n=e.values.reduce((function(e,t){return null===t||"null"===t?r=!0:e.push("'"+t+"'"),e}),[]);t=n.length>0?e.attribute+" IN("+n.join(",")+")":t,r&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},processCQLSpatialFilter:function(e){var t=((0,p.isArray)(e.spatialField)?e.spatialField:[e.spatialField]).filter((function(e){return e&&e.geometry&&e.operation})),r="";return t.forEach((function(n,o){if(r+=n.operation+'("'+n.attribute+'",',n.collectGeometries&&n.collectGeometries.queryCollection)r+=j(A(n.collectGeometries.queryCollection));else{var a=n.geometry.projection||"";a=2===a.split(":").length?"SRID="+a.split(":")[1]+";":"",r+=a+b.getCQLGeometryElement(n.geometry.coordinates,n.geometry.type)}r+=")",o<t.length-1&&(r+=" ".concat(e.spatialFieldOperator||"AND"," "))})),r},processCQLFilterFields:function(e,t){var r=t.filterFields.filter((function(t){return t.groupId===e.id})),n=[];return r&&(r.forEach((function(t){var r;switch(t.type){case"date":case"time":case"date-time":r=b.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=b.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=b.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=b.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=b.cqlListField(t.attribute,t.operator,t.value)}r&&n.push(e.negateAll?"NOT ("+r+")":r)})),n=n.join(" "+e.logic+" ")),n},getCQLGeometryElement:function(e,t){var r=t+"(";switch(t){case"Point":r+=e.join(" ");break;case"MultiPoint":e.forEach((function(t,n){r+=t.join(" "),r+=n<e.length-1?", ":""}));break;case"Polygon":e.forEach((function(t,o){r+="(";var a=(0,n.closePolygon)(t).map((function(e){return e[0]+" "+e[1]}));r+=a.join(", "),r+=")",r+=o<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach((function(t,o){r+="(",t.forEach((function(e,o){r+="(";var a=(0,n.closePolygon)(e).map((function(e){return e[0]+" "+e[1]}));r+=a.join(", "),r+=")",r+=o<t.length-1?", ":""})),r+=")",r+=o<e.length-1?", ":""}))}return r+=")"},cqlStringField:function(e,t,r){var n,o=E(e);return(0,p.isNil)(r)||(n="isNull"===t?"isNull("+o+")=true":"="===t?o+t+"'"+h(r)+"'":"ilike"===t?"strToLowerCase("+o+") LIKE '%"+h(r).toLowerCase()+"%'":o+" LIKE '%"+h(r)+"%'"),n},cqlDateField:function(e,t,r){var n;return"><"===t?r.startDate&&r.endDate&&(n="("+e+">='"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"' AND "+e+"<='"+(r.endDate.toISOString?r.endDate.toISOString():r.endDate)+"')"):r.startDate&&(n=e+t+"'"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"'"),n},cqlNumberField:function(e,t,r){var n,o=E(e);if("><"===t)(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(n="("+o+">='"+r.lowBound+"' AND "+o+"<='"+r.upBound+"')"):n="("+o+"<='"+r.upBound+"')":n="("+o+">='"+r.lowBound+"')";else{var a=(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;(0,p.isNil)(a)||(n=o+" "+t+" '"+a+"'")}return n},cqlBooleanField:function(e,t,r){var n="";return(0,p.isNil)(r)||""===r||"="===t&&(n='"'+e+'"'+t+"'"+r+"'"),n},cqlListField:function(e,t,r){return b.cqlStringField(e,t,r)},toOGCFilter:function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{n=t instanceof Object?t:JSON.parse(t)}catch(e){return e}var l=P(r||"2.0"),c="2.0"===l?"fes":"ogc",f=b.getGetFeatureBase(l,n.pagination,a,i,t&&t.options),p=b.toOGCFilterParts(n,l,c),d="";return p.length>0&&(d="<"+c+":Filter>",1===p.length?d+=p[0]:(d+="<"+c+":And>",p.forEach((function(e){d+=e})),d+="</"+c+":And>"),d+="</"+c+":Filter>"),f+="<wfs:Query ".concat("2.0"===l?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==s&&'srsName="'.concat(s,'"')||"",">"),f+=d,u&&(f+=u.map((function(e){return S[c].startTag+e+S[c].endTag})).join("")),o&&o.sortBy&&o.sortOrder&&(f+="<"+c+":SortBy><"+c+":SortProperty>"+S[c].startTag+o.sortBy+S[c].endTag+"<"+c+":SortOrder>"+o.sortOrder+"</"+c+":SortOrder></"+c+":SortProperty></"+c+":SortBy>"),f+"</wfs:Query></wfs:GetFeature>"},reprojectFilterInNativeCrs:function(e,t){var r,n=e.spatialField.geometry.projection,o=e.spatialField.geometry.center,a=e.spatialField.geometry.radius,i=(0,f.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,u=o&&[(r=(0,f.reproject)(o,n,t)).x,r.y],s=a&&(0,f.reproject)([a,0],n,t).x;return y(y({},e),{},{spatialField:y(y({},e.spatialField),{},{geometry:y(y({},e.spatialField.geometry),{},{center:u,radius:s,coordinates:i,projection:t})})})},processOGCSpatialFilter:function(e,t,r){if(t.collectGeometries)return b.processOGCCrossLayerFilter(t);var i=S[r].startTag+t.attribute+S[r].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":i+=(0,n.processOGCGeometry)((0,o.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(i+="<"+r+':Distance units="m">'+(t.geometry.distance||0)+"</"+r+":Distance>");break;case"BBOX":var u=t.geometry.extent[0]+" "+t.geometry.extent[1],s=t.geometry.extent[2]+" "+t.geometry.extent[3];i+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+u+"</gml:lowerCorner><gml:upperCorner>"+s+"</gml:upperCorner></gml:Envelope>"}return a.ogcSpatialOperators[t.operation](r,i)},mergeFiltersToOGC:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nsPlaceholder,r=void 0===t?"ogc":t,n=e.ogcVersion,a=void 0===n?"2.0":n,u=e.addXmlnsToRoot,l=void 0!==u&&u,f=e.xmlnsToAdd,g=void 0===f?[]:f,m=c()({filterNS:r,wfsVersion:a,gmlVersion:(0,o.wfsToGmlVersion)(a)}),y=s()(m),v=arguments.length,b=new Array(v>1?v-1:0),h=1;h<v;h++)b[h-1]=arguments[h];var O=m.filter(m.and.apply(m,d((0,p.flatten)(b.filter((function(e){return!!e&&((0,p.isString)(e)||D(e)&&!e.disabled)})).map((function(e){return(0,p.isString)(e)?[y((0,i.read)(e))]:L(e,a,r)}))))));if(l){var E=O.indexOf(">");return"".concat(O.slice(0,E)).concat(g.length>0?" ".concat(g.join(" ")):"").concat(O.slice(E))}return O}};var N=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.layerFilter,o=t.filterObj,a=[D(n)&&!n.disabled&&R(n),D(o)&&R(o),t&&t.params&&t.params.CQL_FILTER,r];return(e=(a=a.filter((function(e){return!!e}))).length>1?a.map((function(e){return"(".concat(e,")")})).join(" AND "):a.pop())?M(M({},t.params),{},{CQL_FILTER:e}):t.params}},64973:(e,t,r)=>{"use strict";r.r(t),r.d(t,{needsReload:()=>c,toDescribeURL:()=>f,extractGeometryType:()=>p,extractGeometryAttributeName:()=>d});var n=r(15442),o=r(72500),a=r.n(o),i=r(86494);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e,t){var r=s(s({},(0,n.optionsToVendorParams)(e)||{}),{},{_v_:e._v_}),o=s(s({},(0,n.optionsToVendorParams)(t)||{}),{},{_v_:t._v_});return["_v_","CQL_FILTER","VIEWPARAMS"].reduce((function(e,t){return r[t]!==o[t]||e}),!1)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,o=e.url,i=e.describeFeatureTypeURL,u=a().parse(i||n.url||o,!0);return a().format(s(s({},u),{},{search:void 0,query:s(s({},u.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},p=function(e){var t=(0,i.get)(e,"featureTypes[0].properties")||[];return t&&(0,i.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.type.split(":")[1]})))},d=function(e){var t=(0,i.get)(e,"featureTypes[0].properties")||[];return t&&(0,i.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.name})))}},73418:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getDefaultMatrixId:()=>l,getMatrixIds:()=>c,limitMatrix:()=>f,getTileMatrixSet:()=>p,getRequestEncoding:()=>d,getOperations:()=>g,getOperation:()=>m,getGetTileURL:()=>y,getCapabilitiesURL:()=>v,getDefaultStyleIdentifier:()=>b,getDefaultFormat:()=>h,sortTileMatrix:()=>O,getTileMatrix:()=>E});var n,o=r(89735),a=r(86494);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){for(var t=new Array(30),r=0;r<30;++r)t[r]=e.tileMatrixPrefix+r;return t},c=function(e,t){return(0,a.isObject)(e)&&(0,a.isArray)(e[t])&&e[t]||(0,a.isArray)(e)&&e||[]},f=function(e,t){return e.length>t?(0,a.slice)(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e},p=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t;return e&&(0,a.isString)(e)?e:e?(0,o.getEquivalentSRS)(t,r).reduce((function(t,r){if((0,a.isArray)(e)){var i=(0,a.head)(e.filter((function(e){return(e["ows:Identifier"]===r||(0,o.getEPSGCode)(e["ows:SupportedCRS"])===r)&&n[e["ows:Identifier"]]})));return i&&i["ows:Identifier"]?i["ows:Identifier"]:t}return(0,a.isObject)(e)&&e[r]||t}),i):i},d=function(e){var t=n.getOperations(e);return n.getOperation(t,"GetTile","KVP")?"KVP":n.getOperation(t,"GetTile","RESTful")&&"RESTful"},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.castArray)(e.Capabilities["ows:OperationsMetadata"]["ows:Operation"])},m=function(e,t,r){return(0,a.head)((0,a.castArray)((0,a.head)(e.filter((function(e){return e.$.name===t})).map((function(e){return(0,a.castArray)(e["ows:DCP"]["ows:HTTP"]["ows:Get"])})))||[]).filter((function(e){return(e["ows:Constraint"]&&e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"])===r})).map((function(e){return e.$["xlink:href"]})))},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ResourceURL,r=e.GetTileURL,n=e.requestEncoding;return"KVP"===n?r:t&&(0,a.castArray)(t).map((function(e){var t=e.$,r=void 0===t?{}:t;return r.template||r.value}))||r},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.head)((0,a.castArray)(e.capabilitiesURL||e.GetTileURL))},b=function(e){return null!=e&&e.Style?(0,a.head)((0,a.castArray)(e.Style).filter((function(e){var t=e.$;return"true"===(void 0===t?{}:t).isDefault})).map((function(e){return e["ows:Identifier"]}))):null},h=function(e){return(0,a.head)((0,a.castArray)(e.Format))},O=function(e,t){return e?u(u({},e),{},{TileMatrix:(0,a.sortBy)(null==e?void 0:e.TileMatrix.map((function(e){return u(u({},e),{},{ScaleDenominator:Number(e.ScaleDenominator)})})),"ScaleDenominator").reverse().filter((function(e){return!t||t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.identifier;return t})).indexOf(e["ows:Identifier"])>=0}))}):e},E=function(e,t){var r,n,o=p(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),i=e.matrixIds&&c(e.matrixIds,o||t),u=O((0,a.head)(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===o}))),i),s=null==u||null===(r=(n=u.TileMatrix).map)||void 0===r?void 0:r.call(n,(function(e){return e["ows:Identifier"]}));return{matrixIds:s&&i?i.sort((function(e,t){return s.indexOf(e.identifier)-s.indexOf(t.identifier)})):i,tileMatrixSetName:o,tileMatrixSet:u}};n={getOperations:g,getOperation:m}},13530:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r,n){var o=t[e];return o&&o.create?o.create(r,n):o?o(r,n):null},renderLayer:function(e,r,n,o,a){var i=t[e];return i&&i.render?i.render(r,n,o,a):null},updateLayer:function(e,r,n,o,a){var i=t[e];return i&&i.update?i.update(r,n,o,a):null},isSupported:function(e){return!!t[e]}};e.exports=r},27415:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r){var n=t[e];return n&&n.create?n.create(r):n?n(r):null},renderLayer:function(e,r,n,o,a){var i=t[e];return i&&i.render?i.render(r,n,o,a):null},updateLayer:function(e,r,n,o){var a=t[e];return a&&a.update?a.update(r,n,o):null},isValid:function(e,r){var n=t[e];return!n||!n.isValid||n.isValid(r)},isSupported:function(e){return!!t[e]}};e.exports=r},84109:(e,t,r)=>{var n=r(17850).getCurrentResolution,o=r(54702);e.exports={buildRequest:function(e,t){var r,a,i,u;return{request:{lat:t.point.latlng.lat,lng:t.point.latlng.lng},metadata:{fields:(null===(r=e.features)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.properties)&&Object.keys(e.features[0].properties)||[],title:e.name,resolution:o(null==t||null===(i=t.map)||void 0===i?void 0:i.resolution)?(null==t||null===(u=t.map)||void 0===u?void 0:u.zoom)&&n(t.map.zoom,0,21,96):t.map.resolution,buffer:t.buffer||2,units:t.map&&t.map.units,rowViewer:e.rowViewer,viewer:e.viewer},url:""}}}},17337:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(49977).Observable,u=r(89735).normalizeSRS,s=r(36515).getLayerUrl,l=r(86494).isObject,c=r(15442).optionsToVendorParams,f=r(83358),p=f.describeFeatureType,d=f.getFeature,g=r(64973).extractGeometryAttributeName,m=r(36493).addAuthenticationToSLD,y=r(51312);e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.map,n=void 0===r?{}:r,a=t.point,i=t.currentLocale,c=t.params,f=t.maxItems,p=void 0===f?10:f,d=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;return{request:m(o({point:a,service:"WFS",version:"1.1.1",request:"GetFeature",outputFormat:"application/json",exceptions:"application/json",id:e.id,typeName:e.name,srs:u(n.projection)||"EPSG:4326",feature_count:p},y({params:c})),e),metadata:{title:l(e.title)?e.title[i]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:d,featureInfo:g},url:s(e).replace(/[?].*$/g,"")}},getIdentifyFlow:function(e,t,r){var n=r.point,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,["point"]),a=function(e){var t,r,n=null==e||null===(t=e.geometricFilter)||void 0===t||null===(r=t.value)||void 0===r?void 0:r.geometry;if(n)return n;var o=e.latlng.lng;return{coordinates:[o-360*Math.floor(o/360+.5),e.latlng.lat],projection:"EPSG:4326",type:"Point"}}(n);return i.defer((function(){return p(e.url,e.name).then((function(r){var n=g(r),i=c({layerFilter:e.layerFilter,filterObj:{spatialField:{attribute:n,operation:"INTERSECTS",geometry:a}},params:y({},e.baseParams,e.params,o)});return d(t,e.name,i)}))}))}}},30048:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(17850).getCurrentResolution,u=r(89735),s=u.reproject,l=u.getProjectedBBox,c=u.normalizeSRS,f=r(36515).getLayerUrl,p=r(86494),d=p.isObject,g=p.isNil,m=r(15442).optionsToVendorParams,y=r(95525).generateEnvString,v=r(36493).addAuthenticationToSLD,b=r(51312);e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sizeBBox,n=t.map,a=void 0===n?{}:n,u=t.point,p=t.currentLocale,h=t.params,O=t.maxItems,E=void 0===O?10:O,P=t.env,S=arguments.length>2?arguments[2]:void 0,_=arguments.length>3?arguments[3]:void 0,w=arguments.length>4?arguments[4]:void 0,x=r&&r.height||101,T=r&&r.width||101,A=[x,T],j=0,L=g(a.resolution)?i(Math.ceil(a.zoom),0,21,96):a.resolution,R=u.latlng.lng,D=R-360*Math.floor(R/360+.5),I={x:D,y:u.latlng.lat},M=s(I,"EPSG:4326",a.projection),C=l(M,L,j,A,null),N=e.name;e.queryLayers&&(N=e.queryLayers.join(","));var F=y(P),k=m({layerFilter:e.layerFilter,filterObj:e.filterObj,params:b({},e.baseParams,e.params,h)});return{request:v(o({service:"WMS",version:"1.1.1",request:"GetFeatureInfo",exceptions:"application/json",id:e.id,layers:e.name,query_layers:N,styles:e.style,x:T%2==1?Math.ceil(T/2):T/2,y:T%2==1?Math.ceil(T/2):T/2,height:x,width:T,srs:c(a.projection)||"EPSG:4326",bbox:C.minx+","+C.miny+","+C.maxx+","+C.maxy,feature_count:E,info_format:S,ENV:F},b({},k)),e),metadata:{title:d(e.title)?e.title[p]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:_,featureInfo:w},url:f(e).replace(/[?].*$/g,"")}}}},41537:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(17850),u=i.getCurrentResolution,s=i.getResolutions,l=r(89735),c=l.reproject,f=l.normalizeSRS,p=r(73418),d=p.getTileMatrixSet,g=p.limitMatrix,m=p.getMatrixIds,y=p.getDefaultMatrixId,v=r(36515).getLayerUrl,b=r(15442).optionsToVendorParams,h=r(86494),O=h.isObject,E=h.isNil,P=r(51312);e.exports={buildRequest:function(e,t){var r=E(t.map.resolution)?u(Math.round(t.map.zoom),0,21,96):t.map.resolution,n=e.resolutions||s(),a=e.tileSize||256,i=[e.originX||-20037508.3428,e.originY||20037508.3428],l=t.point.latlng.lng,p={x:l-360*Math.floor(l/360+.5),y:t.point.latlng.lat},h=c(p,"EPSG:4326",t.map.projection),S=f(e.srs||t.map.projection||"EPSG:3857",e.allowedSRS),_=d(e.tileMatrixSet,S,e.allowedSRS,e.matrixIds),w=(h.x-i[0])/(r*a),x=(i[1]-h.y)/(r*a),T=Math.floor(w),A=Math.floor(x),j=Math.floor((w-T)*a),L=Math.floor((x-A)*a),R=g(e.matrixIds&&m(e.matrixIds,_||S)||y(e),n.length),D=b({layerFilter:e.layerFilter,filterObj:e.filterObj,params:P({},e.baseParams,e.params,t.params)});return{request:o(o({service:"WMTS",request:"GetFeatureInfo",layer:e.name,infoformat:t.format,style:e.style||""},P({},D)),{},{tilecol:T,tilerow:A,tilematrix:R[Math.round(t.map.zoom)],tilematrixset:_,i:j,j:L}),metadata:{title:O(e.title)?e.title[t.currentLocale]||e.title.default:e.title,regex:e.featureInfoRegex},url:v(e).replace(/[?].*$/g,"")}}}},70831:e=>{var t={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|-?\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){var t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);if(t){var r=e.length,n=e.indexOf("(",t[0].length);if(n>-1)for(var o=1;n<r&&o>0;)switch(n++,e.charAt(n)){case"(":o++;break;case")":o--}return[e.substr(0,n+1)]}return null},END:/^$/},r={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},n={"=":"=","<>":"<>","<":"<","<=":"<=",">":">",">=":">=",LIKE:"like",ILIKE:"ilike",BETWEEN:"><","IS NULL":"isNull"},o={AND:"and",OR:"or",NOT:"not"},a={RPAREN:3,LOGICAL:2,COMPARISON:1},i=function(e,t){return t instanceof RegExp?t.exec(e):t(e)},u=function(e,r){var n,o,a=r.length;for(n=0;n<a;n++){o=r[n];var u=i(e,t[o]);if(u){var s=u[0];return{type:o,text:s,remainder:e.substr(s.length).replace(/^\s*/,"")}}}var l="ERROR: In parsing: ["+e+"], expected one of: ";for(n=0;n<a;n++)l+="\n    "+(o=r[n])+": "+t[o];throw new Error(l)};e.exports={read:function(e){return function(e){for(var t=[],r=[];e.length;){var i=e.shift();switch(i.type){case"PROPERTY":case"GEOMETRY":case"VALUE":r.push(i);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var u=a[i.type];t.length>0&&a[t[t.length-1].type]<=u;)r.push(t.pop());t.push(i);break;case"SPATIAL":case"NOT":case"LPAREN":t.push(i);break;case"RPAREN":for(;t.length>0&&"LPAREN"!==t[t.length-1].type;)r.push(t.pop());t.pop(),t.length>0&&"SPATIAL"===t[t.length-1].type&&r.push(t.pop());break;case"COMMA":case"END":break;default:throw new Error("Unknown token type "+i.type)}}for(;t.length>0;)r.push(t.pop());var s=function e(){var t=r.pop();switch(t.type){case"LOGICAL":var a=e();return{filters:[e(),a],type:o[t.text.toUpperCase()]};case"NOT":return{filters:[e()],type:o.NOT};case"BETWEEN":r.pop();var i=e(),u=e();return{property:e(),lowerBoundary:u,upperBoundary:i,type:n.BETWEEN};case"COMPARISON":var s=e();return{property:e(),value:s,type:n[t.text.toUpperCase()]};case"IS_NULL":return{property:e(),type:n[t.text.toUpperCase()]};case"VALUE":var l=t.text.match(/^'(.*)'$/);return l?l[1].replace(/''/g,"'"):Number(t.text);case"SPATIAL":switch(t.text.toUpperCase()){case"BBOX":var c=e(),f=e(),p=e(),d=e();return{type:"BBOX",property:e(),value:[d,p,f,c]};case"INTERSECTS":var g=e();return{type:"INTERSECTS",property:e(),value:g};case"WITHIN":var m=e();return{type:"WITHIN",property:e(),value:m};case"CONTAINS":var y=e();return{type:"CONTAINS",property:e(),value:y};case"DWITHIN":var v=e();return{type:"DWITHIN",value:e(),property:e(),distance:Number(v)};default:return null}case"GEOMETRY":return function(){throw new Error("WKT parsing for CQL filter not supported yet")}(t.text);default:return t.text}}();if(r.length>0){for(var l="Remaining tokens after building AST: \n",c=r.length-1;c>=0;c--)l+=r[c].type+": "+r[c].text+"\n";throw new Error(l)}return s}(function(e){var t,n=[],o=e,a=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{if(o=(t=u(o,a)).remainder,a=r[t.type],"END"!==t.type&&!a)throw new Error("No follows list for "+t.type);n.push(t)}while("END"!==t.type);return n}(e))}}},97240:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(57784),a=o.logical,i=o.spatial,u=o.comparison,s=o.literal,l=o.propertyName,c=o.valueReference,f=o.distance,p=o.lower,d=o.upper,g=r(11168),m=g.filter,y=g.fidFilter,v=r(89223).processOGCGeometry;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterNS,r=void 0===t?"ogc":t,o=e.gmlVersion,g=e.wfsVersion,b=void 0===g?"1.1.0":g,h=o||"3.1.1",O=function(e){return v(h,e)},E=function(e){return"object"===n(e)&&Date,s(r,e)},P=0===b.indexOf("2.")?c:l;return{filter:m.bind(null,r),fidFilter:y.bind(null,r),and:a.and.bind(null,r),or:a.or.bind(null,r),not:a.not.bind(null,r),property:function(e){return{equalTo:function(t){return u.equal(r,P(r,e),E(t))},greaterThen:function(t){return u.greater(r,P(r,e),E(t))},greaterThenOrEqualTo:function(t){return u.greaterOrEqual(r,P(r,e),E(t))},lessThen:function(t){return u.less(r,P(r,e),E(t))},lessThenOrEqualTo:function(t){return u.lessOrEqual(r,P(r,e),E(t))},notEqualTo:function(t){return u.notEqual(r,P(r,e),E(t))},between:function(t,n){return u.between(r,P(r,e),p(r,E(t)),d(r,E(n)))},like:function(t,n){return u.like(r,P(r,e),E(t),n)},ilike:function(t,n){return u.ilike(r,P(r,e),E(t),n)},isNull:function(){return u.isNull(r,P(r,e))},intersects:function(t){return i.intersects(r,P(r,e),O(t))},within:function(t){return i.within(r,P(r,e),O(t))},dwithin:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return i.dwithin(r,P(r,e),O(t),f(r,n,o))},contains:function(t){return i.contains(r,P(r,e),O(t))}}}}}},11168:e=>{var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",t=arguments.length>1?arguments[1]:void 0;return"<".concat(e,":Filter>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Filter>")};e.exports={fidFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",r=arguments.length>1?arguments[1]:void 0;return t(e,"<".concat(e,':FeatureId fid="').concat(r,'"/>'))},filter:t}},96191:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=r(86494),i=a.includes,u=a.isNil,s=["and","or","not"],l={"=":"equalTo","<>":"notEqualTo","><":"between","<":"lessThen","<=":"lessThenOrEqualTo",">":"greaterThen",">=":"greaterThenOrEqualTo",like:"like",ilike:"ilike"};e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r){var o=r.type,a=r.filters,c=void 0===a?[]:a,f=r.value,p=r.property,d=r.lowerBoundary,g=r.upperBoundary;return i(s,o)?t[o].apply(t,n(c.map(e(t)))):t.property(p)[l[o]](u(f)?d:f,g)}}},57784:e=>{var t={"=":function(e,t){return"<".concat(e,":PropertyIsEqualTo>").concat(t,"</").concat(e,":PropertyIsEqualTo>")},">":function(e,t){return"<".concat(e,":PropertyIsGreaterThan>").concat(t,"</").concat(e,":PropertyIsGreaterThan>")},"<":function(e,t){return"<".concat(e,":PropertyIsLessThan>").concat(t,"</").concat(e,":PropertyIsLessThan>")},">=":function(e,t){return"<".concat(e,":PropertyIsGreaterThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsGreaterThanOrEqualTo>")},"<=":function(e,t){return"<".concat(e,":PropertyIsLessThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsLessThanOrEqualTo>")},"<>":function(e,t){return"<".concat(e,":PropertyIsNotEqualTo>").concat(t,"</").concat(e,":PropertyIsNotEqualTo>")},"><":function(e,t){return"<".concat(e,":PropertyIsBetween>").concat(t,"</").concat(e,":PropertyIsBetween>")},like:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="true" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},ilike:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},isNull:function(e,t){return"<".concat(e,":PropertyIsNull>").concat(t,"</").concat(e,":PropertyIsNull>")}},r={AND:function(e,t){return"<".concat(e,":And>").concat(t,"</").concat(e,":And>")},OR:function(e,t){return"<".concat(e,":Or>").concat(t,"</").concat(e,":Or>")},NOR:function(e,t){return"<".concat(e,":Not><").concat(e,":Or>").concat(t,"</").concat(e,":Or></").concat(e,":Not>")},NOT:function(e,t){return"<".concat(e,":Not>").concat(t,"</").concat(e,":Not>")}},n={INTERSECTS:function(e,t){return"<".concat(e,":Intersects>").concat(t,"</").concat(e,":Intersects>")},BBOX:function(e,t){return"<".concat(e,":BBOX>").concat(t,"</").concat(e,":BBOX>")},CONTAINS:function(e,t){return"<".concat(e,":Contains>").concat(t,"</").concat(e,":Contains>")},DWITHIN:function(e,t){return"<".concat(e,":DWithin>").concat(t,"</").concat(e,":DWithin>")},WITHIN:function(e,t){return"<".concat(e,":Within>").concat(t,"</").concat(e,":Within>")}},o=function(e,t,r){return t(e,Array.isArray(r)?r.join(""):r)},a={and:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return a&&a.length>0?o(e,r.AND,[t].concat(a)):o(e,r.AND,t)},or:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return a&&a.length>0?o(e,r.OR,[t].concat(a)):o(e,r.OR,t)},not:function(e,t){return o(e,r.NOT,t)},nor:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return a&&a.length>0?o(e,r.NOR,[t].concat(a)):o(e,r.NOR,t)}},i={intersects:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return o(e,n.INTERSECTS,r)},within:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return o(e,n.WITHIN,r)},bbox:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return o(e,n.BBOX,r)},dwithin:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return o(e,n.DWITHIN,r)},contains:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return o(e,n.CONTAINS,r)}},u={equal:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t["="],n)},greater:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t[">"],n)},less:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t["<"],n)},greaterOrEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t[">="],n)},lessOrEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t["<="],n)},notEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t["<>"],n)},between:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t["><"],n)},like:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t.like,n)},ilike:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t.ilike,n)},isNull:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return o(e,t.isNull,n)}};e.exports={ogcComparisonOperators:t,ogcLogicalOperators:r,ogcSpatialOperators:n,propertyName:function(e,t){return"<".concat(e,":PropertyName>").concat(t,"</").concat(e,":PropertyName>")},valueReference:function(e,t){return"<".concat(e,":ValueReference>").concat(t,"</").concat(e,":ValueReference>")},distance:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return"<".concat(e,':Distance units="').concat(r,'">').concat(t,"</").concat(e,":Distance>")},literal:function(e,t){return"<".concat(e,":Literal>").concat(t,"</").concat(e,":Literal>")},logical:a,spatial:i,comparison:u,lower:function(e,t){return"<".concat(e,":LowerBoundary>").concat(t,"</").concat(e,":LowerBoundary>")},upper:function(e,t){return"<".concat(e,":UpperBoundary>").concat(t,"</").concat(e,":UpperBoundary>")}}},89223:(e,t,r)=>{var n=r(86494).isArray,o=function(e){return 0===e.indexOf("2.")},a=function(e){if(e.length>=3){var t=e[0],r=e[e.length-1];if(t[0]!==r[0]||t[1]!==r[1])return e.concat([e[0]])}return e},i=function(e,t,r){var n='<gml:Point srsDimension="2"';return n+=t?' srsName="'+t+'">':">",(n+=o(r)?"<gml:coord><X>"+e[0]+"</X><Y>"+e[1]+"</Y></gml:coord>":"<gml:pos>"+e.join(" ")+"</gml:pos>")+"</gml:Point>"},u=function(e,t,r){var i=o(r),u="<gml:Polygon";return u+=t?' srsName="'+t+'">':">",(e.length&&n(e[0])&&e[0].length&&n(e[0][0])?e:[e]).forEach((function(e,t){var r=a(e).map((function(e){return e[0]+(i?",":" ")+e[1]})),n=i?"outerBoundaryIs":"exterior",o=i?"innerBoundaryIs":"interior";u+=(t<1?"<gml:"+n+">":"<gml:"+o+">")+"<gml:LinearRing>"+(i?"<gml:coordinates>":"<gml:posList>")+r.join(" ")+(i?"</gml:coordinates>":"</gml:posList>")+"</gml:LinearRing>"+(t<1?"</gml:"+n+">":"</gml:"+o+">")})),u+="</gml:Polygon>"},s=function(e,t,r){var n=o(r),a="<gml:LineString";a+=t?' srsName="'+t+'">':">";var i=e.map((function(e){return e[0]+(n?",":" ")+e[1]}));return(a+=(n?"<gml:coordinates>":"<gml:posList>")+i.join(" ")+(n?"</gml:coordinates>":"</gml:posList>"))+"</gml:LineString>"};e.exports={closePolygon:a,pointElement:i,polygonElement:u,lineStringElement:s,processOGCGeometry:function(e,t){var r="",n=t.projection||"EPSG:4326";switch(t.type){case"Point":r+=i(t.coordinates,n,e);break;case"MultiPoint":r+='<gml:MultiPoint srsName="'+(t.projection||"EPSG:4326")+'">',t.coordinates.forEach((function(t){t&&(r+="<gml:pointMember>",r+=i(t,n,e),r+="</gml:pointMember>")})),r+="</gml:MultiPoint>";break;case"LineString":r+=s(t.coordinates,n,e);break;case"MultiLineString":var o="3.2"===e?"MultiCurve":"MultiLineString",a="3.2"===e?"curveMember":"lineStringMember";r+="<gml:".concat(o,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+a+">",r+=s(t,n,e),r+="</gml:"+a+">")})),r+="</gml:"+o+">";break;case"Polygon":r+=u(t.coordinates,n,e);break;case"MultiPolygon":var l="3.2"===e?"MultiSurface":"MultiPolygon",c="3.2"===e?"surfaceMembers":"polygonMember";r+="<gml:".concat(l,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+c+">",r+=u(t,n,e),r+="</gml:"+c+">")})),r+="</gml:"+l+">"}return r}}},67451:(e,t,r)=>{var n=r(86494),o=n.head,a=n.get,i=function(e){return/[<>&'"]/.test(e)?"<![CDATA[".concat(e,"]]>"):e},u=r(89223).processOGCGeometry,s={"1.0.0":"2.0","1.1.0":"3.1.1","2.0":"3.2","2.0.0":"3.2"},l=function(e){return a(e,"featureTypes[0].properties")},c=function(e,t){return o((l(t)||[]).filter((function(t){return t.name===e})))},f=function(e){return e.targetNamespace},p=function(e){return 0===e.type.indexOf("gml:")},d=function(e,t){return null==t||t&&!0===t.nillable||t&&!1===t.nillable&&null!=e},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geom,r=e.properties,n=arguments.length>1?arguments[1]:void 0;return d(p(n)?t:r[n.name],n)};e.exports={schemaLocation:f,isGeometryType:p,featureTypeSchema:function(e){return"xmlns:".concat(e.targetPrefix,'="').concat(f(e),'"')},getValue:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1.1.0",o=p(c(t,r));return o?e?u(n,{type:e.type,coordinates:e.coordinates}):"":null==e?"":"string"==typeof e?i(e):e},getPropertyDesciptor:c,findGeometryProperty:function(e){return o((l(e)||[]).filter((function(e){return 0===e.type.indexOf("gml:")})))},getFeatureTypeProperties:l,getTypeName:function(e){return e.targetPrefix?e.targetPrefix+":"+e.featureTypes[0].typeName:e.featureTypes[0].typeName},wfsToGmlVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.1.0";return s[e]},processOGCGeometry:u,isValid:function(e,t){return l(t).map((function(t){return g(e,t)}))},isValidProperty:g,isValidValueForPropertyName:function(e,t,r){return d(e,c(t,r))},isValidValue:d}},75866:(e,t,r)=>{"use strict";r.r(t),r.d(t,{registerType:()=>o,createLayer:()=>a,updateLayer:()=>i,removeLayer:()=>u,renderLayer:()=>s,isValid:()=>l,isSupported:()=>c,isCompatible:()=>f,default:()=>p});var n={},o=function(e,t){n[e]=t},a=function(e,t,r,o){var a=n[e];return a?a.create(t,r,o):null},i=function(e,t,r,o,a,i){var u=n[e];if(u&&u.update)return u.update(t,r,o,a,i);if(o&&t&&t.getSource()&&t.getSource().updateParams){var s=!1;o.params&&r.params?s=Object.keys(o.params).reduce((function(e,t){return r.params[t]!==o.params[t]||e}),!1):!o.params&&r.params&&(s=!0),s&&t.getSource().updateParams(r.params)}return null},u=function(e,t,r,o,a){var i=n[e];return i&&i.remove?i.remove(t,r,o,a):null},s=function(e,t,r,o,a){var i=n[e];return i&&i.render?i.render(t,r,o,a):null},l=function(e,t){var r=n[e];return!r||!r.isValid||r.isValid(t)},c=function(e){return!!n[e]},f=function(e,t){var r=n[e];return!r||!r.isCompatible||r.isCompatible(t)};const p={registerType:o,createLayer:a,updateLayer:i,removeLayer:u,renderLayer:s,isValid:l,isSupported:c,isCompatible:f}},19426:e=>{e.exports={name:"TJSExtension"}},76167:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Fn});var n=r(24852),o=r.n(n),a=r(71703),i=r(19426),u=r(77580),s=r.n(u),l=r(86494),c=r.n(l),f="TJS:LOADED_DATA",p="TJS:LOAD_ERROR",d="TJS:UPDATE_STYLE_TJS_BTN",g="TJS:GET_TJS_FRAMEWORK",m="TJS:GET_TJS_DATASETS",y="TJS:SET_DATASET_SELECTED",v="TJS:SET_LAYER_2_TJS",b="TJS:GET_SLD_LAYER",h="TJS:SET_SLD_SELECTED",O="TJS:SET_FILTER_VALUE",E="TJS:JOIN_LAYER_TJS",P="TJS:SET_FILTER_COLUMN",S="TJS:CLICK_TJS_BUTTON",_=function(e){return{type:p,error:e}},w=function(e){return{type:d,style:e}},x=function(){return{type:S}},T=function(e){return{type:g,id:e}},A=function(e){return{type:v,layer2TJSSelected:e}},j=function(e){return{type:E,id:e}},L=r(49977),R=r(7185),D=r.n(R),I=r(6607),M=(r(17850),{TEXT:"text/plain",HTML:"text/html",JSONP:"text/javascript",PROPERTIES:"application/json",JSON:"application/json",GML2:"application/vnd.ogc.gml",GML3:"application/vnd.ogc.gml/3.1.1",TEMPLATE:"application/json"}),C={"text/plain":"TEXT","text/html":"HTML","text/javascript":"JSONP","application/json":"JSON","application/vnd.ogc.gml":"GML2","application/vnd.ogc.gml/3.1.1":"GML3"},N=/^[\s\S]*<gml:featureMembers[^>]*>([\s\S]*)<\/gml:featureMembers>[\s\S]*$/i,F=/^[\s\S]*<body[^>]*>([\s\S]*)<\/body>[\s\S]*$/i;function k(e){if("string"==typeof e.response){var t=e.response.match(F);return e.layerMetadata&&e.layerMetadata.regex?t&&t[1]&&t[1].match(e.layerMetadata.regex):t&&t[1]&&t[1].trim().length>0}return!1}function U(e){if("string"==typeof e.response&&-1!==e.response.indexOf("<?xml")){var t=e.response.match(N);return t&&t[1]&&t[1].trim().length>0}return!1}var G={HTML:{getValidResponses:function(e){return e.filter(k)},getNoValidResponses:function(e){return e.filter((function(e){return!k(e)}))}},TEXT:{getValidResponses:function(e){return e.filter((function(e){return""!==e.response&&"string"==typeof e.response&&0!==e.response.indexOf("no features were found")&&"string"==typeof e.response&&0!==e.response.indexOf("<?xml")}))},getNoValidResponses:function(e){return e.filter((function(e){return""===e.response||"string"==typeof e.response&&0===e.response.indexOf("no features were found")||e.response&&"string"==typeof e.response&&0===e.response.indexOf("<?xml")}))}},JSON:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},PROPERTIES:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},GML3:{getValidResponses:function(e){return e.filter(U)},getNoValidResponses:function(e){return e.filter((function(e){return!U(e)}))}},TEMPLATE:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}}},B=r(57162),J=r.n(B),q=r(67522),W=r.n(q),V=r(67076),K=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=(0,l.isString)(t)&&(0,l.trim)(t.substring(r,t.length-n))||"";return(0,l.has)(e,o)};function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(u,e);var t,r,n,a,i=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(n);if(a){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return X(this,e)});function u(){var e;Y(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ee(Q(e=i.call.apply(i,[this].concat(r))),"getSourceCode",(function(){return{__html:e.props.html}})),e}return t=u,(r=[{key:"render",value:function(){return o().createElement("div",{id:this.props.id,dangerouslySetInnerHTML:this.getSourceCode()})}}])&&z(t.prototype,r),u}(o().Component);ee(te,"propTypes",{html:s().string,id:s().string});const re=te;function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?se(e):t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe=r(68195).FormattedMessage,pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(u,e);var t,r,n,a,i=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=le(n);if(a){var r=le(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ue(this,e)});function u(){var e;oe(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ce(se(e=i.call.apply(i,[this].concat(r))),"renderFormattedMsg",(function(e){var t=e.msgId,r=e.msgParams,n=e.children;return n&&"function"==typeof n?o().createElement(fe,{id:t,values:r},(function(e){return n(e)})):o().createElement(fe,{id:t,values:r})})),ce(se(e),"renderMsg",(function(e){var t=e.msgId,r=e.children;return r&&"function"==typeof r?r(t):o().createElement("span",null,t||"")})),e}return t=u,(r=[{key:"render",value:function(){return this.context.intl?this.renderFormattedMsg(this.props):this.renderMsg(this.props)}}])&&ae(t.prototype,r),u}(o().Component);ce(pe,"propTypes",{msgId:s().string.isRequired,msgParams:s().object}),ce(pe,"contextTypes",{intl:s().object});const de=pe;var ge=function(e){return new RegExp("<(.|\\n)*?>","g").test(e)};function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=["exclude","titleStyle","listStyle","componentStyle","title","feature"],_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(u,e);var t,r,n,a,i=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(n);if(a){var r=Ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return he(this,e)});function u(){var e;ye(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Pe(Oe(e=i.call.apply(i,[this].concat(r))),"getBodyItems",(function(){return Object.keys(e.props).filter(e.toExclude).map((function(t){var r=e.renderProperty(e.props[t]);return o().createElement("tr",{key:t,style:e.props.listStyle},o().createElement("td",null,t),o().createElement("td",null,ge(r)?o().createElement("span",{dangerouslySetInnerHTML:{__html:r}}):r))}))})),Pe(Oe(e),"renderHeader",(function(){return e.props.title?o().createElement("thead",{key:e.props.title,style:e.props.titleStyle,className:"ms-properties-viewer-title"},o().createElement("tr",null,o().createElement("th",{colSpan:"2"},e.props.title))):null})),Pe(Oe(e),"renderBody",(function(){var t=e.getBodyItems();return 0===t.length?null:o().createElement("tbody",{className:"ms-properties-viewer-body"},t)})),Pe(Oe(e),"renderProperty",(function(e){return(0,l.isString)(e)?e:JSON.stringify(e)})),Pe(Oe(e),"toExclude",(function(t){return-1===Se.concat(e.props.exclude).indexOf(t)})),e}return t=u,(r=[{key:"render",value:function(){return o().createElement("table",{className:"ms-properties-viewer",style:this.props.componentStyle},this.renderHeader(),this.renderBody())}}])&&ve(t.prototype,r),u}(o().Component);Pe(_e,"displayName","PropertiesViewer"),Pe(_e,"propTypes",{title:s().string,exclude:s().array,titleStyle:s().object,listStyle:s().object,componentStyle:s().object}),Pe(_e,"defaultProps",{exclude:[],titleStyle:{},listStyle:{},componentStyle:{}});const we=_e;function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Te={TEMPLATE:function(e){var t=e.layer,r=void 0===t?{}:t,n=e.response;return o().createElement("div",{className:"ms-template-viewer"},n.features.map((function(e,t){var n=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return""},i=(0,l.isString)(e)&&e.match(r),u=i&&i.map((function(e){var r=e.replace(/(<([^>]+)>)/gi,"");return{previous:e,next:K(t,r,n,o)?r:a(e)}}))||null;return u&&u.reduce((function(e,t){return e.replace(t.previous,t.next)}),e)||e||""}(r.featureInfo&&r.featureInfo.template||"",e,/\$\{.*?\}/g,2,1),a="";try{a=(0,l.template)(n)(e)}catch(e){return console.error(e),o().createElement("div",{key:t},o().createElement(de,{msgId:"layerProperties.templateError"}))}return o().createElement("div",{key:t},o().createElement(re,{html:a}))})))},PROPERTIES:function(e){var t=e.response,r=e.layer,n=e.rowViewer,a=r&&r.rowViewer||n||we;return o().createElement("div",{className:"mapstore-json-viewer"},((null==t?void 0:t.features)||[]).map((function(e,t){return o().createElement(a,xe({key:t,feature:e,title:e.id+"",exclude:["bbox"]},e.properties))})))}};function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(0,V.shouldUpdate)((function(e,t){return t.response!==e.response}))((function(e){var t=e.layer&&e.layer.featureInfo&&e.layer.featureInfo.format&&e.layer.featureInfo.template&&"<p><br></p>"!==e.layer.featureInfo.template&&e.layer.featureInfo.format||"PROPERTIES",r=Te[t]||Te.PROPERTIES;return o().createElement(r,e)}));var Me,Ce,Ne,Fe=/^[\s\S]*<body>([\s\S]*)<\/body>[\s\S]*$/i,ke=/(<style[\s\=\w\/\"]*>[^<]*<\/style>)/i;function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(u,e);var t,r,n,a,i=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ie(n);if(a){var r=Ie(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return De(this,e)});function u(){return je(this,u),i.apply(this,arguments)}return t=u,(r=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){var e=this.props.response||"",t=ke.exec(e),r=t&&2===t.length?ke.exec(e)[1]:"";r=r.replace(/body[,]+/g,"");var n=e.replace(Fe,"$1").trim();return o().createElement(re,{html:r+n})}}])&&Le(t.prototype,r),u}(o().Component),Ce="propTypes",Ne={response:s().string},Ce in Me?Object.defineProperty(Me,Ce,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):Me[Ce]=Ne,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(u,e);var t,r,n,a,i=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=We(n);if(a){var r=We(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return qe(this,e)});function u(){return Ge(this,u),i.apply(this,arguments)}return t=u,(r=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){return o().createElement("pre",null,this.props.response)}}])&&Be(t.prototype,r),u}(o().Component),"propTypes",{response:s().string});var Ve,Ke=r(17337),He=r.n(Ke),Ye=r(30048),ze=r.n(Ye),Ze=r(41537),Xe=r.n(Ze),Qe=r(84109),$e=r.n(Qe);function et(e){return function(e){if(Array.isArray(e))return tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var at=function(e,t,r,n,o){return nt({type:"vector",visibility:!0,name:e||"GetFeatureInfo",styleName:r||"marker",label:o,features:Ve.clickedPointToGeoJson(t)},n)},it={wfs:He(),wms:ze(),wmts:Xe(),vector:$e()};Ve={AVAILABLE_FORMAT:["TEXT","PROPERTIES","HTML","TEMPLATE"],getAvailableInfoFormatLabels:function(){return Object.keys(Ve.getAvailableInfoFormat())},getAvailableInfoFormat:function(){return Object.keys(M).filter((function(e){return-1!==Ve.AVAILABLE_FORMAT.indexOf(e)})).reduce((function(e,t){return e[t]=M[t],e}),{})},getDefaultInfoFormatValue:function(){return M[Ve.AVAILABLE_FORMAT[0]]},clickedPointToGeoJson:function(e){if(!e)return[];if("Feature"===e.type){var t=[J()(e)];return e&&e.geometry&&"Point"!==e.geometry.type&&t.push(e),t}return void 0===e.lng||void 0===e.lat?e.features||[]:[].concat(et(e.features||[]),[{id:"get-feature-info-point",type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]},style:[{iconUrl:W(),iconAnchor:[12,41],iconSize:[25,41]}]}])},services:it,getDefaultInfoFormatValueFromLayer:function(e,t){return e.featureInfo&&e.featureInfo.format&&M[e.featureInfo.format]||t.format||Ve.getDefaultInfoFormatValue()},getLayerFeatureInfoViewer:function(e){return e.featureInfo&&e.featureInfo.viewer?e.featureInfo.viewer:{}},getLayerFeatureInfo:function(e){return e&&e.featureInfo&&nt({},e.featureInfo)||{}},VIEWERS:{}};var ut=r(36515),st=r(24272),lt=r.n(st),ct=r(68592),ft=r.n(ct),pt={iconUrl:lt(),shadowUrl:ft(),iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},dt=r(89735),gt=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},mt=(0,I.P1)([gt],(function(e){return e&&e.projection})),yt=((0,I.P1)([function(e){return(0,l.get)(gt(e),"resolutions")},mt],(function(e,t){if(e&&t){var r=dt.default.getUnits(t);return e.map((function(e){return 3779.527559055118*e*("degrees"===r?111194.87428468118:1)}))}return[]})),function(e){return e.localConfig}),vt=r(59154),bt=r(59766);function ht(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Et=function(e){return e.context&&e.context.currentContext},Pt=(0,I.P1)((function(){return(0,l.get)(vt.default.getConfigProp("plugins"),"desktop")}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{desktop:[].concat(ht(e),["Context"])}})),St=(0,I.P1)((function(e){return(0,l.get)(Et(e),"plugins")}),(function(e){return(0,l.get)(Et(e),"userPlugins")}),(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&{desktop:[].concat(ht((0,l.get)(e,"desktop",[])),ht(t.filter((function(e){return e.active}))))}})),_t=((0,I.P1)(Et,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.templates})),function(e){return function(e){return(0,l.get)(e,"context.loading")}(e)?function(e){return Pt(e)}(e):St(e)||Pt(e)}),wt=function(e){return(0,I.P1)(Et,_t,(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t||(0,l.findIndex)((0,l.get)(r,"desktop",[]),(function(t){return t.name===e}))>-1}))},xt=((0,I.P1)((function(e){return(0,bt.bh)(e,function(e){return(yt(e)||{}).monitorState}(e))}),(function(e){return JSON.stringify(e)})),function(e){return e.locale&&e.locale.current||"en-US"}),Tt=((0,I.P1)([xt],(function(e){return(0,l.head)(e.split("-"))})),function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"});function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rt=(0,I.P1)((function(e){return"cesium"===Tt(e)}),(function(e){var t;return!(null==e||null===(t=e.mapInfo)||void 0===t||!t.showInMapPopup)}),(function(e,t){return!e&&t})),Dt=((0,I.P1)((function(e){return(0,l.get)(e,"mapInfo.requests")||[]}),wt("Identify"),Rt,(function(e,t,r){return!r&&!!e&&e.length>0&&t})),function(e){return(0,l.get)(e,"mapInfo.configuration.infoFormat","text/plain")}),It=function(e){return e&&e.mapInfo&&e.mapInfo.clickPoint},Mt=((0,I.P1)((function(e){return!function(e){return(0,l.get)(e,"mapInfo.enabled",!1)}(e)}),(function(e){return(0,l.get)(e,"controls.measure.enabled")&&((0,l.get)(e,"measurement.lineMeasureEnabled")||(0,l.get)(e,"measurement.areaMeasureEnabled")||(0,l.get)(e,"measurement.bearingMeasureEnabled"))}),(function(e){var t=(0,l.get)(e,"draw.drawStatus",!1);return t&&"clean"!==t&&"stop"!==t}),(function(e){return(0,l.get)(e,"annotations.editing")}),wt("Identify"),(function(e,t,r,n,o){return e||!!t||r||!!n||!o})),(0,I.zB)({format:Dt,map:gt,point:It,currentLocale:xt,maxItems:function(e){return(0,l.get)(e,"mapInfo.configuration.maxItems")}}),function(e){return e.mapInfo&&e.mapInfo.responses||[]}),Ct=((0,I.P1)((function(e){var t;return(null==e||null===(t=e.mapInfo)||void 0===t?void 0:t.requests)||[]}),Mt,Dt,(function(e,t,r){var n=function(e){var t={getValidResponses:function(e){return e},getNoValidResponses:function(){return[]}};return{getValidResponses:function(r){return r.reduce((function(r,n){if(n){var o;n.queryParams&&n.queryParams.hasOwnProperty("info_format")&&(o=n.queryParams.info_format),n.queryParams&&n.queryParams.hasOwnProperty("outputFormat")&&(o=n.queryParams.outputFormat);var a=(G[n.format||C[o]||C[e]]||t).getValidResponses([n]);return[].concat(et(r),et(a))}return et(r)}),[])},getNoValidResponses:function(r){return r.reduce((function(r,n){if(n){var o;n.queryParams&&n.queryParams.hasOwnProperty("info_format")&&(o=n.queryParams.info_format),n.queryParams&&n.queryParams.hasOwnProperty("outputFormat")&&(o=n.queryParams.outputFormat);var a=(G[n.format||C[o]||C[e]]||t).getNoValidResponses([n]);return[].concat(et(r),et(a))}return et(r)}),[])}}}(r);return e.length===t.length&&n.getValidResponses(t)})),(0,I.P1)(Mt,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.mapInfo&&e.mapInfo.index}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]}))),Nt=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.style||t.geometry&&("Point"===t.geometry.type||"MultiPoint"===t.geometry.type)?e:(0,l.omit)(e,"radius")}},Ft=function(e){return function(t){return jt(jt({},t),{},{style:Nt(e)(t)})}},kt=(0,I.P1)(It,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.mapInfo&&e.mapInfo.highlight}),(function(e){var t=Ct(e)||{};return(0,l.get)(t,"layerMetadata.features")}),(function(e){var t=Ct(e)||{};return(0,l.get)(t,"layerMetadata.featuresCrs")}),(function(e){return e&&e.mapInfo&&e.mapInfo.showMarker}),(function(e){return(0,l.get)(e,"mapInfo.highlightStyle",{color:"#3388ff",weight:4,radius:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2})}),(function(e,t,r,n,o,a){return o&&e?t?jt(jt({},e),{},{featuresCrs:n,features:r&&(0,l.isArray)(r)&&r.map(Ft(a))}):e:void 0}));function Ut(e){return function(e){if(Array.isArray(e))return Gt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(72500),r(86494).isObject;var Bt=r(68195).addLocaleData,Jt=r(83836),qt=r(61017),Wt=r(67249),Vt=r(37179),Kt=r(2082),Ht=r(84425),Yt=r(41146),zt=r(96864),Zt=r(39118),Xt=r(83416),Qt=r(75784);Bt([].concat(Ut(Jt),Ut(qt),Ut(Wt),Ut(Vt),Ut(Kt),Ut(Ht),Ut(Yt),Ut(zt),Ut(Zt),Ut(Xt),Ut(Qt)));var $t,er={it:{code:"it-IT",description:"Italiano"},en:{code:"en-US",description:"English"},fr:{code:"fr-FR",description:"Français"},de:{code:"de-DE",description:"Deutsch"},es:{code:"es-ES",description:"Español"},zh:{code:"zh-ZH",description:"中文"},nl:{code:"nl-NL",description:"Nederlands"},hr:{code:"hr-HR",description:"Hrvatski"},pt:{code:"pt-PT",description:"Português"},vi:{code:"vi-VN",description:"tiếng Việt"},fi:{code:"fi-FI",description:"Suomi"}};function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$t={getLocale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(er)[0],r=er.en?{key:"en",locale:er.en}:{key:t,locale:er[t]},n=er[$t.normalizeLocaleCode(e.locale||(navigator?navigator.language||navigator.browserLanguage:r.key))];return n?n.code:r.locale.code},normalizeLocaleCode:function(e){var t;if(null==e)t=void 0;else{var r=/^[a-z]+/i.exec(e);t=r&&r.length>0?r[0].toLowerCase():void 0}return t}};var or=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=e.config;return t&&(0,l.isArray)(t)?t:t&&t.flat||r&&r.layers||[]},ar=function(e,t){return(0,l.head)(or(e).filter((function(e){return e.id===t})))},ir=((0,I.P1)([or,kt,function(e){return e.search&&e.search},function(e){return(0,l.get)(e,"mapInfo.centerToMarker","")},function(e){return(0,l.get)(e,"additionallayers",[])},function(e){return e.annotations&&e.annotations.showMarker&&e.annotations.clickPoint}],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=o.filter((function(e){return"override"===e.actionType})),u=o.filter((function(e){return"overlay"===e.actionType})).map((function(e){return e.options})),s=e.map((function(e){var t=((0,l.head)(i.filter((function(t){return t.id===e.id})))||{}).options;return t?rr(rr({},e),t):rr({},e)}));if(s=s.concat(u),t){s.push(at("GetFeatureInfoHighLight",{features:t.features},void 0,{overrideOLStyle:!0,featuresCrs:t.featuresCrs,style:rr(rr({},pt),{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2})}));var c="enabled"===n?(0,dt.getNormalizedLatLon)(t.latlng):t.latlng;s.push(at("GetFeatureInfo",c))}if(a){var f="enabled"===n?(0,dt.getNormalizedLatLon)(a.latlng):a.latlng;s.push(at("Annotations",f)),s.push(at("GetFeatureInfo",rr({},f)))}if(r&&r.markerPosition){var p=(0,l.isObject)(r.style)&&r.style||{};s.push(at("GeoCoder",r.markerPosition,"marker",{overrideOLStyle:!0,style:rr(rr({},pt),p)},r.markerLabel))}return s})),function(e){return e.layers&&e.layers.flat&&e.layers.groups&&(0,ut.denormalizeGroups)(e.layers.flat,e.layers.groups).groups||[]}),ur=r(10306),sr=r.n(ur),lr=r(59154),cr=r(72500),fr=r(51312),pr=r(28642),dr={},gr=function(e){var t=cr.parse(e,!0);return cr.format(fr({},t,{search:null},{query:fr({service:"TJS",version:"1.0.0",request:"GetCapabilities"},t.query)}))};const mr=function(e){var t=dr[e];if(t&&(new Date).getTime()<t.timestamp+1e3*(lr.getConfigProp("cacheExpire")||60))return new Promise((function(e){e(t.response).then((function(e){return e}))}));var r=cr.parse(e,!0);return new Promise((function(t){t((0,ur.get)(gr(r)).then((function(t){if(200===t.status&&["No service: ( TJS )","Service tjs is disabled"].some((function(e){return t.data.includes(e)})))throw new Error(t.data,"utils/TJS",37);return dr[e]={timestamp:(new Date).getTime(),response:t},t})).catch((function(e){throw e})))}))},yr=function(e){var t=cr.parse(e,!0),r=cr.format(fr({},t,{query:fr({request:"DescribeFrameworks"},t.query)}));return new Promise((function(e){e((0,ur.get)(gr(r)).then((function(e){var t;return pr.parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t})).catch((function(e){throw new Error(e,"utils/TJS",68)})))}))},vr=function(e,t){var r=cr.parse(e,!0),n=cr.format(fr({},r,{query:fr({FrameworkURI:t,request:"DescribeDatasets"},r.query)}));return new Promise((function(e){e((0,ur.get)(gr(n)).then((function(e){var t;return pr.parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t})).catch((function(e){throw new Error(e,"utils/TJS",95)})))}))},br=function(e,t,r){var n=cr.parse(e,!0),o=cr.format(fr({},n,{query:fr({DatasetURI:r,FrameworkURI:t,request:"DescribeData"},n.query)}));return new Promise((function(e){e((0,ur.get)(gr(o)).then((function(e){var t;return pr.parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t})).catch((function(e){throw new Error(e,"utils/TJS",123)})))}))},hr=function(e,t,r,n){var o=cr.parse(e,!0),a=cr.format(fr({},o,{query:fr({DatasetURI:r,FrameworkURI:t,attributes:n,request:"GetData"},o.query)}));return new Promise((function(e){e((0,ur.get)(gr(a)).then((function(e){var t;return pr.parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t})).catch((function(e){throw new Error(e,"utils/TJS",153)})))}))},Or=function(e,t,r,n,o,a){var i='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>        <JoinData service="TJS" version="1.0" language="en-CA" xmlns="http://www.opengis.net/tjs/1.0"                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"                    xsi:schemaLocation="http://www.opengis.net/tjs/1.0  http://schemas.opengis.net/tjs/1.0/tjsJoinData_request.xsd">            <AttributeData>                <GetDataURL>                    __GETDATA__                </GetDataURL>            </AttributeData>            __MAPSTYLE__        </JoinData>    ',u="<MapStyling>            <StylingIdentifier>SLD</StylingIdentifier>            <StylingURL>__STYLE__</StylingURL>        </MapStyling>    ";try{e=(e=new URL(e)).href}catch(t){e=window.location.origin+e}var s=cr.parse(e,!0),l=cr.format(fr({},s,{query:fr({service:"TJS",DatasetURI:r,FrameworkURI:t,attributes:n.join(","),request:"GetData"},o.FilterColumn?{FilterColumn:o.FilterColumn}:{},o.FilterValue?{FilterValue:o.FilterValue}:{},s.query)}));return l=l.replace(/&/g,"&amp;"),i=i.replace(/__GETDATA__/g,l),u=a?u.replace(/__STYLE__/g,a):"",i=i.replace(/__MAPSTYLE__/g,u),new Promise((function(t){t((0,ur.post)(e,i,{headers:{"Content-Type":"application/xml"}}).then((function(e){var t;if(pr.parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t["ows:ExceptionReport"])throw new Error(JSON.stringify(t),"utils/TJS",215);return t})).catch((function(e){throw new Error(e,"utils/TJS",215)})))}))};var Er=r(83358),Pr=r(72500),Sr=r.n(Pr),_r=r(51312),wr=r.n(_r),xr=r(2817),Tr=r.n(xr),Ar=function(e,t){var n=Sr().parse(e,!0),o=Sr().format(wr()({},n,{query:wr()({service:"WMS",version:"1.1.1",request:"GetCapabilities"},n.query)}));return new Promise((function(e){Promise.all([r.e(985),r.e(226)]).then(function(){var n=r(71857).unmarshaller;e(sr().get(function(e){var t=(c().isArray(e)&&e||e.split(","))[0],r=Sr().parse(t,!0);return Sr().format(wr()({},r,{search:null},{query:wr()({service:"WMS",version:"1.3.0",request:"GetCapabilities"},r.query)}))}(o)).then((function(e){var r;if(t)return Tr().parseString(e.data,{explicitArray:!1},(function(e,t){r=t})),r;var o=n.unmarshalString(e.data);return o&&o.value})))}.bind(null,r)).catch(r.oe)}))},jr=r(51312),Lr=r(6149),Rr=Lr.ADD_LAYER,Dr=Lr.REMOVE_NODE,Ir=Lr.changeLayerProperties,Mr=Lr.SELECT_NODE,Cr=Lr.addLayer,Nr=Lr.addGroup,Fr=Lr.moveNode,kr=Lr.LAYER_LOAD,Ur=r(39583).MAP_CONFIG_LOADED,Gr=r(86494),Br=Gr.find,Jr=Gr.get,qr=Gr.set,Wr=Gr.uniq,Vr=Gr.isArray,Kr=Gr.cloneDeep,Hr=Gr.findIndex,Yr=function(e){var t=document.querySelector("#tjsCFG");if(t){var r=t.getAttribute(e);return["true","false"].indexOf(r.toLowerCase())>-1&&(r=!!JSON.parse(String(r).toLowerCase())),r}return null},zr=function(e,t,r){return console.log(t+" Getcapabilities doesn t succeed"),console.log(e),Yr("verbose")&&console.groupEnd(),r};const Zr={onAddLayerFindTJSFramework:function(e,t){return e.ofType(Rr).switchMap((function(r){return e.ofType(kr).take(1).switchMap((function(e){var n=ar(t.getState(),r.layer.id);return Yr("verbose")&&(console.group("| TJSPlugin | onAddLayerFindTJSFramework"),console.log("init layer state ->"),console.dir(Kr(n))),n&&n.url&&n.type&&["wms","wfs"].indexOf(n.type)>-1?(Yr("verbose")&&(console.log("Trigger - getTJSFramework"),console.groupEnd()),L.Observable.of(T(n.id))):L.Observable.empty()}))}))},onGetTJSFramework:function(e,t){return e.ofType(g).mergeMap((function(e){var r=ar(t.getState(),e.id);Yr("verbose")&&(console.group("| TJSPlugin | onGetTJSFramework"),console.log("init layer state ->"),console.log(Kr(r)));var n=r.url.replace(/wfs|wms/g,"tjs");return L.Observable.defer((function(){return mr(n)})).switchMap((function(t){Yr("verbose")&&console.group("describeFrameworks TJS and describeFeatureType WFS");var o=[yr(n),(0,Er.describeFeatureType)(r.url,r.name)];return L.Observable.defer((function(){return D().all(o)})).switchMap((function(t){var o={layerName:t[1].featureTypes[0].typeName,layerWorkspace:t[1].targetNamespace,url:n};if(t[0].FrameworkDescriptions&&t[0].FrameworkDescriptions.Framework)if(Array.isArray(t[0].FrameworkDescriptions.Framework))t[0].FrameworkDescriptions.Framework.forEach((function(e){e.FrameworkURI&&e.FrameworkURI===o.layerWorkspace+"/"+o.layerName&&(o.FrameworkURI=e.FrameworkURI,o.FrameworkKey=e.FrameworkKey.Column.$.name)}));else{var a=t[0].FrameworkDescriptions.Framework;a.FrameworkURI&&a.FrameworkURI===o.layerWorkspace+"/"+o.layerName&&(o.FrameworkURI=a.FrameworkURI,o.FrameworkKey=a.FrameworkKey.Column.$.name)}var i,u=[];return o.FrameworkURI?(o.sld={loading:!0},u.push(Ir(e.id,{extendedParams:r.extendedParams?jr(r.extendedParams,{tjsManagement:o}):{tjsManagement:o}})),r.dimensions&&void 0===Br(r.dimensions,{name:"tjs"})&&r.dimensions.push({name:"tjs",layerId:e.id}),u.push(Ir(e.id,{dimensions:r.dimensions?r.dimensions:[{name:"tjs",layerId:e.id}]})),u.push((i=e.id,{type:m,id:i})),u.push(function(e){return{type:b,id:e}}(e.id)),Yr("verbose")&&(console.log("new layer properties ->"),console.dir(o),console.dir(r.dimensions?r.dimensions:[{name:"tjs",layerId:e.id}]),console.log("Trigger changeLayerProperties, getTJSDatasets, getSLDLayer"),console.groupEnd(),console.groupEnd()),L.Observable.from(u)):(console.log("No framework founded -> no tjs management for the layer"),Yr("verbose")&&(console.groupEnd(),console.groupEnd()),r.extendedParams&&r.extendedParams.tjsManagement&&u.push(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:void 0})})),u.push(Ir(e.id,{dimensions:r.dimensions?r.dimensions.filter((function(e){return"tjs"!=e.name})):[]})),L.Observable.from(u))})).catch((function(t){return console.log("One request doesn t succeed describeFrameworks or describeFeatureType WFS"),console.log(t),Yr("verbose")&&(console.groupEnd(),console.groupEnd()),r.extendedParams&&r.extendedParams.tjsManagement?L.Observable.of(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:void 0}),dimensions:r.dimensions?r.dimensions.filter((function(e){return"tjs"!=e.name})):[]})):L.Observable.empty()}))})).catch((function(t){var n=[];return r.extendedParams&&r.extendedParams.tjsManagement&&n.push(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:void 0}),dimensions:r.dimensions?r.dimensions.filter((function(e){return"tjs"!=e.name})):[]})),L.Observable.from(zr(t,"TJS",n))}))}))},onGetTJSDatasets:function(e,t){return e.ofType(m).switchMap((function(e){var r=ar(t.getState(),e.id);Yr("verbose")&&(console.group("| TJSPlugin | onGetTJSDatasets"),console.log("init layer state ->"),console.log(Kr(r)));var n=r.extendedParams&&r.extendedParams.tjsManagement;return n&&n.FrameworkURI&&n.url?L.Observable.defer((function(){return mr(n.url)})).switchMap((function(t){if(t.error)throw t.error;return Yr("verbose")&&console.group("describeDatasets TJS"),L.Observable.defer((function(){return vr(n.url,n.FrameworkURI)})).switchMap((function(t){if(t&&t.DatasetDescriptions&&t.DatasetDescriptions.Framework&&t.DatasetDescriptions.Framework.Dataset){var o={list:[]};return Vr(t.DatasetDescriptions.Framework.Dataset)?t.DatasetDescriptions.Framework.Dataset.forEach((function(e){e.DatasetURI.includes("DatasetURI")||o.list.push({title:e.Title,DatasetURI:e.DatasetURI,Documentation:e.Documentation})})):t.DatasetDescriptions.Framework.Dataset.DatasetURI.includes("DatasetURI")||o.list.push({title:t.DatasetDescriptions.Framework.Dataset.Title,DatasetURI:t.DatasetDescriptions.Framework.Dataset.DatasetURI,Documentation:t.DatasetDescriptions.Framework.Dataset.Documentation}),n.datasets=o,Yr("verbose")&&(console.log("new layer properties ->"),console.dir(n),console.groupEnd(),console.groupEnd()),L.Observable.of(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))}return console.log("TJS describeDatasets doesn t succeed"),console.log(t),Yr("verbose")&&(console.groupEnd(),console.groupEnd()),n.datasets?(delete n.datasets,L.Observable.of(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))):L.Observable.empty()})).catch((function(t){console.log("TJS describeDatasets doesn t succeed"),console.log(t),Yr("verbose")&&(console.groupEnd(),console.groupEnd());var o=[_(t.message)];return n.datasets&&(delete n.datasets,o.push(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))),L.Observable.from(o)}))})).catch((function(e){return L.Observable.from(zr(e,"TJS",[_(e.message)]))})):(Yr("verbose")&&console.groupEnd(),L.Observable.empty())}))},onSelectLayerDisplayTJSButton:function(e,t){return e.ofType(Mr).switchMap((function(e){var r=t.getState(),n=function(e){return function(e){return e.layers&&e.layers.selected||[]}(e).map((function(t){return(0,l.find)(or(e),{id:t})}))}(r);if(1===n.length&&n[0]){var o=ar(r,n[0].id);if(Yr("verbose")&&(console.group("| TJSPlugin | onSelectLayerDisplayTJSButton"),console.log("init layer state ->"),console.dir(Kr(o)),console.groupEnd()),o.extendedParams&&o.extendedParams.tjsManagement)return L.Observable.from([A(o),w({display:"block"})])}return L.Observable.from([A(null),w({display:"none"})])}))},onSelectTJSDataset:function(e,t){return e.ofType(y).switchMap((function(e){var r=ar(t.getState(),e.layerId);Yr("verbose")&&(console.group("| TJSPlugin | onSelectTJSDataset"),console.log("init layer state ->"),console.dir(Kr(r)));var n=r.extendedParams&&r.extendedParams.tjsManagement;if(n&&n.FrameworkURI&&n.url&&e.datasetURI&&n.datasets&&n.datasets.list){var o=Br(n.datasets.list,{DatasetURI:e.datasetURI});return o?(n.datasets.selected=o,L.Observable.defer((function(){return mr(n.url)})).switchMap((function(t){if(t.error)throw t.error;return L.Observable.defer((function(){return br(n.url,n.FrameworkURI,e.datasetURI)})).switchMap((function(t){if(Yr("verbose")&&console.group("describeData TJS"),!(t&&t.DataDescriptions&&t.DataDescriptions.Framework&&t.DataDescriptions.Framework.Dataset&&t.DataDescriptions.Framework.Dataset.Columnset&&t.DataDescriptions.Framework.Dataset.Columnset.Attributes&&t.DataDescriptions.Framework.Dataset.Columnset.Attributes.Column))return alert("Cannot find attributes in the request describeData\n"+JSON.stringify(t)),console.log(t),Yr("verbose")&&(console.groupEnd(),console.groupEnd()),n.datasets.selected.attributes&&(n.datasets.selected.attributes=void 0),L.Observable.of(Ir(e.layerId,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}));var o={list:[]};try{return n.datasets.selected.attributes=void 0,t.DataDescriptions.Framework.Dataset.Columnset.Attributes.Column.forEach((function(e){e.$.name!=n.FrameworkKey&&o.list.push({name:e.$.name,title:""==e.Title?e.$.name:e.Title})})),o.list.length>0&&(n.datasets.selected.attributes=o),Yr("verbose")&&(console.log("new layer properties ->"),console.dir(Kr(n)),console.groupEnd(),console.groupEnd()),L.Observable.of(Ir(e.layerId,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))}catch(t){return console.log("Cannot access to attributes of the datasets"),console.log(t),Yr("verbose")&&(console.groupEnd(),console.groupEnd()),n.datasets.selected.attributes&&(n.datasets.selected.attributes=void 0),L.Observable.of(Ir(e.layerId,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))}})).catch((function(t){return alert("DescribeData TJS doesn t succeed\n"+t.message),console.log(t),Yr("verbose")&&console.groupEnd(),n.datasets.selected.attributes&&(n.datasets.selected.attributes=void 0),L.Observable.of(Ir(e.layerId,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))}))})).catch((function(e){return L.Observable.from(zr(e,"TJS",[]))}))):(alert("Dataset not found in the list:\n"+n.datasets.list.map((function(e){return e+"\n"})).join("- ")),Yr("verbose")&&console.groupEnd(),L.Observable.empty())}return Yr("verbose")&&console.groupEnd(),L.Observable.empty()}))},onGetSLDLayer:function(e,t){return e.ofType(b).switchMap((function(e){var r=t.getState(),n=ar(r,e.id);Yr("verbose")&&(console.group("| TJSPlugin | onGetSLDLayer"),console.log("init layer state ->"),console.dir(Kr(n)));var o=n.extendedParams&&n.extendedParams.tjsManagement;if(o&&o.url){var a=o.url.replace("tjs","wms");return L.Observable.defer((function(){return Ar(a)})).switchMap((function(t){if(Yr("verbose")&&console.group("analyze style on wms capabilities"),t&&t.capability&&t.capability.layer&&t.capability.layer.layer){var r=Br(t.capability.layer.layer,{name:n.name}),a={list:[{title:"Style par défaut",name:"default"}]};return r&&r.style&&r.style.forEach((function(e){a.list.push({name:e.name,title:e.title})})),Yr("verbose")&&(console.log("new layer properties ->"),console.dir(o),console.groupEnd(),console.groupEnd()),o.sld=a,L.Observable.of(Ir(e.id,{extendedParams:jr(n.extendedParams,{tjsManagement:o})}))}return console.log("WMS get capabilities to find style doesn t succeed"),console.log(t),Yr("verbose")&&(console.groupEnd(),console.groupEnd()),o.sld?(delete o.sld,L.Observable.of(Ir(e.id,{extendedParams:jr(n.extendedParams,{tjsManagement:o})}))):L.Observable.empty()})).catch((function(t){var r=[];return o.sld&&(delete o.sld,r.push(Ir(e.id,{extendedParams:jr(n.extendedParams,{tjsManagement:o})}))),L.Observable.from(zr(t,"WMS",r))}))}return Yr("verbose")&&console.groupEnd(),L.Observable.empty()}))},onSelectSLDLayer:function(e,t){return e.ofType(h).switchMap((function(e){var r=ar(t.getState(),e.layerId);Yr("verbose")&&(console.group("| TJSPlugin | onSelectSLDLayer"),console.log("init layer state ->"),console.log(Kr(r)));var n=r.extendedParams&&r.extendedParams.tjsManagement;if(n&&n.sld&&n.sld.list){Yr("verbose")&&console.group("select sld style");var o=Br(n.sld.list,{name:e.sldName});return o?(n.sld.selected=o,Yr("verbose")&&(console.log("new layer propertiers ->"),console.dir(Kr(n)),console.groupEnd(),console.groupEnd()),L.Observable.of(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))):(console.log("sld not found in the list"),L.Observable.empty())}return Yr("verbose")&&console.groupEnd(),L.Observable.empty()}))},onSelectFilterValue:function(e,t){return e.ofType(O).switchMap((function(e){var r=ar(t.getState(),e.layerId);Yr("verbose")&&(console.group("| TJSPlugin | onSelectFilterValue"),console.log("init layer state ->"),console.dir(Kr(r)));var n=r.extendedParams&&r.extendedParams.tjsManagement;return n&&n.datasets&&n.datasets.selected.attributes&&n.datasets.selected.attributes.filter&&n.datasets.selected.attributes.filter.filterList?(Yr("verbose")&&console.group("Value selection"),-1===n.datasets.selected.attributes.filter.filterList.indexOf(e.filterValue)?(console.log("value not found in the list"),L.Observable.empty()):(n.datasets.selected.attributes.filter?n.datasets.selected.attributes.filter.filterValue=e.filterValue:n.datasets.selected.attributes.filter={filterValue:e.filterValue},Yr("verbose")&&(console.log("new layer properties ->"),console.dir(Kr(n))),L.Observable.of(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:n})})))):(Yr("verbose")&&console.groupEnd(),L.Observable.empty())}))},onSelectFilterColumn:function(e,t){return e.ofType(P).switchMap((function(e){var r=ar(t.getState(),e.layerId);Yr("verbose")&&(console.group("| TJSPlugin | onSelectFilterColumn"),console.log("init layer state ->"),console.dir(Kr(r)));var n=r.extendedParams&&r.extendedParams.tjsManagement;if(n&&n.datasets&&n.datasets.selected.attributes&&n.datasets.selected.attributes.list){Yr("verbose")&&console.group("Filter Column selection");var o=Br(n.datasets.selected.attributes.list,{name:e.filterColumn});return o?(Yr("verbose")&&(console.log("new layer properties ->"),console.dir(Kr(n))),L.Observable.defer((function(){return mr(n.url)})).switchMap((function(t){if(t.error)throw t.error;return Yr("verbose")&&console.group("describeDatasets TJS"),L.Observable.defer((function(){return hr(n.url,n.FrameworkURI,n.datasets.selected.DatasetURI,o.name)})).switchMap((function(t){return t&&t.GDAS&&t.GDAS.Framework&&t.GDAS.Framework.Dataset&&t.GDAS.Framework.Dataset.Rowset&&t.GDAS.Framework.Dataset.Rowset.Row?(n.datasets.selected.attributes.filter={filterColumn:e.filterColumn,filterList:Wr(t.GDAS.Framework.Dataset.Rowset.Row.map((function(e){return e.V})))},Yr("verbose")&&(console.log("new layer properties ->"),console.dir(Kr(n)),console.groupEnd(),console.groupEnd()),L.Observable.of(Ir(e.id,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))):(alert("Cannot parse GDAS in the request getData\n"+JSON.stringify(t)),console.log(t),Yr("verbose")&&(console.groupEnd(),console.groupEnd()),n.datasets.selected.attributes.filter&&delete n.datasets.selected.attributes.filter,L.Observable.of(Ir(e.layerId,{extendedParams:jr(r.extendedParams,{tjsManagement:n})})))})).catch((function(t){return alert("GetData TJS doesn t succeed\n"+t.message),console.log(t),Yr("verbose")&&console.groupEnd(),n.datasets.selected.attributes.filter&&delete n.datasets.selected.attributes.filter,L.Observable.of(Ir(e.layerId,{extendedParams:jr(r.extendedParams,{tjsManagement:n})}))}))})).catch((function(e){return L.Observable.from(zr(e,"TJS",[]))}))):(Yr("verbose")&&console.log("Column not found in the list"),n.datasets.selected.attributes.filter&&delete n.datasets.selected.attributes.filter,L.Observable.of(Ir(e.layerId,{extendedParams:jr(r.extendedParams,{tjsManagement:n})})))}return Yr("verbose")&&console.groupEnd(),L.Observable.empty()}))},joinDataTJS:function(e,t){return e.ofType(E).switchMap((function(e){var r=t.getState(),n=ar(r,e.id);Yr("verbose")&&(console.group("| TJSPlugin | joinDataTJS"),console.log("init layer state ->"),console.log(Kr(n)),console.groupEnd());var o=n.extendedParams&&n.extendedParams.tjsManagement;if(!o)return L.Observable.empty();try{var a={},i=void 0;return o.datasets.selected.attributes.filter&&(a.FilterColumn=o.datasets.selected.attributes.filter.filterColumn,a.FilterValue=o.datasets.selected.attributes.filter.filterValue),o.sld.selected&&"default"!==o.sld.selected.name&&(i=o.sld.selected.name),L.Observable.defer((function(){return Or(o.url,o.FrameworkURI,o.datasets.selected.DatasetURI,o.datasets.selected.attributes.list.map((function(e){return e.name})),a,i)})).switchMap((function(e){if(e&&e.JoinDataResponse&&e.JoinDataResponse.JoinedOutputs&&e.JoinDataResponse.JoinedOutputs.Output){var t=Hr(e.JoinDataResponse.JoinedOutputs.Output,(function(e){return e.Mechanism.Identifier.toLowerCase()===n.type.toLowerCase()}));if(-1===t)return alert("Cannot find a join result for the service: "+n.type),L.Observable.empty();var u=e.JoinDataResponse.JoinedOutputs.Output[t];try{var s=Br(ir(r),{title:"Résultats TJS"});if(!s)return L.Observable.of(Nr("Résultats TJS",void 0,{id:"tjs_resultat",name:"tjs_resultat",title:"Résultats TJS",expanded:!0}),j(n.id));var l=Hr(u.Resource.Parameter,(function(e){return"domainName"===e.$.name})),c=Hr(u.Resource.Parameter,(function(e){return["typeName","layers"].indexOf(e.$.name)>-1})),f=Kr(n);f.url=u.Resource&&u.Resource.Parameter[l]._,f.name=u.Resource&&u.Resource.Parameter[c]._,f.dimensions=[],f.extendedParams.tjsManagement=void 0,f.singleTile=!0,Yr("removeJoinLayerProperties").split(",").forEach((function(e){qr(f,e,void 0)}));var p=void 0;if(o.datasets.selected.Documentation.indexOf("/geonetwork/srv")>-1){var d=new URLSearchParams(o.datasets.selected.Documentation).get("id");if(p=o.datasets.selected.Documentation,null===d){var g=p.indexOf("/geonetwork/srv"),m=p.slice(g);(m=m.split("/")).includes("api")&&m.includes("records")?d=m[m.indexOf("records")+1]:m.includes("metadata")&&(d=m[m.indexOf("metadata")+1]),p=p.slice(0,g)+"/geonetwork/srv/fre/csw?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+d}}return f.catalogURL&&(f.extendedParams.annexeCatalogURL=f.catalogURL,delete f.catalogURL),p&&(f.catalogURL=p),f.extendedParams.tjsJoinData={url:o.url,FrameworkURI:o.FrameworkURI,DatasetURI:o.datasets.selected.DatasetURI,attributes:o.datasets.selected.attributes.list.map((function(e){return e.name})),filter:a,style:i},f.title="[TJS] - "+f.title+(a.FilterValue?" - "+a.FilterValue:""),f.id=f.name+"_TJS"+s.nodes.length+1,L.Observable.from([Cr(f),Fr(f.id,s.id,s.nodes.length)])}catch(e){return alert("Cannot parse the join result to create a new layer.\n"+e.message),L.Observable.empty()}}return alert("Cannot parse JoinOutput - TJS join not done"),console.log(e),L.Observable.empty()})).catch((function(e){return alert(e),console.log(e),L.Observable.empty()}))}catch(e){return alert(e),L.Observable.empty()}}))},prepareTJSOnMapLoaded:function(e,t){return e.ofType(Ur).switchMap((function(e){var r=t.getState();Yr("verbose")&&(console.group("| TJSPlugin | prepareTJSOnMapLoaded"),console.log("init map state ->"),console.log(Kr(r)),console.groupEnd());var n=[];return or(r).forEach((function(e){try{e.extendedParams&&e.extendedParams.tjsJoinData?Or(e.extendedParams.tjsJoinData.url,e.extendedParams.tjsJoinData.FrameworkURI,e.extendedParams.tjsJoinData.DatasetURI,e.extendedParams.tjsJoinData.attributes,e.extendedParams.tjsJoinData.filter,e.extendedParams.tjsJoinData.style).then((function(e){Yr("verbose")&&(console.group("prepareTJSOnMapLoaded - Promise result JoinData"),console.log(e),console.groupEnd())})).catch((function(e){console.log("JoinData doesn t succeed"),console.log(e.message)})):e&&e.url&&e.type&&["wms","wfs"].indexOf(e.type)>-1&&n.push(T(e.id))}catch(t){console.log("Cannot update joinData of the layer "+e.name),console.log(t)}})),L.Observable.from(n)}))},onRemoveLayerFindParentSelected:function(e,t){return e.ofType(Dr).switchMap((function(e){var r=Jr(t.getState(),"tjsExtension.layer2TJSSelected");return"layers"===e.nodeType&&r&&r.id&&r.id===e.node?L.Observable.of(A(null)):L.Observable.empty()}))}};var Xr=r(51312),Qr=r(75232),$r=r.n(Qr),en=r(56394),tn=r.n(en);function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(r),!0).forEach((function(t){pn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ln(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?cn(e):t}function cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(u,e);var t,r,n,a,i=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fn(n);if(a){var r=fn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ln(this,e)});function u(){var e;an(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pn(cn(e=i.call.apply(i,[this].concat(r))),"renderLoading",(function(){return e.props.maskLoading?o().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},o().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},o().createElement(de,{msgId:"loading"}),o().createElement(tn(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),pn(cn(e),"renderRole",(function(t){return o().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),pn(cn(e),"hasRole",(function(t){return o().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),pn(cn(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=u,(r=[{key:"render",value:function(){var e=this,t=o().createElement("div",{id:this.props.id,style:on({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},o().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),o().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?o().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):o().createElement("span",null)),r=this.props.draggable?o().createElement($r(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=wr()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?o().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&un(t.prototype,r),u}(o().Component);pn(dn,"propTypes",{id:s().string.isRequired,style:s().object,backgroundStyle:s().object,className:s().string,maskLoading:s().bool,containerClassName:s().string,headerClassName:s().string,bodyClassName:s().string,footerClassName:s().string,onClickOut:s().func,modal:s().bool,start:s().object,draggable:s().bool,bounds:s().oneOfType([s().string,s().object])}),pn(dn,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const gn=dn;var mn=r(7066);function yn(){return(yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const vn=(bn=mn.OverlayTrigger,function(e){return o().createElement(bn,yn({},e,{container:document.querySelector("."+(vt.default.getConfigProp("themePrefix")||"ms2")+" > div")||document.body}))});var bn;function hn(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const On=(0,V.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tooltip,r=e.tooltipId;return t||r}),(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.tooltip,n=t.tooltipId,a=t.tooltipPosition,i=void 0===a?"top":a,u=t.tooltipTrigger,s=t.keyProp,l=t.idDropDown,c=t.args,f=hn(t,["tooltip","tooltipId","tooltipPosition","tooltipTrigger","keyProp","idDropDown","args"]);return o().createElement(vn,{trigger:u,id:l,key:s,placement:i,overlay:o().createElement(mn.Tooltip,{id:"tooltip-"+s},n?o().createElement(de,{msgId:n,msgParams:{data:c}}):r)},o().createElement(e,f))}}),(function(e){return function(t){return o().createElement(e,(0,l.omit)(t,["tooltipId","tooltip"]),t.children)}}));function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?xn(e):t}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jn=r(7066),Ln=jn.Glyphicon,Rn=jn.Button,Dn=jn.Checkbox,In=On(Rn),Mn=r(50099).DropdownList;r(42111);var Cn=(0,I.P1)((function(e){return(0,l.get)(e,"tjsExtension.style")}),(function(e){return(0,l.get)(e,"tjsExtension.layer2TJSSelected")}),(function(e){return(0,l.get)(e,"tjsExtension.datasetsModal")}),or,(function(e,t,r,n){return{style:e,layer2TJSSelected:t,datasetsModal:r,layers:n.filter((function(e){return e.extendedParams&&e.extendedParams.tjsManagement}))}})),Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(u,e);var t,r,n,a,i=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tn(n);if(a){var r=Tn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return wn(this,e)});function u(){var e;Pn(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return An(xn(e=i.call.apply(i,[this].concat(r))),"state",{filterEnabled:!1}),e}return t=u,(r=[{key:"render",value:function(){var e=this;return o().createElement("div",{className:"ms2"},o().createElement("div",{id:"tjsCFG",style:{display:"none"},removeJoinLayerProperties:this.props.removeJoinLayerProperties.toString(),verbose:this.props.verbose.toString()}),this.props.layer2TJSSelected?o().createElement("div",null,o().createElement(gn,{id:"mapstore-tjs-extension",style:{display:this.props.datasetsModal?"block":"none"},draggable:!1,modal:!1},o().createElement("span",{role:"header"},o().createElement("span",{className:"about-panel-title"},o().createElement(de,{msgId:"tjsManager.titleModal"})),o().createElement("button",{onClick:function(){return e.props.onClickClosemodal()},className:"settings-panel-close close"},this.props.closeGlyph?o().createElement(Ln,{glyph:this.props.closeGlyph}):o().createElement("span",null,"×"))),o().createElement("div",{role:"body"},o().createElement("div",{style:{fontWeight:"bold"}},o().createElement(de,{msgId:"tjsManager.datasetsList"})),this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.list?o().createElement(Mn,{placeholder:o().createElement(de,{msgId:"tjsManager.datasetsSelection"}),value:this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected&&(0,l.find)(this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets,{DatasetURI:this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.DatasetURI}).title,onChange:function(t){e.props.onSelectDataset(e.props.layer2TJSSelected.id,t.DatasetURI)},data:this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.list,textField:"title",valueField:"DatasetURI"}):o().createElement("p",null,o().createElement(de,{msgId:"tjsManager.datasetsNotFound"})),this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected&&o().createElement("div",null,this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes?o().createElement("div",{className:"row"},o().createElement("div",{className:"col-xs-12"},o().createElement("div",{style:{fontWeight:"bold"}},o().createElement(de,{msgId:"tjsManager.sldList"})),this.props.layer2TJSSelected.extendedParams.tjsManagement.sld&&this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.list?o().createElement(Mn,{placeholder:o().createElement(de,{msgId:"tjsManager.sldSelection"}),value:this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.selected&&(0,l.find)(this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.list,{name:this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.selected.name}).title,onChange:function(t){e.props.onSelectSLD(e.props.layer2TJSSelected.id,t.name)},data:this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.list,textField:"title",valueField:"name"}):o().createElement("p",null,this.props.layer2TJSSelected.extendedParams.tjsManagement.sld&&this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.loading?o().createElement(de,{msgId:"tjsManager.sldIsLoading"}):o().createElement(de,{msgId:"tjsManager.sldNotFound"}))),o().createElement("div",{className:"col-xs-12"},o().createElement(Dn,{onChange:function(){e.state.filterEnabled&&e.props.onSelectFilterColumn(e.props.layer2TJSSelected.id,void 0),e.setState({filterEnabled:!e.state.filterEnabled})},checked:this.state.filterEnabled},o().createElement(de,{msgId:"tjsManager.filterEnabled"})))):o().createElement("p",null,o().createElement(de,{msgId:"tjsManager.dataattributesNotFound"})),this.state.filterEnabled&&this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.selected&&(0,l.find)(this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.list,{name:this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.selected.name})&&o().createElement("div",{className:"row"},o().createElement("div",{className:"col-xs-6"},o().createElement("div",{style:{fontWeight:"bold"}},o().createElement(de,{msgId:"tjsManager.filterColumnList"})),o().createElement(Mn,{placeholder:o().createElement(de,{msgId:"tjsManager.filterColumnSelection"}),value:this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterColumn,onChange:function(t){e.props.onSelectFilterColumn(e.props.layer2TJSSelected.id,t.name)},data:this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.list,textField:"title",valueField:"name"})),this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterList&&o().createElement("div",{className:"col-xs-6"},o().createElement("div",{style:{fontWeight:"bold"}},o().createElement(de,{msgId:"tjsManager.filterValueList"})),o().createElement(Mn,{placeholder:o().createElement(de,{msgId:"tjsManager.filterValueSelection"}),value:this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterValue&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterList.indexOf(this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterValue)>-1&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterValue,onChange:function(t){e.props.onSelectFilterValue(e.props.layer2TJSSelected.id,t)},data:this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterList})))),this.props.layer2TJSSelected.extendedParams.tjsManagement.sld&&this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.selected&&(0,l.find)(this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.list,{name:this.props.layer2TJSSelected.extendedParams.tjsManagement.sld.selected.name})&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes&&(!this.state.filterEnabled||this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterColumn&&this.props.layer2TJSSelected.extendedParams.tjsManagement.datasets.selected.attributes.filter.filterValue)&&o().createElement("div",{className:"row joinData"},o().createElement(In,{className:"btn btn-primary",onClick:function(){return e.props.onClickJoinLayer(e.props.layer2TJSSelected.id)},tooltipId:o().createElement(de,{msgId:"tjsManager.joinDataExecution"}),tooltipPosition:"bottom"},o().createElement(de,{msgId:"tjsManager.joinDataExecution"})))),o().createElement("div",{role:"footer"},o().createElement("p",{style:{fontStyle:"italic"}},this.props.layer2TJSSelected.title)))):null)}}])&&Sn(t.prototype,r),u}(o().Component);An(Nn,"propTypes",{verbose:s().bool,datasetsModal:s().bool,closeGlyph:s().string,onSelectLayer2TJS:s().func,onSelectDataset:s().func,onSelectSLD:s().func,onSelectFilterValue:s().func,onSelectFilterColumn:s().func,onClickJoinLayer:s().func,onClickClosemodal:s().func,style:s().object,layer2TJSSelected:s().object,removeJoinLayerProperties:s().array}),An(Nn,"defaultProps",{verbose:!1,style:{display:"none"},closeGlyph:"1-close",removeJoinLayerProperties:[],datasetsModal:!1});const Fn={name:i.name,component:(0,a.connect)(Cn,{onSelectLayer2TJS:A,onSelectDataset:function(e,t){return{type:y,layerId:e,datasetURI:t}},onSelectSLD:function(e,t){return{type:h,layerId:e,sldName:t}},onSelectFilterColumn:function(e,t){return{type:P,layerId:e,filterColumn:t}},onSelectFilterValue:function(e,t){return{type:O,layerId:e,filterValue:t}},onClickJoinLayer:j,onClickClosemodal:x})(Nn),reducers:{tjsExtension:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{datasetsModal:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Xr({},e,{text:t.payload});case p:return Xr({},e,{error:t.error});case d:return Xr({},e,{style:t.style});case v:return Xr({},e,{layer2TJSSelected:t.layer2TJSSelected});case S:return Xr({},e,{datasetsModal:!e.datasetsModal});default:return e}}},epics:Zr,containers:{Toolbar:{name:"TJSExtension",position:11,icon:o().createElement(Ln,{glyph:"link"}),doNotHide:!0,action:x,selector:function(e){return{bsStyle:e.tjsExtension.datasetsModal?"success":"primary",active:e.tjsExtension.datasetsModal,disabled:!e.tjsExtension.layer2TJSSelected}},tooltip:"tjsManager.dataJoin",help:o().createElement(de,{msgId:"tjsManager.dataJoin"}),priority:1}}}},42111:()=>{},67522:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg=="},24272:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QwKDiknI+uvvgAABttJREFUWMOll2uMVVcVx/9773PuPY/7mBcUZ4q1JmbiF6nQwtSY2pSYtobCB2yMrxhrHGOrfioEjQYlMWikH7TxUWNbjTFWU6gComm1UEgMAi20kFCrIMPMFIZ53Xvn3vPYZ++1/HBh6GVmmDu6k/+Xk/1fv7Mfa61zBDOjnfHihzZ1Gcg+YcUyCZrkvPf2A4efG2/HK24G+cuHN/cLS59nIT7DzH1Syli5jrGZUUTkKyGuAPa3RPTsA0f3vbEkyHfEBrlunbMVUn47LBYRhkE+7/uQORdCCDAzyAA6mkEURbpWqQpm/l4Q0I57X95rFoUcWLvxvazk71039/5b+noDVymQzsCZAWcZ2BKEkhCuC+E6kDkXmbUYv3QpylJ9zhj58EPHd/9zQcgf1228Xwnxh3Jnp+rq6XE5TmAb8aJ7rnwPIvQxPTlppicnLQGf3PSPvS/Mgey/c1OPVfzv3t7ecuj7MJUZsLVodwil4JQKiHSKS6OjDaFs/4a//2kUAOS1SVbxLwulkhd4HvTENMgYMPMcQcp5n5Mx0FMV+Pk8iuWyY6369bXYEgCeX7vh06zk+lu6O/O2WgeIWiQdB25nAbmeLsiOInI9XXA7y5A5d85cW62jp6s7L5Qa2LP2oS8CgNi3ZmOQCjP+7t6+wIOEnWm0bINT8kGej/FqBY1GAyZJoVwHQamE5YUSlCWYWgUgef2MiiESEIYuvZ14pLqdBOlq5eRF6Oehr0wAdP0iqDBAKhSGRoax8v6P4M5PbULxtlvRGB3Dud0HcG7Pn7Gyuwee77W8nJ2pIlzeA6UUJZSuVpv7+jcHfmF9yVGujTIAAoCAUA5URwEj01Po/8InsOprj8Dr6oCQEvmOElbcvQb+imV462+H0VXsAGcWbLnpZwHpKjQMmyTL3pSC+Z4w7/qkM4CuS7gOalECUS6g/7Ob571R7/nYfQhvX4npRh0yl2vxk84Q5l1fMN8jCRjwXQVOdXOrrko6AnGaYtldqyCEWPDqrhhYjcSkEIpb/Jxq+K4CAQOOIRs0SwWBmWbNzAzLBKdQWDQRzdVMaPUThBAgIl8COBUlCYRSrW+SZcgrB2Ovvn5TyNjJM8iznbMTQilESQICn5RE4nAjzTKhVIuZkhTlvIvKW+cxfOTYvIDx02dx+ehr6PQDkM7mVIAo0dqyfEUaaY5X01gLpcDWzoqSFCJO0Vcs4OCWHXjz+f0g0yywRITzL76Cl778dbyrWIbKLGwjavELpVBNG9rAHBdPf/DeXmZ3eE3frZKmKuDsHZVaSridZTTY4kK9jjiOUVqxHPUr41Cui9uLJZScHMzEOJivJ6NwHciuDrw6Omxh0CeYGc/c8dFjt5XLd/VIF7Y607JsFhaqWG4mJlskWiPv5uBJBYpmYGp1CG7dalUuYoIyHqpWjz1y6qUBBwA0xK6Rev3Z5cuXBaZmm3VolgLY6jSoVoHMuSg4Dqheh87M7DwGtaxeeg5Gx6ZiDfH92QIpnfgFbYyu6QzSC5t16AaxFeDYwM4k4NgABvPOk16ISqKRWlvvfrBz7yxk8MSRjMA/uVyvxcp3wJy1XMe2BUCFPkYb9dgyPfHwzt/Z1n5i7ZMTSaoispCBD+ZsyZKBi7qOUE0TYTN6uqWfAMCjZw5dBvDk0EwUK99rNqgbesVNBUAGPi7W6zGAJx47e2hyDgQAjLY7KzpB3WRQoT9vB1xIMvAxk2nMZJaEq3/wzrgtkMfOHppkIXZdjKJYhcHV1G9vFSr0MdRoRATeOXjiSHVBCAAYL7erZqyt6RQqDCAYi8ophKjpFI3MGGvtD2+MOQfylaMHaoL5u0NxGsvAB4FBRAuKBSB8DxeiKCLJOx49c6i+KAQAkMt+FFubVrMUTiGEYF5QquihohPElhK/OvHj+cLNCxk8cSQi8PahNItl4Deb1jxnIYSA9EIMpVnMQnzrc/85nbQNAQAd0VOptfUpnUAW8vPeKFEMMaUTpNbUum3wi4ViLQj56r8Oppbpm8OZjYUfAlK2ZreUkF4ew1kWk5Tf+PiZfXrJEAAY637fM5poekqnUGEOID0rp5DHlE6RWprofrD7VzeLc1PI9oNPGSuw7SJx82xU8xNVKAkEHoZslhCw7VqN+p8gADD2uvebzJrL45mBLIQAEVSxgCvawBBGx04Hzy0WY1HIdt5PLMTWEUKCwIfwPbDvYYQ4gZRbt/N++r8hAPCluw/uNmQvjFtit7OMK8YyEZ0fPPXXPe3424LgZ8RWyceHGVoTYQQiA7Cl7X+Xdv9+AeDnH7jvtbzAHSnj5OAbL69p1yexhMFCPJ5ACBZiC5ZkXELPYGb8dNX6bUv1/Bd7pfPVmVDtrAAAAABJRU5ErkJggg=="},68592:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},18698:()=>{},45968:()=>{}}]);