(self.webpackChunkMapStoreExtension=self.webpackChunkMapStoreExtension||[]).push([[161],{88372:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(77580),m=r(24852),d=r(86494),h=d.last,g=d.isNil,v=r(97846);r(76781),v.Draw.Polygon.prototype._calculateFinishDistance=function(e){if(this._markers.length>0){var t=this._map.latLngToContainerPoint(this._markers[0].getLatLng()),r=this._map.latLngToContainerPoint(this._markers[this._markers.length-1].getLatLng()),o=new v.Marker(e,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),n=this._map.latLngToContainerPoint(o.getLatLng());return Math.min(t.distanceTo(n),r.distanceTo(n))}return 1/0};var b=r(42914),w=b.isSimpleGeomType,O=b.getSimpleGeomType,S=r(64475).boundsToOLExtent,P=r(51312),L=r(89735),j=L.reproject,C=L.reprojectBbox,x=L.calculateCircleCoordinates,T=L.reprojectGeoJson,E=r(42006).pointToLayer,_=Math.PI/180,M=function(e,t,r){if("EPSG:4326"===r)return{center:t,srs:r,radius:e};var o=e/40075017*360/Math.cos(_*t[1]),n=j(t,"EPSG:4326",r);if(o){var i=j([t[0]+o,t[1]],"EPSG:4326",r);return{center:n,srs:r,radius:Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2))}}return{center:n,srs:r,radius:e}},k=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";if("EPSG:4326"===r||void 0===e)return{center:t,projection:r,radius:e};var o=j({x:t.lng,y:t.lat},r,"EPSG:4326");if(void 0===e)return{center:o,projection:r,radius:e};var n=j([t.lng+e,t.lat],r,"EPSG:4326"),i=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)),a=i*Math.cos(_*o.y)*40075017/360;return{center:o,projection:"EPSG:4326",radius:a}},D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,r,o,n,y=(o=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(o);if(n){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return c(this,e)});function m(){var e;a(this,m);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return f(p(e=y.call.apply(y,[this].concat(r))),"onDrawStart",(function(){e.drawing=!0})),f(p(e),"onDrawCreated",(function(t){e.drawing=!1;var r,o=t.layer,n=o.toGeoJSON();"marker"===t.layerType?r=v.latLngBounds(n.geometry.coordinates,n.geometry.coordinates):(o._map||(o._map=e.props.map,o._renderer=e.props.map.getRenderer(o),o._project()),r=o.getBounds());var i=S(r),a=r.getCenter();a=[a.lng,a.lat];var s=n.geometry.coordinates,l="EPSG:4326",c=n.geometry.type,p=o.getRadius?o.getRadius():0;if("circle"===t.layerType){n.projection="EPSG:4326",i=C(i,"EPSG:4326",l="EPSG:3857");var u=M(o._mRadius,a,l);a=u.center,p=u.radius,s=x(a,p,100),n.radius=o.getRadius?o.getRadius():0,a=[a.x,a.y],c="Polygon"}e.drawLayer.addData(n);var f={type:c,extent:i,center:a,coordinates:s,radius:p,projection:l};e.props.options&&e.props.options.stopAfterDrawing&&e.props.onChangeDrawingStatus("stop",e.props.drawMethod,e.props.drawOwner);var y=e.convertFeaturesToGeoJson(t.layer,e.props);e.props.onEndDrawing(f,e.props.drawOwner),e.props.onGeometryChanged([y],e.props.drawOwner,e.props.options&&e.props.options.stopAfterDrawing?"enterEditMode":"")})),f(p(e),"onUpdateGeom",(function(t,r){var o=e.convertFeaturesToGeoJson(t,r);r.onGeometryChanged([o],r.drawOwner)})),f(p(e),"addLayer",(function(t){e.clean();var r=v.geoJson(null,{pointToLayer:function(e,t){var r=k(e.radius,t,e.projection),o=r.center,n=r.radius;return v.circle(o,n||5)},style:function(e){return t.style&&t.style[e.geometry.type]||{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}});e.props.map.addLayer(r),t.features&&t.features.length>0&&r.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod)),e.drawLayer=r})),f(p(e),"addGeojsonLayer",(function(t){var r=t.features,o=t.projection,n=t.style;e.clean();var i=v.geoJson(r,{style:function(e){return e.style||n},pointToLayer:function(e,t){var r=j({x:t.lng,y:t.lat},o,"EPSG:4326");return E(v.latLng(r.y,r.x),e,n)}});e.drawLayer=i.addTo(e.props.map)})),f(p(e),"replaceFeatures",(function(t){e.drawLayer?(e.drawLayer.clearLayers(),"Circle"===e.props.drawMethod?(e.drawLayer.options.pointToLayer=function(e,t){var r=k(e.radius,t,e.projection),o=r.center,n=r.radius;return v.circle(o,n||5)},e.drawLayer.options.style={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}):e.drawLayer.options.pointToLayer=function(e,r){var o=j({x:r.lng,y:r.lat},t.options&&t.options.featureProjection||"EPSG:4326","EPSG:4326");return E(v.latLng(o.y,o.x),e,t.style)},e.drawLayer.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod))):e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style})})),f(p(e),"endDrawing",(function(t){e.replaceFeatures(t);var r=h(t.features);"Circle"!==e.props.drawMethod||!r||g(r.center)||g(r.radius)?r&&e.props.onEndDrawing(r,e.props.drawOwner):e.props.onEndDrawing(i(i({},r),{},{coordinates:x(r.center,r.radius,100)}),e.props.drawOwner)})),f(p(e),"addDrawInteraction",(function(t){e.removeAllInteractions(),"Point"===t.drawMethod||"MultiPoint"===t.drawMethod?e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}):e.addLayer(t),e.props.map.on("draw:created",e.onDrawCreated,p(e)),e.props.map.on("draw:drawstart",e.onDrawStart,p(e)),"LineString"===t.drawMethod||"Bearing"===t.drawMethod||"MultiLineString"===t.drawMethod?e.drawControl=new v.Draw.Polyline(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},showLength:!1,repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Polygon"===t.drawMethod||"MultiPolygon"===t.drawMethod?e.drawControl=new v.Draw.Polygon(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5],guidelineDistance:5},allowIntersection:!1,showLength:!1,showArea:!1,repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"BBOX"===t.drawMethod?e.drawControl=new v.Draw.Rectangle(e.props.map,{draw:!1,shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Circle"===t.drawMethod?e.drawControl=new v.Draw.Circle(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},showRadius:!1,repeatMode:!0}):"Point"!==t.drawMethod&&"MultiPoint"!==t.drawMethod||(e.drawControl=new v.Draw.Marker(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},repeatMode:!0})),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawControl.enable()})),f(p(e),"addDrawOrEditInteractions",(function(t){var r=[];t.features.map((function(e){var t;e&&e.geometry&&e.geometry.type&&!w(e.geometry.type)&&("GeometryCollection"===e.geometry.type?(t=e.geometry.geometries.map((function(t){return t.coordinates.map((function(r,o){return{type:"Feature",properties:i({},e.properties),id:t.type+o,geometry:{coordinates:r,type:O(t.type)}}}))})),r.push({type:"FeatureCollection",features:t})):(t=e.geometry.coordinates.map((function(t,r){return{type:"Feature",properties:i({},e.properties),id:e.geometry.type+r,geometry:{coordinates:t,type:O(e.geometry.type)}}})),r.push({type:"FeatureCollection",features:t})))}));var o=P({},t,{features:r.length>0?r:[{}]});e.drawLayer?(e.drawLayer.clearLayers(),e.drawLayer.addData(e.convertFeaturesPolygonToPoint(o.features,o.drawMethod))):e.addGeojsonLayer({features:t.features&&t.options.featureProjection&&"EPSG:4326"!==t.options.featureProjection?t.features.map((function(e){return T(e,t.options.featureProjection,"EPSG:4326")})):t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}),t.options.editEnabled&&e.addEditInteraction(o),t.options.drawEnabled&&e.addDrawInteraction(o)})),f(p(e),"addEditInteraction",(function(t){e.clean(),e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:P({},t.style,{poly:{icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}})});var r=e.drawLayer.getLayers();setTimeout((function(){r.forEach((function(r){r.getLayers&&r.getLayers()&&r.getLayers().length?r.getLayers().forEach((function(r){r.on("edit",(function(r){return e.onUpdateGeom(r.target,t)})),r.on("moveend",(function(r){return e.onUpdateGeom(r.target,t)})),r.editing&&r.editing.enable()})):(r.on("edit",(function(r){return e.onUpdateGeom(r.target,t)})),r.on("moveend",(function(r){return e.onUpdateGeom(r.target,t)})),r.editing&&r.editing.enable())}))}),0),e.editControl=new v.Control.Draw({edit:{featureGroup:e.drawLayer,poly:{allowIntersection:!1},edit:!0},draw:{polygon:{allowIntersection:!1,showArea:!0}}}),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable()})),f(p(e),"removeAllInteractions",(function(){e.removeEditInteraction(),e.removeDrawInteraction()})),f(p(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.props.options&&e.props.options.stopAfterDrawing&&(e.drawControl.setOptions({repeatMode:!1}),e.props.onDrawStopped()),e.drawControl.disable(),e.drawControl=null,e.props.map.off("draw:created",e.onDrawCreated,p(e)),e.props.map.off("draw:drawstart",e.onDrawStart,p(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),f(p(e),"removeEditInteraction",(function(){e.drawLayer&&(e.drawLayer.getLayers().forEach((function(e){e.getLayers&&e.getLayers()&&e.getLayers().length?e.getLayers().forEach((function(e){e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable()})):(e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable())})),e.editControl=null),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable()})),f(p(e),"cleanAndStop",(function(){e.removeAllInteractions(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),f(p(e),"clean",(function(){e.removeEditInteraction(),e.removeDrawInteraction(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),f(p(e),"convertFeaturesPolygonToPoint",(function(e,t){return"Circle"===t?e.map((function(e){var t=void 0!==e.center&&void 0!==e.radius?k(e.radius,{lat:e.center.y,lng:e.center.x},e.projection):e,r=t.center,o=t.projection,n=t.radius;return i(i({},e),{},{coordinates:r?[r.x,r.y]:e.coordinates,center:r||e.center,projection:o||e.projection,radius:void 0!==n?n:e.radius,type:"Point"})})):e})),f(p(e),"convertFeaturesToGeoJson",(function(t,r){var o;if(w(r.drawMethod))o=t.toGeoJSON().geometry;else{if("GeometryCollection"===r.drawMethod)return{type:"GeometryCollection",geometries:e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()})).map((function(e){return"FeatureCollection"===e.type?{type:"Multi"+e.features[0].geometry.type,coordinates:e.features.map((function(e){return e.geometry.coordinates}))}:{type:e.geometry.type,coordinates:e.geometry.coordinates}}))};var n=e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()}));o={type:r.drawMethod,coordinates:n.reduce((function(e,t){return e.concat([t.geometry.coordinates])}),[])}}return P({},t.toGeoJSON(),{geometry:o})})),e}return t=m,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=!(!this.props.messages&&!this.context.messages)&&this.context.messages.drawLocal;if(t&&(v.drawLocal=t),this.props.drawStatus!==e.drawStatus||"replace"===e.drawStatus||this.props.drawMethod!==e.drawMethod||this.props.features!==e.features)switch(e.drawStatus){case"create":this.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style});break;case"start":this.addDrawInteraction(e);break;case"drawOrEdit":this.addDrawOrEditInteractions(e);break;case"stop":this.removeAllInteractions();break;case"replace":this.replaceFeatures(e);break;case"clean":this.cleanAndStop();break;case"endDrawing":this.endDrawing(e);break;default:return}}},{key:"render",value:function(){return null}}])&&s(t.prototype,r),m}(m.Component);f(D,"displayName","DrawSupport"),f(D,"propTypes",{map:y.object,drawOwner:y.string,drawStatus:y.string,drawMethod:y.string,options:y.object,features:y.array,onChangeDrawingStatus:y.func,onGeometryChanged:y.func,onDrawStopped:y.func,onEndDrawing:y.func,messages:y.object,style:y.object}),f(D,"defaultProps",{map:null,drawOwner:null,drawStatus:null,drawMethod:null,features:null,options:{stopAfterDrawing:!0},onChangeDrawingStatus:function(){},onGeometryChanged:function(){},onDrawStopped:function(){},onEndDrawing:function(){},style:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1,editing:{fill:1}}}),e.exports=D},9045:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(77580),m=r(24852),d=r(86494),h=d.isEqual,g=d.isArray,v=d.castArray,b=r(51312),w=r(7185),O=r(42006).geometryToLayer,S=r(78588).createStylesAsync,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,r,o,n,y=(o=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(o);if(n){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return c(this,e)});function m(){var e;a(this,m);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return f(p(e=y.call.apply(y,[this].concat(r))),"createLayer",(function(t){t.geometry&&e.addFeature(i(i({},t),{},{style:t.style&&v(t.style)||void 0})),t.features&&t.features.forEach((function(r){var o=b({},t,{type:r.type,geometry:r.geometry,style:r.style&&v(r.style)||void 0,properties:r.properties});e.addFeature(o)}))})),f(p(e),"removeLayer",(function(t){e._layers&&(e._layers.forEach((function(e){t.container.removeLayer(e)})),e._layers=[])})),e}return t=m,r=[{key:"componentDidMount",value:function(){this._layers=[],(this.props.container&&this.props.geometry||this.props.features)&&this.createLayer(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){h(e.properties,this.props.properties)&&h(e.geometry,this.props.geometry)&&e.features===this.props.features&&e.style===this.props.style&&e.styleName===this.props.styleName||(this.removeLayer(e),this.createLayer(e))}},{key:"componentWillUnmount",value:function(){this.removeLayer(this.props)}},{key:"render",value:function(){return null}},{key:"addFeature",value:function(e){var t=this;if(g(e.style)){var r=S(e.style);w.all(r).then((function(r){t.addLayer(e,r)}))}else this.addLayer(e,e.style)}},{key:"addLayer",value:function(e,t){var r=this,o=O({type:e.type,geometry:e.geometry,properties:e.properties,msId:e.msId},{style:t,styleName:e.styleName});e.container.addLayer(o),o.on("click",(function(t){e.onClick&&e.onClick({pixel:{x:t.originalEvent&&t.originalEvent.x,y:t.originalEvent&&t.originalEvent.y},latlng:t.latlng},r.props.options.handleClickOnLayer?r.props.options.id:null)})),o.setOpacity||(o.setOpacity=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.originalStyle||this.options&&this.options.style||this.options||{};this.originalStyle=i({},t);var r=t.opacity,n=void 0===r?1:r,a=t.fillOpacity,s=void 0===a?1:a,l=t.color,c=t.fillColor,p=t.radius,u=t.weight,f={color:l,fillColor:c,radius:p,weight:u,opacity:n*e,fillOpacity:s*e};o.setStyle&&o.setStyle(f)}),this._layers.push(o)}}],r&&s(t.prototype,r),m}(m.Component);f(P,"propTypes",{msId:y.oneOfType([y.string,y.number]),type:y.string,styleName:y.string,properties:y.object,container:y.object,geometry:y.object,features:y.array,style:y.object,onClick:y.func,options:y.object}),e.exports=P},98284:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(77580),m=r(24852),d=r(27415),h=r(51312),g=r(86494).isEqual,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(v,e);var t,r,o,n,y=(o=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(o);if(n){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return c(this,e)});function v(){var e;a(this,v);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return f(p(e=y.call.apply(y,[this].concat(r))),"setLayerVisibility",(function(t){t!==(e.props.options&&!1!==e.props.options.visibility)&&(t?e.addLayer():e.removeLayer(),e.updateZIndex())})),f(p(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.layer.setOpacity&&e.layer.setOpacity(t)})),f(p(e),"generateOpts",(function(t,r,o){return h({},t,r?{zIndex:r,srs:e.props.srs}:null,{zoomOffset:-e.props.zoomOffset,onError:function(){e.props.onCreationError(t)},securityToken:o})})),f(p(e),"updateZIndex",(function(t){var r=t||e.props.position;r&&e.layer&&e.layer.setZIndex&&e.layer.setZIndex(r)})),f(p(e),"createLayer",(function(t,r,o,n){if(t){var i=e.generateOpts(r,o,n);e.layer=d.createLayer(t,i),e.layer&&(e.layer.layerName=r.name,e.layer.layerId=r.id),e.forceUpdate()}})),f(p(e),"updateLayer",(function(t,r){var o=d.updateLayer(t.type,e.layer,e.generateOpts(t.options,t.position,t.securityToken),e.generateOpts(r.options,r.position,r.securityToken));o&&(e.removeLayer(),e.layer=o,e.addLayer())})),f(p(e),"addLayer",(function(){if(e.isValid()&&(e.props.map.addLayer(e.layer),e.props.options.refresh&&e.layer.setParams)){var t=0;e.refreshTimer=setInterval((function(){e.layer.setParams(h({},e.props.options.params,{_refreshCounter:t++}))}),e.props.options.refresh)}})),f(p(e),"removeLayer",(function(){e.isValid()&&e.props.map.removeLayer(e.layer)})),f(p(e),"isValid",(function(){if(e.layer){var t=d.isValid(e.props.type,e.layer);return e.valid=t,t}return!1})),e}return t=v,(r=[{key:"componentDidMount",value:function(){this.valid=!0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken),this.props.options&&this.layer&&!1!==this.props.options.visibility&&(this.addLayer(),this.updateZIndex())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.options&&!1!==e.options.visibility;this.setLayerVisibility(t);var r=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(r),e.position!==this.props.position&&this.updateZIndex(e.position),this.updateLayer(e,this.props)}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!["map","type","srs","position","zoomOffset","onClick","options","children"].reduce((function(r,o){switch(o){case"map":case"type":case"srs":case"position":case"zoomOffset":case"onClick":case"children":return r&&t.props[o]===e[o];case"options":return r&&(t.props[o]===e[o]||g(i(i({},t.props[o]),{},{loading:!1}),i(i({},e[o]),{},{loading:!1})));default:return r}}),!0)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.removeLayer(),this.refreshTimer&&clearInterval(this.refreshTimer))}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,r=t?m.Children.map(this.props.children,(function(r){return r?m.cloneElement(r,{container:t,styleName:e.props.options&&e.props.options.styleName,onClick:e.props.onClick,options:e.props.options||{}}):null})):null;return m.createElement(m.Fragment,null,r)}return d.renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}])&&s(t.prototype,r),v}(m.Component);f(v,"propTypes",{map:y.object,type:y.string,srs:y.string,options:y.object,position:y.number,zoomOffset:y.number,onCreationError:y.func,onClick:y.func,securityToken:y.string}),f(v,"defaultProps",{onCreationError:function(){},options:{}}),e.exports=v},54212:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(97846),f=r(77580),y=r(24852),m=r(59154).ZP,d=r(89735),h=d.reprojectBbox,g=d.reproject,v=r(51312),b=r(42914),w=b.getGoogleMercatorResolutions,O=b.EXTENT_TO_ZOOM_HOOK,S=b.RESOLUTIONS_HOOK,P=b.COMPUTE_BBOX_HOOK,L=b.GET_PIXEL_FROM_COORDINATES_HOOK,j=b.GET_COORDINATES_FROM_PIXEL_HOOK,C=b.ZOOM_TO_EXTENT_HOOK,x=b.registerHook,T=r(49977),E=r(86494).throttle;r(37456);var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,r,o,f,m=(o=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(o);if(f){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function d(){var e;n(this,d);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return p(l(e=m.call.apply(m,[this].concat(r))),"state",{}),p(l(e),"getDocument",(function(){return e.props.document||document})),p(l(e),"getResolutions",(function(){return e.props.resolutions})),p(l(e),"_updateMapPositionFromNewProps",(function(t){var r=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},o=t.center,n=e.props.center,i=e.map.getCenter(),a=r(o.x,n.x)&&r(o.y,n.y)||r(o.x,i.lng)&&r(o.y,i.lat),s=t.zoom,l=e.props.zoom,c=e.map.getZoom(),p=s===l||s===c;a||p?p?a||e.map.setView([t.center.y,t.center.x]):e.map.setZoom(t.zoom):e.map.setView([t.center.y,t.center.x],Math.round(t.zoom))})),p(l(e),"updateMapInfoState",(function(){var t=e.map.getBounds().toBBoxString().split(","),r={height:e.map.getSize().y,width:e.map.getSize().x},o=e.map.getCenter();e.props.onMapViewChanges({x:o.lng,y:o.lat,crs:"EPSG:4326"},e.map.getZoom(),{bounds:{minx:parseFloat(t[0]),miny:parseFloat(t[1]),maxx:parseFloat(t[2]),maxy:parseFloat(t[3])},crs:"EPSG:4326",rotation:0},r,e.props.id,e.props.projection)})),p(l(e),"setMousePointer",(function(t){e.map&&(e.map.getContainer().style.cursor=t||"auto")})),p(l(e),"mouseMoveEvent",(function(t){var r=t.latlng.wrap();e.props.onMouseMove({x:r.lng||0,y:r.lat||0,z:e.elevationLayer&&e.elevationLayer.getElevation(r,t.containerPoint)||void 0,crs:"EPSG:4326",pixel:{x:t.containerPoint.x,y:t.containerPoint.x},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng]})})),p(l(e),"registerHooks",(function(){e.props.hookRegister.registerHook(O,(function(t){var r=g([t[0],t[1]],e.props.projection,"EPSG:4326"),o=g([t[2],t[3]],e.props.projection,"EPSG:4326");return e.map.getBoundsZoom([[r.y,r.x],[o.y,o.x]])-1})),e.props.hookRegister.registerHook(S,(function(){return e.getResolutions()})),e.props.hookRegister.registerHook(P,(function(t,r){var o=u.latLng([t.y,t.x]),n=e.map._getNewPixelOrigin(o,r),i=new u.Bounds(n,n.add(e.map.getSize())),a=e.map.unproject(i.getBottomLeft(),r),s=e.map.unproject(i.getTopRight(),r),l=new u.LatLngBounds(a,s).toBBoxString().split(",");return{bounds:{minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(l[2]),maxy:parseFloat(l[3])},crs:"EPSG:4326",rotation:0}})),e.props.hookRegister.registerHook(L,(function(t){var r=g(t,e.props.projection,"EPSG:4326"),o=e.map.latLngToContainerPoint([r.y,r.x]);return[o.x,o.y]})),e.props.hookRegister.registerHook(j,(function(t){var r=e.map.containerPointToLatLng(t),o=g([r.lng,r.lat],"EPSG:4326",e.props.projection);return[o.x,o.y]})),e.props.hookRegister.registerHook(C,(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.padding,n=r.crs,i=r.maxZoom,a=r.duration,s=o&&u.point(o.left||0,o.top||0),l=o&&u.point(o.right||0,o.bottom||0),c=h(t,n,"EPSG:4326");e.map.fitBounds([[c[1],c[0]],[c[3],c[2]]],{paddingTopLeft:s,paddingBottomRight:l,maxZoom:i,duration:a,animate:0!==a&&void 0})}))})),p(l(e),"addLayerObservable",(function(t,r){!t.layer.layerId||t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&r&&(t.layer._ms2LoadingTileCount=0,t.layer.layerLoadingStream$=new T.Subject,t.layer.layerLoadStream$=new T.Subject,t.layer.layerErrorStream$=new T.Subject,t.layer.layerErrorStream$.bufferToggle(t.layer.layerLoadingStream$,(function(){return t.layer.layerLoadStream$})).subscribe({next:function(r){var o=t.layer._ms2LoadingTileCount||r&&r.length||0;r&&r.length>0&&e.props.onLayerError(r[0].target.layerId,o,r.length),t.layer._ms2LoadingTileCount=0}}))})),e}return t=d,(r=[{key:"UNSAFE_componentWillMount",value:function(){if(this.zoomOffset=0,this.props.mapOptions&&this.props.mapOptions.view&&this.props.mapOptions.view.resolutions&&this.props.mapOptions.view.resolutions.length>0){var e=u.CRS.EPSG3857.scale,t=this.props.mapOptions.view.resolutions[0]/w(0,23)[0];this.crs=v({},u.CRS.EPSG3857,{scale:function(r){return e.call(u.CRS.EPSG3857,r)/Math.pow(2,Math.round(Math.log2(t)))}}),this.zoomOffset=Math.round(Math.log2(t))}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.limits,r=void 0===t?{}:t,o=r.restrictedExtent&&r.crs&&h(r.restrictedExtent,r.crs,"EPSG:4326"),n=v({},this.props.interactive?{}:{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,attributionControl:!1,maxBounds:o&&u.latLngBounds([[o[1],o[0]],[o[3],o[2]]]),maxBoundsViscosity:o&&1,minZoom:r&&r.minZoom,maxZoom:r&&r.maxZoom||23},this.props.mapOptions,this.crs?{crs:this.crs}:{}),i=u.map(this.getDocument().getElementById(this.props.id),v({zoomControl:!1},n)).setView([this.props.center.y,this.props.center.x],Math.round(this.props.zoom));this.map=i,this.props.zoomControl&&(this.mapZoomControl=u.control.zoom(),this.map.addControl(this.mapZoomControl)),this.attribution=u.control.attribution(),this.attribution.addTo(this.map);var a=this.getDocument();this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&(a.querySelector(this.props.mapOptions.attribution.container).appendChild(this.attribution.getContainer()),a.querySelector(".leaflet-control-container .leaflet-control-attribution")&&a.querySelector(".leaflet-control-container .leaflet-control-attribution").parentNode.removeChild(a.querySelector(".leaflet-control-container .leaflet-control-attribution"))),this.map.on("moveend",this.updateMapInfoState),this.map.on("singleclick",(function(t){e.props.onClick&&e.props.onClick({pixel:{x:t.containerPoint.x,y:t.containerPoint.y},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng],modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,metaKey:t.originalEvent.metaKey,shift:t.originalEvent.shiftKey}})}));var s=E(this.mouseMoveEvent,100);this.map.on("dragstart",(function(){e.map.off("mousemove",s)})),this.map.on("dragend",(function(){e.map.on("mousemove",s)})),this.map.on("mousemove",s),this.map.on("contextmenu",(function(){e.props.onRightClick&&e.props.onRightClick(event.containerPoint)})),this.map.on("mouseout",(function(){setTimeout((function(){return e.props.onMouseOut()}),150)})),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.map.on("layeradd",(function(t){if(t.layer._ms2Added){var r=t.layer.layerLoadingStream$&&t.layer.layerLoadingStream$.isStopped;e.addLayerObservable(t,r)}else t.layer._ms2Added=!0,t.layer.getElevation&&(e.elevationLayer=t.layer),t.layer.layerId&&(t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&(e.addLayerObservable(t,!0),t.layer.options&&t.layer.options.hideLoading||(e.props.onLayerLoading(t.layer.layerId),t.layer.layerLoadingStream$.next()),t.layer.on("loading",(function(r){e.props.onLayerLoading(r.target.layerId),t.layer.layerLoadingStream$.next()})),t.layer.on("load",(function(r){e.props.onLayerLoad(r.target.layerId),t.layer.layerLoadStream$.next()})),t.layer.on("tileloadstart ",(function(){t.layer._ms2LoadingTileCount++})),(t.layer.options&&!t.layer.options.hideErrors||!t.layer.options)&&t.layer.on("tileerror",(function(e){t.layer.layerErrorStream$.next(e)})),t.layer.on("loaderror",(function(t){e.props.onLayerError(t.target.layerId)}))))})),this.map.on("layerremove",(function(e){e.layer.layerLoadingStream$&&(e.layer.layerLoadingStream$.complete(),e.layer.layerLoadStream$.complete(),e.layer.layerErrorStream$.complete())})),this.drawControl=null,this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),this.map&&e.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(e),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?(this.mapZoomControl=u.control.zoom(),this.map.addControl(this.mapZoomControl)):this.mapZoomControl&&!e.zoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0)),e.resize!==this.props.resize&&setTimeout((function(){t.map&&t.map.invalidateSize(!1)}),0),this.props.limits!==e.limits){var r=e.limits,o=void 0===r?{}:r,n=this.props.limits;if(o.restrictedExtent!==(n&&n.restrictedExtent)){var i=o.restrictedExtent&&o.crs&&h(o.restrictedExtent,o.crs,"EPSG:4326");this.map.setMaxBounds(o.restrictedExtent&&u.latLngBounds([[i[1],i[0]],[i[3],i[2]]]))}o.minZoom!==(n&&n.minZoom)&&this.map.setMinZoom(o.minZoom)}return!1}},{key:"componentWillUnmount",value:function(){var e=this.getDocument(),t=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&e.querySelector(this.props.mapOptions.attribution.container);if(t&&this.attribution.getContainer()&&t.querySelector(".leaflet-control-attribution"))try{t.removeChild(this.attribution.getContainer())}catch(e){}this.mapZoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0),this.map.off(),this.map.remove(),this.map=void 0}},{key:"render",value:function(){var e=this,t=this.map,r=this.props.projection,o=t?y.Children.map(this.props.children,(function(o){return o?y.cloneElement(o,{map:t,projection:r,zoomOffset:e.zoomOffset,onCreationError:e.props.onCreationError,onClick:e.props.onClick}):null})):null;return y.createElement("div",{id:this.props.id,style:this.props.style},o)}}])&&i(t.prototype,r),d}(y.Component);p(_,"propTypes",{id:f.string,document:f.object,center:m.PropTypes.center,zoom:f.number.isRequired,mapStateSource:m.PropTypes.mapStateSource,style:f.object,projection:f.string,onMapViewChanges:f.func,onClick:f.func,onRightClick:f.func,mapOptions:f.object,limits:f.object,zoomControl:f.bool,mousePointer:f.string,onMouseMove:f.func,onLayerLoading:f.func,onLayerLoad:f.func,onLayerError:f.func,resize:f.number,measurement:f.object,changeMeasurementState:f.func,registerHooks:f.bool,interactive:f.bool,resolutions:f.array,hookRegister:f.object,onCreationError:f.func,onMouseOut:f.func}),p(_,"defaultProps",{id:"map",onMapViewChanges:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},zoomControl:!0,mapOptions:{zoomAnimation:!0,attributionControl:!1},projection:"EPSG:3857",center:{x:13,y:45,crs:"EPSG:4326"},zoom:5,onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:{registerHook:x},style:{},interactive:!0,resolutions:w(0,23),onMouseOut:function(){}}),e.exports=_},93905:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(77580),h=r(24852),g=r(51312),v=r(97846),b=r(86494).slice,w=r(89735),O=w.reproject,S=w.calculateAzimuth,P=w.calculateDistance,L=w.transformLineToArcs,j=r(88262),C=j.convertUom,x=j.getFormattedBearingValue;r(76781);var T={km:2,ha:2,m:2,mi:2,ac:2,yd:0,ft:0,nm:2,sqkm:2,sqha:2,sqm:2,sqmi:2,sqac:2,sqyd:2,sqft:2,sqnm:2};v.getMeasureWithTreshold=function(e,t,r,o,n,i,a){return e>t?v.GeometryUtil.formattedNumber(C(e,r,o),n[o])+" "+a:v.GeometryUtil.formattedNumber(e,n[r])+" "+i};var E=v.GeometryUtil.readableDistance;v.GeometryUtil.readableDistance=function(e,t,r,o,n,i){if(!i)return E.apply(null,arguments);if("Bearing"===i.geomType)return i.bearing;var a=v.Util.extend({},T,n),s=i.uom.length,l=s.unit,c=s.label,p=v.GeometryUtil.formattedNumber(C(e,"m",l),a[l])+" "+c;return i.useTreshold&&(t&&(p=v.getMeasureWithTreshold(e,1e3,"m","km",a,"m","km")),"mi"===l&&(p=v.getMeasureWithTreshold(C(e,"m","yd"),1760,"yd","mi",a,"yd","mi"))),p};var _=v.GeometryUtil.readableArea;v.GeometryUtil.readableArea=function(e,t,r,o){if(!o)return _.apply(null,arguments);var n=o.uom.area,i=n.unit,a=n.label,s=v.Util.extend({},T,r),l=v.GeometryUtil.formattedNumber(C(e,"sqm",i),s[i])+" "+a;return o.useTreshold&&(t&&(l=v.getMeasureWithTreshold(e,1e6,"sqm","sqkm",s,"m²","km²")),"sqmi"===i&&(l=v.getMeasureWithTreshold(C(e,"sqm","sqyd"),3097600,"sqyd","sqmi",s,"yd²","mi²"))),l};var M=v.Draw.Polygon.prototype._getMeasurementString;v.Draw.Polygon.prototype._getMeasurementString=function(){if(!this.options.uom)return M.apply(this,arguments);var e=this._area,t="";if(!e&&!this.options.showLength)return null;if(this.options.showLength&&(t=v.Draw.Polyline.prototype._getMeasurementString.call(this)),e){var r={uom:this.options.uom,useTreshold:this.options.useTreshold};t+=this.options.showLength?"<br>":""+v.GeometryUtil.readableArea(e,this.options.metric,this.options.precision,r)}return t};var k=v.Draw.Polyline.prototype._getMeasurementString;v.Draw.Polyline.prototype._getMeasurementString=function(){if(!this.options.uom)return k.apply(this,arguments);var e,t=this._currentLatLng,r=this._markers[this._markers.length-1].getLatLng();e=v.GeometryUtil.isVersion07x()?r&&t&&t.distanceTo?this._measurementRunningTotal+t.distanceTo(r)*(this.options.factor||1):this._measurementRunningTotal||0:r&&t?this._measurementRunningTotal+this._map.distance(t,r)*(this.options.factor||1):this._measurementRunningTotal||0;var o={uom:this.options.uom,useTreshold:this.options.useTreshold,geomType:this.options.geomType,bearing:this.options.bearing?x(this.options.bearing,this.options.trueBearing):0};return v.GeometryUtil.readableDistance(e,this.options.metric,this.options.feet,this.options.nautic,this.options.precision,o)};var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,r,o,n,s=(o=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(o);if(n){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u(this,e)});function d(){var e;l(this,d);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return m(f(e=s.call.apply(s,[this].concat(r))),"onDrawStart",(function(){e.props.map.off("click",e.restartDrawing,f(e)),e.removeArcLayer(),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawing=!0})),m(f(e),"onDrawCreated",(function(t){e.drawing=!1,e.props.map.addLayer(t.layer),e.lastLayer=t.layer;var r=e.lastLayer&&e.lastLayer.toGeoJSON()||{};if("LineString"===e.props.measurement.geomType&&(r=g({},r,{geometry:g({},r.geometry,{coordinates:L(r.geometry.coordinates)})})),"Point"===e.props.measurement.geomType){var o=e.drawControl._marker.getLatLng(),n={x:o.lng,y:o.lat,srs:"EPSG:4326"},i=g({},e.props.measurement,{point:n,feature:r});e.props.changeMeasurementState(i)}else{var a=g({},e.props.measurement,{feature:r});e.props.changeMeasurementState(a)}e.props.measurement.lineMeasureEnabled&&e.lastLayer&&e.addArcsToMap([r]),setTimeout((function(){e.props.map.off("click",e.restartDrawing,f(e)),e.props.map.on("click",e.restartDrawing,f(e))}),100)})),m(f(e),"onDrawVertex",(function(){var t=e.drawControl._markers||[];"Bearing"===e.props.measurement.geomType&&t.length>=2?setTimeout((function(){e.drawControl._markers=b(e.drawControl._markers,0,2),e.drawControl._poly._latlngs=b(e.drawControl._poly._latlngs,0,2),e.drawControl._poly._originalPoints=b(e.drawControl._poly._originalPoints,0,2),e.updateMeasurementResults(),e.drawControl._finishShape(),e.drawControl.disable()}),100):e.updateMeasurementResults()})),m(f(e),"addArcsToMap",(function(t){e.removeLastLayer();var r=t.map((function(e){return g({},e,{geometry:g({},e.geometry,{coordinates:L(e.geometry.coordinates)})})}));e.arcLayer=v.geoJson(r,{style:{color:"#ffcc33",opacity:1,weight:1,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}),e.props.map.addLayer(e.arcLayer),r&&r.length>0&&e.arcLayer.addData(r)})),m(f(e),"updateMeasurementResults",(function(){if(e.drawing&&e.drawControl){var t=0,r=0,o=0,n=e.drawControl._currentLatLng;if("LineString"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>1){var i=e.drawControl._markers.reduce((function(e,t){var r=t.getLatLng(),o=r.lng,n=r.lat;return[].concat(a(e),[[o,n]])}),[]);t=P(i,e.props.measurement.lengthFormula)}else if("Polygon"===e.props.measurement.geomType&&e.drawControl._poly){var s=[].concat(a(e.drawControl._poly.getLatLngs()),[n]);r=v.GeometryUtil.geodesicArea(s)}else"Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0&&(o=e.calculateBearing());var l=g({},e.props.measurement,{point:null,len:t,area:r,bearing:o});e.props.changeMeasurementState(l)}})),m(f(e),"restartDrawing",(function(){e.props.map.off("click",e.restartDrawing,f(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable(),e.props.map.removeLayer(e.lastLayer),e.drawControl.enable(),e.drawing=!0})),m(f(e),"addDrawInteraction",(function(t){if(e.removeDrawInteraction(),e.props.map.on("draw:created",e.onDrawCreated,f(e)),e.props.map.on("draw:drawstart",e.onDrawStart,f(e)),e.props.map.on("draw:drawvertex",e.onDrawVertex,f(e)),e.props.map.on("mousemove",e.updateBearing,f(e)),e.props.updateOnMouseMove&&e.props.map.on("mousemove",e.updateMeasurementResults,f(e)),"Point"===t.measurement.geomType)e.drawControl=new v.Draw.Marker(e.props.map,{repeatMode:!1});else if("LineString"===t.measurement.geomType||"Bearing"===t.measurement.geomType){var r=e.uomLengthOptions(t);e.drawControl=new v.Draw.Polyline(e.props.map,i(i({shapeOptions:{color:"#ffcc33",weight:2},showLength:!0,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},r),{},{repeatMode:!1,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),trueBearing:t.measurement.trueBearing}))}else if("Polygon"===t.measurement.geomType){var o=e.uomAreaOptions(t);e.drawControl=new v.Draw.Polygon(e.props.map,i(i({shapeOptions:{color:"#ffcc33",weight:2,fill:"rgba(255, 255, 255, 0.2)"},showArea:!0,allowIntersection:!1,showLength:!1,repeatMode:!1,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},o),{},{icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}))}e.drawControl.enable()})),m(f(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.drawControl.disable(),e.drawControl=null,e.removeLastLayer(),e.removeArcLayer(),e.props.map.off("draw:created",e.onDrawCreated,f(e)),e.props.map.off("draw:drawstart",e.onDrawStart,f(e)),e.props.map.off("draw:drawvertex",e.onDrawVertex,f(e)),e.props.map.off("mousemove",e.updateBearing,f(e)),e.props.map.off("click",e.restartDrawing,f(e)),e.props.updateOnMouseMove&&e.props.map.off("mousemove",e.updateMeasurementResults,f(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),m(f(e),"removeLastLayer",(function(){e.lastLayer&&e.props.map.removeLayer(e.lastLayer)})),m(f(e),"removeArcLayer",(function(){e.arcLayer&&e.props.map.removeLayer(e.arcLayer)})),m(f(e),"uomLengthOptions",(function(e){var t=e.uom.length.unit;return{metric:"m"===t||"km"===t,nautic:"nm"===t,feet:"ft"===t}})),m(f(e),"uomAreaOptions",(function(e){var t=e.uom.area.unit;return{metric:"sqm"===t||"sqkm"===t,nautic:"sqnm"===t,feet:"sqft"===t}})),m(f(e),"calculateBearing",(function(){var t,r=e.drawControl._currentLatLng,o=e.drawControl._markers,n=[o[0].getLatLng().lng,o[0].getLatLng().lat];return 1===o.length?t=[r.lng,r.lat]:2===o.length&&(t=[o[1].getLatLng().lng,o[1].getLatLng().lat]),n=O(n,"EPSG:4326",e.props.projection),t=O(t,"EPSG:4326",e.props.projection),S(n,t,e.props.projection)})),m(f(e),"updateBearing",(function(){if("Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0){var t=e.props.measurement&&e.props.measurement.trueBearing;e.drawControl.setOptions({bearing:e.calculateBearing(),trueBearing:t})}})),e}return t=d,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if((e&&e.uom&&e.uom.length&&e.uom.length.unit)!==(this.props&&this.props.uom&&this.props.uom.length&&this.props.uom.length.unit)&&this.drawControl){var t=this.uomLengthOptions(e);this.drawControl.setOptions(i(i({},t),{},{uom:e.uom}))}if((e&&e.uom&&e.uom.area&&e.uom.area.unit)!==(this.props&&this.props.uom&&this.props.uom.area&&this.props.uom.area.unit)&&this.drawControl){var r=this.uomAreaOptions(e);this.drawControl.setOptions(i(i({},r),{},{uom:e.uom}))}(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&this.props.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&this.addDrawInteraction(e),e.measurement.geomType||this.removeDrawInteraction()}},{key:"render",value:function(){var e=this.props.messages||!!this.context.messages&&this.context.messages.drawLocal;return e&&(v.drawLocal=e),null}}])&&c(t.prototype,r),d}(h.Component);m(D,"displayName","MeasurementSupport"),m(D,"propTypes",{map:d.object,metric:d.bool,feet:d.bool,nautic:d.bool,enabled:d.bool,useTreshold:d.bool,projection:d.string,measurement:d.object,changeMeasurementState:d.func,messages:d.object,uom:d.object,updateOnMouseMove:d.bool}),m(D,"contextTypes",{messages:d.object}),m(D,"defaultProps",{uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},updateOnMouseMove:!1,metric:!0,nautic:!1,useTreshold:!1,feet:!1}),e.exports=D},21663:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(77580),u=r(24852),f=r(79188),y=r(97846),m=r(27415),d=r(51312);r(60537);var h={position:"bottomright",width:300,height:150,collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,zoomLevelFixed:null,zoomAnimation:!1,toggleDisplay:!0,autoToggleDisplay:!1,minimized:!0},g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,r,o,c,p=(o=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(o);if(c){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function u(){return n(this,u),p.apply(this,arguments)}return t=u,(r=[{key:"componentDidMount",value:function(){var e=d({},h,this.props.overviewOpt);if(this.props.layers){var t=[];this.props.layers.forEach((function(e){t.push(m.createLayer(e.type,e.options||{}))})),1===t.length?this.overview=new f(t[0],e):t.length>1&&(this.overview=new f(y.layerGroup(t),e))}this.props.map&&this.overview&&this.overview.addTo(this.props.map)}},{key:"render",value:function(){return null}}])&&i(t.prototype,r),u}(u.Component);c(g,"displayName","Overview"),c(g,"propTypes",{map:p.object,overviewOpt:p.object,layers:p.array}),c(g,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]}),e.exports=g},57362:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var o=r(24852),n=r.n(o),i=r(80307),a=r.n(i),s=r(77580),l=r.n(s),c=r(97846),p=r.n(c),u=r(88042),f=r.n(u),y=r(87218),m=r(64156);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function O(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e,t){var r=new MutationObserver((function(){e.update()}));e.once("remove",(function(){r&&r.disconnect(),r=null})),r.observe(t,{attributes:!0,childList:!0,subtree:!0})},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,r,o,i,s=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(o);if(i){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return O(this,e)});function l(){var e;v(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return L(S(e=s.call.apply(s,[this].concat(r))),"updatePopup",(function(){(e._popups||[]).map((function(e){return e.popup.update()}))})),L(S(e),"popupClose",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.target,o=(r=void 0===r?{}:r).options,n=(o=void 0===o?{}:o).id;n&&e.props.onPopupClose(n)})),L(S(e),"preparePopups",(function(){var t=e.props,r=t.popups,o=void 0===r?[]:r,n=t.map,i=e.props.map.getSize();return(e._popups||[]).forEach((function(t){var r=t.popup;r.off("remove",e.popupClose),r&&e.props.map.removeLayer(r)})),e._popups=o.map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=.9*i.x,o=.9*i.y,a=t.id,s=t.position.coordinates,l=t.component,c=t.content,u=t.className,f=t.maxWidth,m=void 0===f?r:f,d=t.maxHeight,h=void 0===d?o:d,v=t.autoPan,b=void 0===v||v,w=t.offset,O=void 0===w?[0,7]:w,S=m>r?r:m,P=h>o?o:h,L=y.fH(a,u);L.setAttribute("style","max-width: ".concat(S,"px; max-height: ").concat(P,"px")),y.R3(L,c);var C=p().popup({id:a,autoClose:!1,closeOnClick:!1,autoPan:b,autoPanPadding:p().point(70,70),maxWidth:S,maxHeight:P,className:"ms-leaflet-popup",offset:O}).setContent(L);return C.once("remove",e.popupClose),l&&j(C,L),C.setLatLng(s),n.addLayer(C),g({popup:C},t)})),e._popups})),L(S(e),"stopPropagationOnMouseMove",(function(e){e.stopPropagation()})),L(S(e),"fireMouseOutEvent",(function(){e.props.map.fireEvent("mouseout")})),e}return t=l,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.map&&(this.props.map.getContainer().querySelector(".leaflet-popup-pane").addEventListener("mousemove",this.stopPropagationOnMouseMove),this.props.map.getContainer().querySelector(".leaflet-popup-pane").addEventListener("mouseenter",this.fireMouseOutEvent))}},{key:"componentDidMount",value:function(){this.props.map&&this.props.map.on("resize",this.updatePopup)}},{key:"shouldComponentUpdate",value:function(e){return e.popups!==this.props.popups}},{key:"componentWillUnmount",value:function(){var e=this;(this._popups||[]).forEach((function(t){var r,o,n=t.popup;n.off("remove",e.popupClose),n&&(null===(r=e.props.map)||void 0===r||null===(o=r.removeLayer)||void 0===o||o.call(r,n))})),this.props.map&&(this.props.map.off("resize",this.updatePopup),this.props.map.getContainer().removeEventListener("mousemove",this.stopPropagationOnMouseMove),this.props.map.getContainer().removeEventListener("mouseenter",this.fireMouseOutEvent))}},{key:"renderPopups",value:function(){return this.preparePopups().filter((function(e){return!!e.component})).map((function(e){var t=e.popup,r=e.props,o=void 0===r?{}:r,i=e.component,s=e.id,l=t.getContent(),c=f()(i)&&m.Z[i]||i,p=n().isValidElement(c)&&c||n().createElement(c,o);return l?a().createPortal(p,l,s):null}))}},{key:"render",value:function(){return n().createElement("div",null,this.renderPopups())}}])&&b(t.prototype,r),l}(n().Component);L(C,"propTypes",{map:l().object,popups:l().arrayOf(l().object),onPopupClose:l().func}),L(C,"defaultProps",{popups:[],onPopupClose:function(){}})},3512:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(77580),u=r(24852),f=r(97846),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,r,o,c,p=(o=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(o);if(c){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function u(){return n(this,u),p.apply(this,arguments)}return t=u,(r=[{key:"componentDidMount",value:function(){if(this.scalebar=f.control.scale(this.props),this.props.map&&(this.scalebar.addTo(this.props.map),this.props.container)){document.querySelector(this.props.container).appendChild(this.scalebar.getContainer());var e=document.querySelector(".leaflet-control-container .leaflet-control-scale-line");e&&e.parentNode&&e.parentNode.removeChild(e)}}},{key:"componentWillUnmount",value:function(){if(this.props.container&&this.scalebar&&this.scalebar.getContainer())try{document.querySelector(this.props.container).removeChild(this.scalebar.getContainer())}catch(e){}}},{key:"render",value:function(){return null}}])&&i(t.prototype,r),u}(u.Component);c(y,"propTypes",{map:p.object,position:p.oneOf(["topleft","topright","bottomleft","bottomright"]),maxWidth:p.number,metric:p.bool,imperial:p.bool,updateWhenIdle:p.bool,container:p.string}),c(y,"defaultProps",{map:null,position:"bottomleft",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}),e.exports=y},37456:(e,t,r)=>{var o=r(97846);o.Evented.addInitHook((function(){this._singleClickTimeout=null,this.on("click",this._scheduleSingleClick,this),this.on("dblclick dragstart zoomstart",this._cancelSingleClick,this)})),o.Evented.include({_cancelSingleClick:function(){setTimeout(this._clearSingleClickTimeout.bind(this),0)},_scheduleSingleClick:function(e){this._clearSingleClickTimeout(),this._singleClickTimeout=setTimeout(this._fireSingleClick.bind(this,e),this.options.singleClickTimeout||500)},_fireSingleClick:function(e){e.originalEvent._stopped||this.fire("singleclick",o.Util.extend(e,{type:"singleclick"}))},_clearSingleClickTimeout:function(){null!==this._singleClickTimeout&&(clearTimeout(this._singleClickTimeout),this._singleClickTimeout=null)}})},4181:(e,t,r)=>{var o=r(97846),n=r(27415);r(89518);var i=r(51312);o.BingLayer.prototype.loadMetadata=function(){if(!this.metaRequested){this.metaRequested=!0;var e=this,t="_bing_metadata_"+o.Util.stamp(this);window[t]=function(r){e.meta=r,window[t]=void 0;var o=document.getElementById(t);return o.parentNode.removeChild(o),r.errorDetails?(e.fire("load",{layer:e}),e.onError(r)):(e.initMetadata(r),null)};var r="file:"===document.location.protocol?"https":document.location.protocol.slice(0,-1),n=r+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+t+"&key="+this._key+"&UriScheme="+r,i=document.createElement("script");i.type="text/javascript",i.src=n,i.id=t,document.getElementsByTagName("head")[0].appendChild(i)}},o.BingLayer.prototype.onError=function(e){return this.options.onError?this.options.onError(e):null},n.registerType("bing",{create:function(e){var t=e.apiKey,r={subdomains:[0,1,2,3],type:e.name,attribution:"Bing",culture:"",onError:e.onError,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23};return e.zoomOffset&&(r=i({},r,{zoomOffset:e.zoomOffset})),new o.BingLayer(t,r)},isValid:function(e){return!e.meta||!e.meta.statusCode||200===e.meta.statusCode}})},98613:(e,t,r)=>{var o=r(97846);e.exports=o.TileLayer.extend({initialize:function(e){o.TileLayer.prototype.initialize.call(this,this.url,e)}})},62461:(e,t,r)=>{var o=r(27415),n=r(97846);r(30067),o.registerType("google",(function(e){return n.gridLayer.googleMutant({type:e.name.toLowerCase(),maxNativeZoom:e.maxNativeZoom||18,maxZoom:e.maxZoom||20})}))},86951:(e,t,r)=>{var o=r(27415),n=r(76633),i=r(51312);r(40713),o.registerType("graticule",{create:function(e){var t=i({interval:20,showOriginLabel:!0,redraw:"move"},e);return n?new n(t):null},isValid:function(){return!!n}})},51998:(e,t,r)=>{function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(27415),a=r(94241);i.registerType("mapquest",{create:function(e){return a?a.mapLayer(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({maxZoom:23},e)):(e&&e.onError&&e.onError(),!1)},isValid:function(){return!!a}})},19328:(e,t,r)=>{var o=r(27415),n=r(97846);o.registerType("osm",(function(e){return n.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoomOffset:e.zoomOffset||0,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23})}))},60676:(e,t,r)=>{var o=r(27415),n=r(97846);o.registerType("tms",(function(e){return n.tileLayer("".concat(e.tileMapUrl,"/{z}/{x}/{y}.").concat(e.extension),{hideErrors:e.hideErrors||!0,tms:!0})}))},53311:(e,t,r)=>{function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var a=r(27415),s=r(97846),l=r(96355);a.registerType("tileprovider",(function(e){var t,r,a=l.getLayerConfig(e.provider,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({maxZoom:23},e)),c=(r=2,function(e){if(Array.isArray(e))return e}(t=a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=c[0],u=c[1];return s.tileLayer(p,u)}))},33802:(e,t,r)=>{var o=r(27415),n=r(86494).isNil,i=r(97846),a=function e(t,r){t.eachLayer&&t.eachLayer((function(t){t.setOpacity&&t.setOpacity(r),e(t,r)}))};o.registerType("vector",{create:function(e){var t=function(e){var t=e.hideLoading,r=i.geoJson([],{pointToLayer:"marker"!==e.styleName?function(t,r){return i.circleMarker(r,t.style||e.style)}:null,hideLoading:t});return r.setOpacity=function(e){a(r,e)},r.on("layeradd",(function(t){var o=t.layer;r.setOpacity(n(r.opacity)?e.opacity:r.opacity,o)})),r}(e);return t.opacity=n(e.opacity)?1:e.opacity,t},update:function(e,t,r){t.opacity!==r.opacity&&(e.opacity=t.opacity)},render:function(){return null}})},52922:(e,t,r)=>{"use strict";var o=r(86494),n=r(97846),i=r.n(n),a=r(54051),s=r(89735),l=r(27415),c=r.n(l),p=r(93537),u=r(83358),f=r(64973),y=["color","fillColor"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e,t){e.fireEvent("loading");var r=(0,p.optionsToVendorParams)(t),o=function(){e.fireEvent("loadError")};return(0,u.getFeature)(t.url,t.name,d({outputFormat:"application/json",maxFeatures:1e3,srsname:(0,s.normalizeSRS)("EPSG:4326")},r)).then((function(t){return 200===t.status?(e.clearLayers(),e.addData(t.data),e.fireEvent("load")):(console.error(t),o(new Error("status code of response:"+t.status))),e})).catch((function(e){o()}))},v=function(e){var t=e||{},r=t.color,o=t.fillColor;return d(d({},function(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(t,y)),{},{color:(0,a.qq)(r,1),fillColor:(0,a.qq)(o,1)})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style&&e.style[0]||e.style;return v(t)},w=function(e,t){var r=b(t);e.setStyle(r),e.options.style=r,e.styleName=t.styleName},O=function e(t,r){t.eachLayer&&t.eachLayer((function(t){t.setOpacity&&t.setOpacity(r),e(t,r)}))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=b(e),n=function(t,o){return"marker"===e.styleName?i().marker(o,r):i().circleMarker(o,r)},a=new(i().GeoJSON)(t,{pointToLayer:n,style:r});return a.setOpacity=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=d({},a.options.style||{}),r=t.fillOpacity,o=void 0===r?1:r,n=t.opacity,i=void 0===n?1:n,s=d(d({},t),{},{opacity:i*e,fillOpacity:o*e});a.setStyle(v(s)),O(a,e)},a.on("layeradd",(function(){w(a,e),a.setOpacity((0,o.isNil)(a.opacity)?e.opacity:a.opacity)})),a};c().registerType("wfs",{create:function(e){var t=S(e);return g(t,e),t.opacity=(0,o.isNil)(e.opacity)?1:e.opacity,t},update:function(e,t,r){if(t.opacity!==r.opacity&&(e.opacity=t.opacity),(0,f.needsReload)(r,t)&&g(e,t),(0,o.isEqual)(t.style,r.style)||w(e,t),t.styleName!==r.styleName){var n=e.toGeoJSON().features;return S(t,n)}return null},render:function(){return null}})},44340:(e,t,r)=>{function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=r(24852),i=r(12684).Z,a=r(27415),s=r(93537).optionsToVendorParams,l=r(17019),c=r(97846),p=r(51312),u=r(86494),f=u.isArray,y=u.isNil,m=r(36493),d=m.addAuthenticationToSLD,h=m.addAuthenticationParameter,g=r(72978),v=g.loadTile,b=g.getElevation,w=r(36515).creditsToAttribution,O=r(54747).isVectorFormat;r(76048),c.NonTiledLayer.WMSCustom=c.NonTiledLayer.WMS.extend({initialize:function(e,t){this._wmsUrl=e;var r=c.extend({},this.defaultWmsParams);for(var o in t)this.options.hasOwnProperty(o)||"CRS"===o.toUpperCase()||"maxNativeZoom"===o||(r[o]=t[o]);this.wmsParams=r,c.setOptions(this,t)},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),r||this.redraw(),this}}),c.nonTiledLayer.wmsCustom=function(e,t){return new c.NonTiledLayer.WMSCustom(e,t)},c.TileLayer.MultipleUrlWMS=c.TileLayer.WMS.extend({initialize:function(e,t){this._url=e[0],this._urls=e,this._urlsIndex=0;var r=c.extend({},this.defaultWmsParams),o=t.tileSize||this.options.tileSize;for(var n in t.detectRetina&&c.Browser.retina?r.width=r.height=2*o:r.width=r.height=o,t)this.options.hasOwnProperty(n)||"CRS"===n.toUpperCase()||"maxNativeZoom"===n||(r[n]=t[n]);this.wmsParams=r,c.setOptions(this,t)},getTileUrl:function(e){var t=this._map,r=this.options.tileSize,o=e.multiplyBy(r),n=o.add([r,r]),i=this._crs.project(t.unproject(o,e.z)),a=this._crs.project(t.unproject(n,e.z)),s=this._wmsVersion>=1.3&&this._crs===c.CRS.EPSG4326?[a.y,i.x,i.y,a.x].join(","):[i.x,a.y,a.x,i.y].join(",");this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var l=c.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e)});return l+c.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+s},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),r||this.redraw(),this}}),c.tileLayer.multipleUrlWMS=function(e,t){return new c.TileLayer.MultipleUrlWMS(e,t)},c.TileLayer.ElevationWMS=c.TileLayer.MultipleUrlWMS.extend({initialize:function(e,t,r){this._tiles={},this._nodata=r,c.TileLayer.MultipleUrlWMS.prototype.initialize.apply(this,arguments)},_addTile:function(e){var t=this.getTileUrl(e);v(t,e,this._tileCoordsToKey(e))},getElevation:function(e,t){try{var r=this._getTileFromCoords(e),o=b(this._tileCoordsToKey(r),this._getTileRelativePixel(r,t),this.getTileSize().x,this._nodata);return o.available?o.value:n.createElement(i,{msgId:o.message})}catch(e){return n.createElement(i,{msgId:"elevationLoadingError"})}},_getTileFromCoords:function(e){var t=this._map.project(e).divideBy(256).floor();return p(t,{z:this._tileZoom})},_getTileRelativePixel:function(e,t){var r=Math.floor(t.x-this._getTilePos(e).x-this._map._getMapPanePos().x),o=Math.min(this.getTileSize().x-1,Math.floor(t.y-this._getTilePos(e).y-this._map._getMapPanePos().y));return new c.Point(r,o)},_removeTile:function(){},_abortLoading:function(){}}),c.tileLayer.elevationWMS=function(e,t,r){return new c.TileLayer.ElevationWMS(e,t,r)};var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){return y(e[r])?t:p(t,o({},r,e[r]))}),{})};function P(e){var t=void 0!==e.opacity?e.opacity:1,r=s(e),o=p({},e.baseParams,{attribution:e.credits&&w(e.credits),layers:e.name,styles:e.style||"",format:(O(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t,zIndex:e.zIndex,version:e.version||"1.3.0",tileSize:e.tileSize||256,maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},p(e._v_?{_v_:e._v_}:{},r||{}));return d(o,e)}function L(e){return e.map((function(e){return e.split("?")[0]}))}a.registerType("wms",{create:function(e){var t=L(f(e.url)?e.url:[e.url]),r=S(P(e)||{});return t.forEach((function(t){return h(t,r,e.securityToken)})),e.useForElevation?c.tileLayer.elevationWMS(t,r,e.nodata||-9999):e.singleTile?c.nonTiledLayer.wmsCustom(t[0],r):c.tileLayer.multipleUrlWMS(t,r)},update:function(e,t,r){if(r.singleTile!==t.singleTile||r.tileSize!==t.tileSize||r.securityToken!==t.securityToken&&t.visibility){var n=L(f(t.url)?t.url:[t.url]),i=P(t)||{};return n.forEach((function(e){return h(e,i,t.securityToken)})),t.singleTile?c.nonTiledLayer.wmsCustom(n[0],i):c.tileLayer.multipleUrlWMS(n,i)}var a=p({},l.filterWMSParamOptions(P(r)),d(r.params||{},r)),s=p({},l.filterWMSParamOptions(P(t)),d(t.params||{},t)),u=Object.keys(s).filter((function(e){return s[e]!==a[e]})),y=Object.keys(a).filter((function(e){return a[e]!==s[e]})),m={};return y.length>0&&e.removeParams(y,u.length>0),u.length>0&&(m=u.reduce((function(e,t){return p({},e,o({},t,s[t]))}),m),e.setParams(S(p(m,m.params,d(t.params||{},t))))),null}})},73292:(e,t,r)=>{"use strict";r.r(t);var o=r(27415),n=r.n(o),i=r(89735),a=r(97846),s=r.n(a),l=r(51312),c=r.n(l),p=r(36493),u=r(73418),f=r(2595),y=r.n(f),m=r(86494),d=r(54747);s().tileLayer.wmts=function(e,t,r){return new(y())(e,t,r)};var h=function(e){var t=function(e){return e.map((function(e){return e.split("?")[0]}))}((0,m.isArray)(e.url)?e.url:[e.url]),r=function(e){var t=(0,i.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),r=u.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds);return c()({requestEncoding:e.requestEncoding,layer:e.name,style:e.style||"",format:((0,d.isVectorFormat)(e.format)?"image/png":e.format)||"image/png",tileMatrixSet:r,version:e.version||"1.0.0",tileSize:e.tileSize||256,CRS:(0,i.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},e.params||{})}(e)||{};t.forEach((function(t){return(0,p.addAuthenticationParameter)(t,r,e.securityToken)}));var o=(0,i.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),n=u.getTileMatrix(e,o),a=n.tileMatrixSet,l=n.matrixIds;return s().tileLayer.wmts(t,r,{tileMatrixPrefix:e.tileMatrixPrefix||r.tileMatrixSet+":"||o+":",originY:e.originY||20037508.3428,originX:e.originX||-20037508.3428,ignoreErrors:e.ignoreErrors||!1,matrixIds:l,matrixSet:a})};n().registerType("wmts",{create:h,update:function(e,t,r){return r.securityToken!==t.securityToken||r.format!==t.format?h(t):null}})},33896:(e,t,r)=>{e.exports={BingLayer:r(4181),Commons:r(98613),GraticuleLayer:r(86951),GoogleLayer:r(62461),MapQuest:r(51998),OSMLayer:r(19328),TMSLayer:r(60676),TileProviderLayer:r(53311),WFSLayer:r(52922).default,WMSLayer:r(44340),WMTSLayer:r(73292),VectorLayer:r(33802)}},55314:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=function(){return r(33896),{Map:r(54212),Layer:r(98284),Feature:r(9045),MeasurementSupport:r(93905),Overview:r(21663),ScaleBar:r(3512),DrawSupport:r(88372),PopupSupport:r(57362).Z}}},94241:e=>{e.exports=window.MQ},64475:(e,t,r)=>{"use strict";r.r(t),r.d(t,{boundsToOLExtent:()=>o,fromLeafletFeatureToQueryform:()=>n});var o=function(e){return[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()]},n=function(e){var t=e.toGeoJSON(),r=e.getBounds(),n=o(r),i=r.getCenter(),a=e.getRadius?e.getRadius():0,s=t.features[0].geometry.coordinates;return{type:t.features[0].geometry.type,extent:n,center:i,coordinates:s,radius:a,projection:"EPSG:4326"}}},64765:(e,t,r)=>{var o=r(97846),n=r(86494).isFunction;r(51056),r(62496),e.exports={extra:{getIcon:function(e){var t=e.iconPrefix||"fa";return o.ExtraMarkers.icon({icon:t+"-"+e.iconGlyph,markerColor:e.iconColor||"blue",shape:e.iconShape||"square",prefix:t,extraClasses:e.highlight?"marker-selected":""})}},standard:{getIcon:function(e){return o.icon({iconUrl:e.iconUrl||e.symbolUrlCustomized||e.symbolUrl,shadowUrl:e.shadowUrl,iconSize:e.iconSize,shadowSize:e.shadowSize,iconAnchor:e.iconAnchor,shadowAnchor:e.shadowAnchor,popupAnchor:e.popupAnchor})}},html:{getIcon:function(e,t){return o.divIcon(n(e.html)?e.html(t):e.html)}}}},42006:(e,t,r)=>{function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(97846),s=r(64765),l=r(51312),c=r(78588),p=c.isMarkerStyle,u=c.isSymbolStyle,f=function e(t,r,o){for(var n,i=[],a=t.length,s=0;s<a;s++)n=r?e(t[s],r-1,o):(o||this.coordsToLatLng)(t[s]),i.push(n);return i},y=function(e){if("GeometryCollection"===e.geometry.type)return!1;var t=e.style;return t&&(p(t)||u(t)||t.iconUrl||t.iconGlyph)},m={coordsToLatLngF:function(e){return new a.LatLng(e[1],e[0],e[2])},coordsToLatLngs:f,isMarker:y,getPointLayer:function(e,t,r,o){return e?e(t,r):m.pointToLayer(r,t,n(n({},o.style),{},{styleName:o.styleName,highlight:o.highlight}))},pointToLayer:function(e,t,r){var o=r.Point||r.MultiPoint||r,n=function(e,t){if(e&&e.iconGlyph){var r=e.iconLibrary||"extra";if(s[r])return s[r].getIcon(e)}return e&&e.html&&t?s.html.getIcon(e,t):e&&e.iconUrl||e.symbolUrlCustomized||e.symbolUrl?s.standard.getIcon(e):null}(o,t);return n?a.marker(e,{icon:n,opacity:o&&o.opacity||1}):a.marker(e,{opacity:o&&o.opacity||1})},toValidGeoJSON:function(){},createTextPointMarkerLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pointToLayer,r=e.geojson,o=e.latlng,i=e.options,s=e.style,l=void 0===s?{}:s,c=e.highlight,p=void 0!==c&&c;if(r.properties&&r.properties.isText){var u=a.divIcon({html:'<span style="\n                font:'.concat(l.font,";\n                color:").concat(l.fillColor,";\n                -webkit-text-stroke-width:",1,"px;\n                -webkit-text-stroke-color:").concat(l.color,';">').concat(r.properties.valueText,"</span>"),className:""});return new a.Marker(o,{icon:u})}return m.getPointLayer(t,r,o,n(n({},i),{},{style:l,highlight:p}))},createPolygonCircleLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geojson,r=e.style,o=void 0===r?{}:r,i=e.latlngs,s=void 0===i?[]:i,l=e.coordsToLatLng,c=void 0===l?function(){}:l;if(t.properties&&t.properties.isCircle){var p=c(t.properties.center);return a.circle(p,n(n({},o),{},{radius:t.properties.radius}))}return new a.Polygon(s,o)},geometryToLayer:function(e,t){var r,o="Feature"===e.type?e.geometry:e,i=o?o.coordinates:null,s=[],c=n({styleName:t.styleName,style:t.style&&t.style[0]||t.style},e),p=t&&!y(c)?function(e,t){return"marker"===c.styleName?a.marker(t,c.style):a.circleMarker(t,c.style&&c.style[0]||c.style)}:null,u=t&&t.coordsToLatLng||m.coordsToLatLngF;if(!i&&!o)return null;var d,h,g,v,b=c.style||l({},t.style&&t.style[o.type]||t.style,{highlight:t.style&&t.style.highlight});switch(o.type){case"Point":return d=u(i),m.createTextPointMarkerLayer({pointToLayer:p,geojson:e,latlng:d,options:t,style:b,highlight:b&&b.highlight});case"MultiPoint":for(g=0,v=i.length;g<v;g++)d=u(i[g]),(r=m.createTextPointMarkerLayer({pointToLayer:p,geojson:e,latlng:d,options:t,style:b,highlight:b&&b.highlight})).msId=e.id,s.push(r);return new a.FeatureGroup(s);case"LineString":return b=m.updateHighlightStyle(b),h=f(i,"LineString"===o.type?0:1,u),(r=new a.Polyline(h,b)).msId=e.id,r;case"MultiLineString":for(b=m.updateHighlightStyle(b),g=0,v=(h=f(i,"LineString"===o.type?0:1,u)).length;g<v;g++)(r=new a.Polyline(h[g],b)).msId=e.id,r&&s.push(r);return new a.FeatureGroup(s);case"Polygon":return b=m.updateHighlightStyle(b),h=f(i,"Polygon"===o.type?1:2,u),(r=m.createPolygonCircleLayer({geojson:e,style:b,latlngs:h,coordsToLatLng:u})).msId=e.id,r;case"MultiPolygon":for(b=m.updateHighlightStyle(b),g=0,v=(h=f(i,"Polygon"===o.type?1:2,u)).length;g<v;g++)(r=m.createPolygonCircleLayer({geojson:e,style:b,latlngs:h,coordsToLatLng:u})).msId=e.id,r&&s.push(r);return new a.FeatureGroup(s);case"GeometryCollection":for(g=0,v=o.geometries.length;g<v;g++)(r=m.geometryToLayer({geometry:o.geometries[g],type:"Feature",properties:e.properties},t))&&s.push(r);return new a.FeatureGroup(s);default:throw new Error("Invalid GeoJSON object.")}},updateHighlightStyle:function(e){var t=e.highlight;return t?l({},e,{dashArray:t?"10":null}):e}};e.exports=m},17019:(e,t,r)=>{var o=r(51312),n={PARAM_OPTIONS:["layers","styles","format","transparent","version","tiled","zindex","_v_","cql_filter","sld"],wmsToLeafletOptions:function(e){var t=void 0!==e.opacity?e.opacity:1;return o({layers:e.name,styles:e.style||"",format:e.format||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t},e.params||{})},getWMSURL:function(e){return e.split("?")[0]},filterWMSParamOptions:function(e){var t={};return Object.keys(e).forEach((function(r){r&&r.toLowerCase&&n.PARAM_OPTIONS.indexOf(r.toLowerCase())>=0&&(t[r]=e[r])})),t}};e.exports=n},2595:(e,t,r)=>{function o(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var i=r(97846),a=r(42914).getScales,s=r(89735).parseString,l=r(86494),c=l.head,p=l.isNumber,u=i.TileLayer.extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.3.0",layer:"",style:"",tileMatrixSet:"",format:"image/jpeg"},initialize:function(e,t,r){this._url=e[0],this._urls=e,this._urlsIndex=0;var o=i.extend({},this.defaultWmtsParams),n=t.tileSize||this.options.tileSize;for(var a in t.detectRetina&&i.Browser.retina?o.width=o.height=2*n:o.width=o.height=n,t)this.options.hasOwnProperty(a)||"crs"===a||(o[a]=t[a]);this.wmtsParams=o,this.matrixIds=r.matrixIds&&this.getMatrix(r.matrixIds,r)||this.getDefaultMatrix(r),this.matrixSet=r.matrixSet&&r.matrixSet.TileMatrix||[],this.ignoreErrors=r.ignoreErrors||!1,i.setOptions(this,t)},getWMTSParams:function(e,t,r,o,n){var i=a()[r],l=c(e.map((function(t,r){if(r===e.length-1)return null;var o=parseFloat(t.ScaleDenominator),n=parseFloat(e[r+1].ScaleDenominator);return o>=i&&n<i?i-n>(o-n)/2?{id:r,data:t}:{id:r+1,data:e[r+1]}:null})).filter((function(e){return e}))),u=l&&p(l.id)&&l.id+""||0===e.length&&r||null;if(!t[u])return null;var f=t[u].identifier,y=l.data&&l.data.TopLeftCorner&&s(l.data.TopLeftCorner)||t[u].topLeftCorner,m=y.lng||y.x,d=y.lat||y.y,h=Math.round((o.x-m)/n),g=-Math.round((o.y-d)/n),v=l.data&&l.data.MatrixWidth&&l.data.MatrixHeight&&{cols:{min:0,max:l.data.MatrixWidth-1},rows:{min:0,max:l.data.MatrixHeight-1}},b=t[u].ranges||v;return b&&!function(e,t,r){return!(e<r.cols.min||e>r.cols.max||t<r.rows.min||t>r.rows.max)}(h,g,b)?null:{ident:f,tilecol:h,tilerow:g}},getTileUrl:function(e){var t=this._map,r=t.options.crs,n=this.options.tileSize,a=e.multiplyBy(n);a.x+=1,a.y-=1;var s=a.add([n,n]),l=r.project(t.unproject(a,e.z)),c=r.project(t.unproject(s,e.z)).x-l.x,p=this.getWMTSParams(o(this.matrixSet),o(this.matrixIds),e.z,l,c);if(!p)return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var u=i.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e),TileRow:p.tilerow,TileCol:p.tilecol,TileMatrixSet:this.options.tileMatrixSet,TileMatrix:p.ident,Style:this.options.style});return"RESTful"===this.options.requestEncoding?u:u+i.Util.getParamString(this.wmtsParams,u,!0)+"&tilematrix="+p.ident+"&tilerow="+p.tilerow+"&tilecol="+p.tilecol},getMatrix:function(e,t){return e.map((function(e){return{identifier:e.identifier,topLeftCorner:new i.LatLng(t.originY,t.originX),ranges:e.ranges||null}}))},getDefaultMatrix:function(e){for(var t=new Array(22),r=0;r<22;r++)t[r]={identifier:e.tileMatrixPrefix+r,topLeftCorner:new i.LatLng(e.originY,e.originX)};return t},onError:function(){return!this.ignoreErrors}});e.exports=u},60537:()=>{}}]);