(self.webpackChunkMapStoreExtension=self.webpackChunkMapStoreExtension||[]).push([[228],{86570:(e,t,r)=>{var n={"./cesium/Layers":13530,"./leaflet/Layers":27415,"./openlayers/Layers":75866};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=86570},83358:(e,t,r)=>{"use strict";r.r(t),r.d(t,{toDescribeURL:()=>g,getFeatureSimple:()=>m,getCapabilitiesURL:()=>y,getFeatureURL:()=>b,getFeature:()=>v,getCapabilities:()=>h,describeFeatureTypeOGCSchemas:()=>O,describeFeatureType:()=>P});var n=r(10306),o=r.n(n),i=r(72500),a=r.n(i),u=r(51312),c=r.n(u);function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e,t){var r=a().parse(e,!0);return a().format(p(p({},r),{},{search:void 0,query:p(p({},r.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},m=function(e,t){return o().get(e+"?service=WFS&version=1.1.0&request=GetFeature",{params:c()({outputFormat:"application/json"},t)}).then((function(e){return"object"!==s(e.data)?JSON.parse(e.data):e.data}))},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.version,n=void 0===r?"1.1.0":r,o=a().parse(e,!0);return a().format(c()({},o,{query:c()({service:"WFS",version:n,request:"GetCapabilities"},o.query)}))},b=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.version,o=void 0===n?"1.1.0":n,i=l(r,["version"]),u=a().parse(e,!0);return a().format(c()({},u,{query:c()(p({service:"WFS",typeName:t,version:o,request:"GetFeature"},i),u.query)}))},v=function(e,t,r){return o().get(b(e,t,r))},h=function(e){return o().get(y(e))},O=function(e,t){var n=a().parse(e,!0),i=a().format(c()({},n,{query:c()({service:"WFS",version:"1.1.0",typeName:t,request:"DescribeFeatureType"},n.query)}));return new Promise((function(e){Promise.all([r.e(985),r.e(370)]).then(function(){var t=r(27563).unmarshaller;e(o().get(i).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value})))}.bind(null,r)).catch(r.oe)}))},P=function(e,t){return o().get(g(e,t)).then((function(e){return e.data}))}},10306:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(7185),u=r(56647),c=r(72500),l=r(59154).ZP,s=r(36493),f=s.isAuthenticationActivated,p=s.getAuthenticationRule,d=s.getToken,g=s.getBasicAuthHeader,m=r(51312),y=r(14855),b=y.isObject,v=y.omitBy,h=y.isNil,O=r(72500);function P(e,t,r){e.params=m({},e.params,i({},t,r)),e.url=e.url?l.getUrlWithoutParameters(e.url,[t]):e.url}function _(e,t,r){e.headers=m({},e.headers,i({},t,r))}var E=[];a.interceptors.request.use((function(e){var t=e.url||"",r=!(0===t.indexOf("http")),n=!r&&t.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(function(e){if(!e||!e.url||!f())return e;var t=u(e.baseURL||"",e.url),r=p(t);switch(r&&r.method){case"browserWithCredentials":return e.withCredentials=!0,e;case"authkey":var n=d();return n?(P(e,r.authkeyParamName||"authkey",n),e):e;case"test":var o=r?r.token:"";return o?(P(e,r.authkeyParamName||"authkey",o),e):e;case"basic":var i=g();return i?(_(e,"Authorization",i),e):e;case"bearer":var a=d();a&&_(e,"Authorization","Bearer "+a)}}(e),n){var o=window.location;r=n[1]===o.protocol&&n[3]===o.hostname;var i=n[4],a=o.port,c=0===o.protocol.indexOf("https")?443:80;i=""===i?c+"":i+"",a=""===a?c+"":a+"",r=r&&i===a}if(!r){var s=l.getProxyUrl(e);if(s){var y=[],S=!1;b(s)&&(y=s.useCORS||[],S=s.autoDetectCORS||!1,s=s.url);var w=y.reduce((function(e,r){return e||0===t.indexOf(r)}),!1),x=E.reduce((function(e,r){return e||0===t.indexOf(r)}),!1);if(w||S&&!x)S&&(e.autoDetectCORS=!0);else{var j=O.parse(t,!0,!0),A=v(e.params,h);e.url=s+encodeURIComponent(O.format(m({},j,{search:null,query:m({},j.query,A)}))),e.params=void 0}}}return e})),a.interceptors.response.use((function(e){return e}),(function(e){if(e.config&&e.config.autoDetectCORS){var t=c.parse(e.config.url),r=t.protocol+"//"+t.host+t.pathname;if(-1===E.indexOf(r))return E.push(r),new Promise((function(t,r){a(o(o({},e.config),{},{autoDetectCORS:!1})).then(t).catch(r)}))}return Promise.reject(e.response?o(o({},e.response),{},{originalError:e}):e)})),e.exports=a},59154:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>G});var n=r(23291),o=r(77580),i=r.n(o),a=r(72500),u=r.n(a),c=r(7185),l=r.n(c),s=r(14855),f=r(51312),p=r.n(f),d=r(89820),g=r(10082),m=r.n(g);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=n.Z?new n.Z.Proj("EPSG:4326"):null,P=i().shape({x:i().number.isRequired,y:i().number.isRequired,crs:i().string}),_=u().parse(window.location.href,!0).query,E="localConfig.json",S={proxyUrl:"/mapstore/proxy/?url=",geoStoreUrl:"/rest/geostore/",printUrl:"/mapstore/print/info.json",translationsPath:"translations",extensionsRegistry:"extensions.json",extensionsFolder:"",configurationFolder:"",contextPluginsConfiguration:"pluginsConfig.json",projectionDefs:[],themePrefix:"ms2",bingApiKey:null,mapquestApiKey:null,defaultSourceType:"gxp_wmssource",backgroundGroup:"background",userSessions:{enabled:!1}},w=function(e,t,r,n){var o=e.mapId;return{configUrl:o?(n||S.geoStoreUrl)+"data/"+o:S.configurationFolder+(e.config||t||"config")+"."+(r||"json"),legacy:!!o}},x=function(e){var t=e.split("?");if(t.length>2){var r=t.slice(1);return t[0]+"?"+r.join("&")}return e},j=function(e,t){var r=x(e).split("?"),n="";if(r.length>=2&&r[1]){var o=r[1].split(/[&;]/g).filter((function(e){return!!e}));o.forEach((function(e,r){var i=e.split("=");if(-1===t.indexOf(i[0].toLowerCase())){var a=r===o.length-1?"":"&";n+=i.join("=")+a}}))}return n?r[0]+"?"+n:r[0]},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,s.isNil)(e)||""===e?null:j(x(e),t)},C=function(e,t){var r=(0,s.isArray)(e)?{x:e[0],y:e[1]}:e,o=e.crs||t||"EPSG:4326",i="EPSG:4326"!==o?n.Z.transform(new n.Z.Proj(o),O,r):r;return p()({},i,{crs:"EPSG:4326"})},T=function(e){return"bing"===e.type&&(e.apiKey=S.bingApiKey),"mapquest"===e.type&&(e.apiKey=S.mapquestApiKey),e},I=function(e,t){return e.id||(e.id=e.name+"__"+t),e},L=function(e){var t=e;return(t.match(/\{.*?\}/g)||[]).forEach((function(e){var r=S[e.substring(1,e.length-1)];void 0!==r&&(t=t.replace(e,r||""))})),t},R=function(e){return e.url&&((0,s.isArray)(e.url)?e.url=e.url.map((function(e){return L(e)})):e.url=L(e.url)),e},M=function(e){var t=e.layers,r=e.groups,n=e.plugins,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers","groups","plugins"]);return o.center=C(o.center),{map:o,layers:t.map(T,e).map(I).map(R),groups:r,plugins:n}},D=function(e,t){var r,n=t;for(r in t||(n=S.defaultSourceType),e)e.hasOwnProperty(r)&&(e[r].ptype||(e[r].ptype=n))},N=function(e){return e&&-1!==e.indexOf("?")?e.split("?")[0]:e},F=function(e,t){if(e.baseParams=t.baseParams,t.url){var r=u().parse(t.url,!0);for(var n in r.query)"REQUEST"===n.toUpperCase()&&delete r.query[n];e.baseParams=p()({},e.baseParams,r.query)}e.url=N(t.url)},k=function(e,t,r){var n,o,i,a;for(o=0;o<e.length;o++){(a=t[(i=e[o]).source])&&F(i,a);var u=a.ptype;i.type=u?u.replace(/^gxp_(.*)source$/i,"$1"):"unknown",i&&(r.indexOf(a&&a.ptype)>=0?i.group===S.backgroundGroup&&(i.visibility=i.visibility||!1,n&&n.visibility?i.visibility&&(n.visibility=!1,n=i):n=i):i.visibility=!1)}n&&(n.visibility=!0)},B=function(e){return e.proxyUrl?e.proxyUrl:S.proxyUrl};const G={PropTypes:{center:P,config:i().shape({center:P,zoom:i().number.isRequired}),mapStateSource:i().string},getParsedUrl:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){var n=u().parse(A(e,r),!0),o=null;if((0,s.endsWith)(n.pathname,"wfs")||(0,s.endsWith)(n.pathname,"wms")||(0,s.endsWith)(n.pathname,"ows"))return o=n.pathname.replace(/(wms|ows|wfs|wps)$/,"wps"),u().format(p()({},n,{search:null,pathname:o},{query:p()(v({service:"WPS"},t),n.query)}))}return null},getDefaults:function(){return v({},S)},setLocalConfigurationFile:function(e){E=e},loadConfiguration:function(){return E?l().get(E).then((function(e){return"object"===y(e.data)&&(S=p()({},S,e.data)),v({},S)})):new d.Promise((function(e){e(v({},S))}))},getCenter:C,normalizeConfig:M,getUserConfiguration:function(e,t,r){return w(_,e,t,r)},getConfigurationOptions:w,getConfigUrl:function(e){var t=e.mapId,r=t,n=e.config;try{var o=parseInt(r,10);isNaN(o)&&(n=t,r=null)}catch(e){n=t,r=null}return w({mapId:r,config:n})},convertFromLegacy:function(e){var t=e.map,r=e.gsSources||e.sources,n=t.layers.filter((function(e){return r[e.source]})),o=C(t.center,t.projection),i=t.zoom,a=t.maxExtent||t.extent;return D(r,e.defaultSourceType),k(n,r,["gxp_osmsource","gxp_wmssource","gxp_googlesource","gxp_bingsource","gxp_mapquestsource","gxp_olsource"]),M({center:o,zoom:i,maxExtent:a,layers:n,projection:t.projection||"EPSG:3857"})},setupSources:D,normalizeSourceUrl:N,copySourceOptions:F,setupLayers:k,mergeConfigs:function(e,t){return e.map=t.map,e.gsSources=t.gsSources||t.sources,e},getProxyUrl:B,cleanDuplicatedQuestionMarks:x,getUrlWithoutParameters:j,filterUrlParams:A,getProxiedUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(0===e.indexOf("http")),n=!r&&e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(n){var o=window.location;r=n[1]===o.protocol&&n[3]===o.hostname;var i=n[4],a=o.port,u=0===o.protocol.indexOf("https")?443:80;i=""===i?u+"":i+"",a=""===a?u+"":a+"",r=r&&i===a}if(!r){var c=B(t);if(c){var l=[];(0,s.isObject)(c)&&(l=c.useCORS||[],c=c.url);var f=l.reduce((function(t,r){return t||0===e.indexOf(r)}),!1);if(!f)return c+encodeURIComponent(e)}}return e},getBrowserProperties:function(){var e="ActiveXObject"in window,t=e&&!document.addEventListener,r=e&&window.location.hash===!!window.MSInputMethodContext&&!!document.documentMode,n=navigator.userAgent.toLowerCase(),o=-1!==n.indexOf("webkit"),i=-1!==n.indexOf("chrome"),a=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),u=-1!==n.indexOf("phantom"),c=-1!==n.indexOf("android"),l=-1!==n.search("android [23]"),s=-1!==n.indexOf("gecko"),f=m().any,p=!window.PointerEvent&&window.MSPointerEvent,d=window.PointerEvent&&window.navigator.pointerEnabled&&window.navigator.maxTouchPoints||p,g="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,y=document.documentElement,b=e&&"transition"in y.style,v="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!l,h="MozPerspective"in y.style,O="OTransition"in y.style,P=!window.L_DISABLE_3D&&(b||v||h||O)&&!u,_=!window.L_NO_TOUCH&&!u&&(d||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);return{ie:e,ie11:r,ielt9:t,webkit:o,gecko:s&&!o&&!window.opera&&!e,android:c,android23:l,chrome:i,safari:a,ie3d:b,webkit3d:v,gecko3d:h,opera3d:O,any3d:P,mobile:f,mobileWebkit:f&&o,mobileWebkit3d:f&&v,mobileOpera:f&&window.opera,touch:_,msPointer:p,pointer:d,retina:g}},setApiKeys:T,setUrlPlaceholders:R,replacePlaceholders:L,setLayerId:I,getConfigProp:function(e){return S[e]},setConfigProp:function(e,t){S[e]=t},removeConfigProp:function(e){delete S[e]}}},89735:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FORMULAS:()=>T,getProjUrl:()=>L,determineCrs:()=>M,normalizePoint:()=>N,reproject:()=>k,reprojectExtent:()=>G,getPolygonFromExtent:()=>U,getExtentFromNormalized:()=>q,crsCodeTable:()=>W,setCrsLabels:()=>K,getUnits:()=>V,getProjectedBBox:()=>z,createBBox:()=>H,reprojectGeoJson:()=>Y,lineIntersectPolygon:()=>J,normalizeLng:()=>Q,reprojectBbox:()=>Z,bboxToFeatureGeometry:()=>X,getCompatibleSRS:()=>$,getEquivalentSRS:()=>ee,getEPSGCode:()=>te,normalizeSRS:()=>re,isAllowedSRS:()=>ne,getAvailableCRS:()=>oe,filterCRSList:()=>ie,calculateAzimuth:()=>ae,calculateDistance:()=>ue,extendExtent:()=>ce,getGeoJSONExtent:()=>le,isValidExtent:()=>se,calculateCircleCoordinates:()=>fe,transformLineToArcs:()=>pe,transformArcsToLine:()=>de,coordsOLtoLeaflet:()=>ge,mergeToPolyGeom:()=>me,getViewportGeometry:()=>ye,getExtentFromViewport:()=>be,fetchProjRemotely:()=>ve,parseURN:()=>he,parseString:()=>Oe,getWMSBoundingBox:()=>Pe,isSRSAllowed:()=>_e,getNormalizedLatLon:()=>Ee,isInsideVisibleArea:()=>Se,centerToVisibleArea:()=>we,calculateCircleRadiusFromPixel:()=>xe,roundCoord:()=>je,midpoint:()=>Ae,pointObjectToArray:()=>Ce,isPointInsideExtent:()=>Te,isBboxCompatible:()=>Ie,extractCrsFromURN:()=>Le,makeNumericEPSG:()=>Re,makeBboxFromOWS:()=>Me,getPolygonFromCircle:()=>De,default:()=>Ne});var n=r(43034),o=r(23291),i=r(10306),a=r.n(i),u=r(51312),c=r.n(u),l=r(14855),s=r(70370),f=r(88060),p=r.n(f),d=r(31114),g=r.n(d),m=r(54323),y=r(40239),b=r.n(y),v=r(79853),h=r(44903),O=r(29516);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A,C=o.Z,T={vincenty:function(e){for(var t=0,r=0;r<e.length-1;++r){var o=e[r],i=e[r+1],a=w(o,2),u=a[0],c=a[1],l=w(i,2),s=l[0],f=l[1];t+=parseFloat(n.Kl({longitude:u,latitude:c},{longitude:s,latitude:f}))}return t},haversine:function(e){for(var t=0,r=0;r<e.length-1;++r){var o=e[r],i=e[r+1],a=w(o,2),u=a[0],c=a[1],l=w(i,2),s=l[0],f=l[1];t+=parseFloat(n.e8({longitude:u,latitude:c},{longitude:s,latitude:f}))}return t}};function I(e,t){return(r=e).length>=2&&"number"==typeof r[0]&&"number"==typeof r[1]?t(e):e.map((function(e){return I(e,t)}));var r}var L=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function R(e,t,r){if(null===e)return e;var n=(0,l.cloneDeep)(e);return"Feature"===e.type?n.geometry=R(e.geometry,t,r):"FeatureCollection"===e.type?n.features=n.features.map((function(e){return R(e,t,r)})):"GeometryCollection"===e.type?n.geometries=n.geometries.map((function(e){return R(e,t,r)})):t&&t(n),r&&r(n),n}function M(e){return"string"==typeof e||e instanceof String?o.Z.defs(e)?new o.Z.Proj(e):null:e}var D={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},N=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},F=function(e){var t=e;return(0,l.isNumber)(e.x)||(t.x=parseFloat(e.x)),(0,l.isNumber)(e.y)||(t.y=parseFloat(e.y)),t},k=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t&&o.Z.defs(t)?new o.Z.Proj(t):null,a=r&&o.Z.defs(r)?new o.Z.Proj(r):null;if(i&&a){var u=(0,l.isArray)(e)?o.Z.toPoint(e):o.Z.toPoint([e.x,e.y]),s=c()({},t===r?F(u):o.Z.transform(i,a,F(u)),{srs:r});return n?N(s):s}return null},B=["EPSG:900913","EPSG:4326","EPSG:3857"],G=function(e,t,r){return"EPSG:4326"===t?e:r?e.map((function(e){return[k([e[0],e[1]],"EPSG:4326",t),k([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(S(e),[t.x,t.y])}),[])})):[k([e[0],e[1]],"EPSG:4326",t),k([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(S(e),[t.x,t.y])}),[])},U=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:(0,v.Z)(e):null},q=function(e,t){var r=function(e,t){var r="EPSG:4326"!==t?[k([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),k([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(S(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],n=!1;return"EPSG:4326"===t?n=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(n=Math.abs(e.maxx-e.minx)>=40075016.68557849),n?[0,r[1],360,r[3]]:[(r[0]+180)%360,r[1],(r[2]+180)%360,r[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),n=r[2]<r[0];return n?{extent:G([[-180,r[1],r[2]-180,r[3]],[r[0]-180,r[1],180,r[3]]],t,n),isIDL:n}:{extent:G([r[0]-180,r[1],r[2]-180,r[3]],t,n),isIDL:n}},W={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},K=function(e){D=c()({},D,e)},V=function(e){return new o.Z.Proj(e).units||"degrees"},z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),u=Math.sin(r),c=o*a,l=o*u,s=i*a,f=i*u,p=e.x,d=e.y,g=p-c+f,m=p-c-f,y=p+c-f,b=p+c+f,v=d-l-s,h=d-l+s,O=d+l+s,P=d+l-s,_=A.createBBox(Math.min(g,m,y,b),Math.min(v,h,O,P),Math.max(g,m,y,b),Math.max(v,h,O,P));return _},H=function(e,t,r,n){return{minx:e,miny:t,maxx:r,maxy:n}},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",n=t,o=r;"string"==typeof n&&(n=M(n)),"string"==typeof o&&(o=M(o));var i=C(n,o);return R(e,(function(e){e.crs&&delete e.crs,e.coordinates=I(e.coordinates,(function(e){var t=w(e,2),r=t[0],n=t[1];return i.forward([r,n])}))}),(function(e){var t,r;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],r=[-Number.MAX_VALUE,-Number.MAX_VALUE],R(e,(function(e){I(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),r[0]=Math.max(r[0],e[0]),r[1]=Math.max(r[1],e[1])}))})),[t[0],t[1],r[0],r[1]]))}))},J=function(e,t){var r=g()(t).features[0];return 0!==p()(e,r).features.length},Q=function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},Z=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n=(0,l.isArray)(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var i=[];for(var a in n)if(n.hasOwnProperty(a)){var u=A.reproject(n[a],t,r,o);if(!u)return null;var c=u.x,s=u.y;i.push(c),i.push(s)}return i},X=function(e){var t=(0,l.isArray)(e)?{minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}:e,r=t.minx,n=t.miny,o=t.maxx,i=t.maxy;return{type:"Polygon",coordinates:[[[r,n],[r,i],[o,i],[o,n],[r,n]]]}},$=function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},ee=function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},te=function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},re=function(e,t){var r="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[r]?A.getCompatibleSRS(r,t):r},ne=function(e,t){return t[A.getCompatibleSRS(e,t)]},oe=function(){var e={};for(var t in o.Z.defs)o.Z.defs.hasOwnProperty(t)&&(e[t]={label:D[t]||t});return e},ie=function(e,t,r,n){var o=Object.keys(e).reduce((function(r,n){return c()({},-1===t.indexOf(n)?r:_(_({},r),{},E({},n,e[n])))}),{}),i=n.map((function(e){return e.code})),a=Object.keys(r).reduce((function(e,t){return c()({},-1===i.indexOf(t)?e:_(_({},e),{},E({},t,r[t])))}),{});return c()({},o,a)},ae=function(e,t,r){var n=A.reproject(e,r,"EPSG:4326"),o=A.reproject(t,r,"EPSG:4326"),i=n.x*Math.PI/180,a=n.y*Math.PI/180,u=o.x*Math.PI/180,c=o.y*Math.PI/180,l=u-i,s=Math.sin(l)*Math.cos(c),f=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(l);return(180*Math.atan2(s,f)/Math.PI+360)%360},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(T).indexOf(t)?T[t](e):0},ce=function(e,t){var r=e.slice();return t[0]<e[0]&&(r[0]=t[0]),t[2]>e[2]&&(r[2]=t[2]),t[1]<e[1]&&(r[1]=t[1]),t[3]>e[3]&&(r[3]=t[3]),r},le=function(e){var t=this,r=[1/0,1/0,-1/0,-1/0],n=function(e,r){var n=A.getGeoJSONExtent(r);return t.isValidExtent(n)?t.extendExtent(n,e):n};if(e.coordinates){if("Point"===e.type){var o=e.coordinates;r[0]=o[0]-.01*o[0],r[1]=o[1]-.01*o[1],r[2]=o[0]+.01*o[0],r[3]=o[1]+.01*o[1]}return(0,l.chunk)((0,l.flattenDeep)(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),r)}if("GeometryCollection"===e.type)return e.geometries.reduce(n,r);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(n,r);if("Feature"===e.type&&e.geometry)return A.getGeoJSONExtent(e.geometry)}return r},se=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},fe=function(e,t,r,n){var o,i,a,u=Math.PI*(1/r-.5);n&&(u+=n/180*Math.PI);for(var c=[[]],l=0;l<r;l++)o=u+2*l*Math.PI/r,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),c[0].push([i,a]);return c[0].push(c[0][0]),c},pe=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},r=[],n=0;n<e.length-1;++n){var o=e[n],i=e[n+1],a=b()(o),u=b()(i);if(o[0]!==i[0]||o[1]!==i[1]){var c=(0,m.Z)(a,u,t);r=[].concat(S(r),S(c.geometry.coordinates))}}return r},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[(0,l.head)(e),(0,l.last)(e)]:e.length>t?[(0,l.head)(e)].concat(A.transformArcsToLine((0,l.slice)(e,t))):[]},ge=function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},me=function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},ye=function(e,t){if((0,l.head)(B.filter((function(e){return e===t})))){var r=q(e,t),n=r.extent,o=r.isIDL,i=(o?n:[n]).map((function(e){var t=[e[0],e[1]],r=[e[2],e[3]];return[[t,[t[0],r[1]],r,[r[0],t[1]],t]]}));if(o){var a=n[1][0]+(Math.abs(n[0][0]-n[0][2])+Math.abs(n[1][0]-n[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:i,extent:n,center:[a=a>180?a-360:a,(n[0][1]+n[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:i[0],extent:n,center:[(n[0]+n[2])/2,(n[1]+n[3])/2]}}var u=[e.minx,e.miny,e.maxx,e.maxy],c=[u[0],u[1]],s=[u[2],u[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[c,[c[0],s[1]],s,[s[0],c[1]],c]],extent:u,center:[(u[0]+u[2])/2,(u[1]+u[3])/2]}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,r=e.crs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!r)return null;var o=A.getViewportGeometry(t,r),i=o.extent;if(4===i.length)return A.reprojectBbox(i,r,n);var a=i.map((function(e){return e[2]-e[0]})),u=w(a,2),c=u[0],l=u[1];return c>l?A.reprojectBbox(i[0],r,n):A.reprojectBbox(i[1],r,n)},ve=function(e,t){var r=2===e.split(":").length?e.split(":")[1]:"3857";return a().get(t||L(r),null,{timeout:2e3})},he=function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,r=t&&(0,l.last)(t.split(":"));return"WGS 1984"===r||"WGS84"===r?"EPSG:4326":r?"EPSG:"+r:null},Oe=function(e){var t=e.split(" "),r=parseFloat(t[0]),n=parseFloat(t[1]);return!isNaN(r)&&!isNaN(n)&&{x:r,y:n}||null},Pe=function(e,t){var r=t||"EPSG:3857",n=e&&(0,l.isArray)(e)&&(0,l.head)(e.filter((function(e){return e&&e.$&&e.$.SRS===r&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&A.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],r,"EPSG:4326")})));return(0,l.isArray)(n)&&{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]}||null},_e=function(e){return!!o.Z.defs(e)},Ee=function(e){var t=e.lng,r=void 0===t?1:t,n=e.lat;return{lat:void 0===n?1:n,lng:A.normalizeLng(r)}},Se=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=A.getNormalizedLatLon(e),i=k([o.lng,o.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var a=A.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),u=_({left:0,right:0,top:0,bottom:0},r),c={minx:a[0]+u.left*n,miny:a[1]+u.bottom*n,maxx:a[2]-u.right*n,maxy:a[3]-u.top*n},s=A.getViewportGeometry(c,t.projection),f=4===s.extent.length?[S(s.extent)]:S(s.extent);return(0,l.head)(f.map((function(e){return i.x>=e[0]&&i.y>=e[1]&&i.x<=e[2]&&i.y<=e[3]})).filter((function(e){return e})))||!1},we=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=A.getNormalizedLatLon(e),i=k([o.lng,o.lat],"EPSG:4326",t.projection),a=_({left:0,right:0,top:0,bottom:0},r),u={width:(t.size.width-a.right-a.left)*n,height:(t.size.height-a.top-a.bottom)*n},c={minx:i.x-u.width/2-a.left*n,miny:i.y-u.height/2-a.bottom*n,maxx:i.x+u.width/2+a.right*n,maxy:i.y+u.height/2+a.top*n},l=A.getViewportGeometry(c,t.projection);if(4===l.extent.length)return{pos:k([l.extent[0]+t.size.width/2*n,l.extent[1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(l.extent[0][2]-l.extent[0][0])>Math.abs(l.extent[1][2]-l.extent[1][0])){var s=k([l.extent[0][2]-t.size.width/2*n,l.extent[0][3]-t.size.height/2*n],t.projection,"EPSG:4326"),f=_(_({},s),{},{x:s.x+(o.lng>s.x?360:0)});return{pos:f,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:k([l.extent[1][0]+t.size.width/2*n,l.extent[1][1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,i=(0,l.isArray)(r)?r:[r.x,r.y];if((0,l.isNumber)(i[0])&&!isNaN(i[0])&&(0,l.isNumber)(i[1])&&!isNaN(i[1])&&(0,l.isNumber)(t.x)&&!isNaN(t.x)&&(0,l.isNumber)(t.y)&&!isNaN(t.y)){var a=(0,l.isFunction)(e)?e([t.x,t.y>=n?t.y-n:t.y+n]):null,u=a&&((0,l.isArray)(a)?a:[a.x,a.y]);return(0,l.isArray)(u)?Math.sqrt((i[0]-u[0])*(i[0]-u[0])+(i[1]-u[1])*(i[1]-u[1])):o}return o},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,r=void 0===t?"round":t,n=e.value,o=void 0===n?0:n,i=e.maximumFractionDigits,a=void 0===i?0:i;return 0===a&&Math[r]?Math[r](o):o},Ae=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,l.isArray)(e)?{x:e[0],y:e[1]}:e,o=(0,l.isArray)(t)?{x:t[0],y:t[1]}:t,i={x:.5*(n.x+o.x),y:.5*(n.y+o.y)};return r?[i.x,i.y]:i},Ce=function(e){return(0,l.isObject)(e)&&(0,l.isNumber)(e.x)&&(0,l.isNumber)(e.y)?[e.x,e.y]:e},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return(0,O.Z)(U(t),b()([e.lng,e.lat]))},Ie=function(e,t){return(0,h.Z)(e,t)||(0,O.Z)(e,t)||(0,O.Z)(t,e)},Le=function(e){if(e){var t=e.split(":");if("urn"===t[0]&&("ogc"===t[1]||"x-ogc"===t[1])&&"def"===t[2]&&"crs"===t[3]&&(t[4]||t[6])){var r=t[4],n=t[6];return r?"".concat(r,":").concat(n):n}}return null},Re=function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),r=parseInt(t,10);if(r>=1024&&r<=32767)return e;var n=t.replace(" ","").replace(":","").toLowerCase(),o=W[n];return o>=1024&&o<=32767?"EPSG:".concat(o):null},Me=function(e,t){var r=[e[0],e[1]],n=[t[0],t[1]];if(r[1]>n[1]){var o=r;r=n,n=o}if(r[0]>n[0]){var i=r.slice(),a=n.slice();r=[a[0],i[1]],n=[i[0],a[1]]}return[r[0],r[1],n[0],n[1]]},De=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"degrees",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return e&&t?(0,s.Z)(e,t,{steps:n,units:r}):null};const Ne=A={setCrsLabels:K,getUnits:V,reproject:k,getProjectedBBox:z,createBBox:H,reprojectGeoJson:Y,lineIntersectPolygon:J,normalizePoint:N,normalizeLng:Q,reprojectBbox:Z,getCompatibleSRS:$,getEquivalentSRS:ee,getEPSGCode:te,normalizeSRS:re,isAllowedSRS:ne,getAvailableCRS:oe,filterCRSList:ie,calculateAzimuth:ae,calculateDistance:ue,FORMULAS:T,extendExtent:ce,getGeoJSONExtent:le,isValidExtent:se,calculateCircleCoordinates:fe,transformLineToArcs:pe,transformArcsToLine:de,coordsOLtoLeaflet:ge,mergeToPolyGeom:me,getViewportGeometry:ye,getProjUrl:L,getExtentFromViewport:be,fetchProjRemotely:ve,parseURN:he,determineCrs:M,parseString:Oe,getWMSBoundingBox:Pe,isSRSAllowed:_e,getNormalizedLatLon:Ee,isInsideVisibleArea:Se,centerToVisibleArea:we,calculateCircleRadiusFromPixel:xe,roundCoord:je,midpoint:Ae,pointObjectToArray:Ce,getExtentFromNormalized:q,getPolygonFromExtent:U,isPointInsideExtent:Te,isBboxCompatible:Ie,extractCrsFromURN:Le,crsCodeTable:W,makeNumericEPSG:Re,makeBboxFromOWS:Me,getPolygonFromCircle:De}},24357:(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--unknown--";return function(){return e.apply(void 0,arguments).catch((function(e,r){return console.error('Error in epic "'.concat(t,'". Original error:'),e),setTimeout((function(){throw e}),0),r}))}},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return Object.keys(e).map((function(r){return t(e[r],r)}))}},95525:(e,t,r)=>{"use strict";r.r(t),r.d(t,{generateEnvString:()=>n});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.map((function(e){var t=e.name,r=e.value;return"".concat(t,":").concat(r)})).join(";"):""}},36515:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getWpsUrl:()=>N,getNode:()=>G,getGroupNodes:()=>U,getNestedGroupTitle:()=>q,deepChange:()=>W,getSourceId:()=>K,extractTileMatrixFromSources:()=>V,extractTileMatrixSetFromLayers:()=>z,extractSourcesFromLayers:()=>H,extractDataFromSources:()=>Y,getURLs:()=>J,getLayerUrl:()=>Z,getGroupByName:()=>X,getDimension:()=>$,getLayerId:()=>ee,normalizeLayer:()=>te,normalizeMap:()=>re,belongsToGroup:()=>ne,getLayersByGroup:()=>oe,removeEmptyGroups:()=>ie,getNotEmptyGroup:()=>ae,reorderFunc:()=>ue,denormalizeGroups:()=>ce,sortLayers:()=>le,toggleByType:()=>se,sortUsing:()=>fe,splitMapAndLayers:()=>pe,geoJSONToLayer:()=>de,saveLayer:()=>ge,REG_GEOSERVER_RULE:()=>me,setRegGeoserverRule:()=>ye,getRegGeoserverRule:()=>be,findGeoServerName:()=>ve,getCapabilitiesUrl:()=>he,getSearchUrl:()=>Oe,invalidateUnsupportedLayer:()=>Pe,isSupportedLayer:()=>_e,getLayerTitleTranslations:()=>Ee,setCustomUtils:()=>Se,getAuthenticationParam:()=>we,excludeGoogleBackground:()=>xe,creditsToAttribution:()=>je,formatCapabitiliesOptions:()=>Ae,getLayerTitle:()=>Ce,isInsideResolutionsLimits:()=>Te});var n,o=r(51312),i=r.n(o),a=r(75820),u=r.n(a),c=r(55595),l=r.n(c),s=r(15405),f=r.n(s),p=r(20401),d=r.n(p),g=r(22534),m=r.n(g),y=r(10139),b=r.n(y),v=r(87028),h=r.n(v),O=r(19170),P=r.n(O),_=r(37649),E=r.n(_),S=r(9130),w=r.n(S),x=r(58328),j=r.n(x),A=r(36493);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=/\/[\w- ]*geoserver[\w- ]*\//,D=function(e,t){return t.filter((function(t){return(t.group||"Default")===e})).map((function(e){return e.id})).reverse()},N=function(e){return e&&e.wpsUrl||e.search&&e.search.url||e.url},F=function e(t,r){return t.slice(0).reverse().reduce((function(t,n){return t.concat(n.nodes.slice(0).reverse().reduce((function(t,n){return d()(n)?t.concat(e([n],r)):t.concat(function(e,t){return b()(t.filter((function(t){return t.id===e})))}(n,r))}),[]))}),[])},k=function(e,t){return F(e,t)},B=function(e,t){var n=r(86570)("./"+t+"/Layers");return"mapquest"===e.type||"bing"===e.type?n.isSupported(e.type)&&e.apiKey&&"__API_KEY_MAPQUEST__"!==e.apiKey&&!e.invalid:"empty"===e.type||n.isSupported(e.type)&&!e.invalid},G=function e(t,r){return t&&m()(t)?t.reduce((function(t,n){return t||(!n||n.name!==r&&n.id!==r&&n!==r?n&&n.nodes&&n.nodes.length>0?e(n.nodes,r):t:n)}),null):null},U=function e(t){return t&&t.nodes?t.nodes.reduce((function(t,r){var n=[].concat(t);return r.nodes&&(n=t.concat(e(r))),f()(r)?[].concat(L(n),[r]):[].concat(L(n),[r.id])}),[]):[]},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return m()(t)&&b()(t.map((function(t){var r=t.id===e?t:null;if(r)return r.title;var n=G(t.nodes,e);return n?n.title:null})))},W=function e(t,r,n,o){return t&&m()(t)&&t.length>0?t.map((function(t){if(d()(t)){if(t.id===r)return T(T({},t),d()(n)?n:I({},n,o));if(t.nodes)return T(T({},t),{},{nodes:e(t.nodes,r,n,o)})}return t})):[]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.capabilitiesURL||b()(h()(e.url))},V=function(e,t){if(!e||!t)return{};!m()(t.matrixIds)&&d()(t.matrixIds)&&(t.matrixIds=L(Object.keys(t.matrixIds)));var r=K(t),n=t.matrixIds&&t.matrixIds.reduce((function(t,n){var o=e[r]&&e[r].tileMatrixSet&&e[r].tileMatrixSet[n]&&e[r].tileMatrixSet[n].TileMatrix.map((function(e){return{identifier:e["ows:Identifier"],ranges:e.ranges}}))||[];return 0===o.length?i()({},t):i()({},t,I({},n,L(o)))}),{})||null,o=t.tileMatrixSet&&t.matrixIds.map((function(t){return e[r].tileMatrixSet[t]})).filter((function(e){return e}))||null;return o&&n&&{tileMatrixSet:o,matrixIds:n}||{}},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.keys(e).reduce((function(r,n){var o=e[n].reduce((function(e,t){return i()(e,I({},t.id||t.name,{srs:L(Object.keys(t.matrixIds)),matrixIds:i()({},t.matrixIds)}))}),{}),a=e[n].reduce((function(e,t){var r=t.tileMatrixSet.reduce((function(e,t){return i()({},e,I({},t["ows:Identifier"],i()({},t)))}),{}),n=Object.keys(r).reduce((function(e,t){var n=Object.keys(o).filter((function(e){return b()(o[e].srs.filter((function(e){return e===t})))})).map((function(e){return o[e].matrixIds[t]})),a=n[0]&&r[t].TileMatrix.map((function(e,t){return n[0][t]&&n[0][t].ranges?i()({},e,{ranges:n[0][t].ranges}):i()({},e)}));return b()(n)?i()({},e,I({},t,i()({},r[t],{TileMatrix:a}))):i()({},e)}),{});return i()({},e,n)}),{});return i()({},r,I({},n,i()({},t[n]||{},{tileMatrixSet:i()({},r[n]&&r[n].tileMatrixSet||{},a)})))}),i()({},t))||t},H=function(e){var t=e.filter((function(e){return e.tileMatrixSet})).reduce((function(e,t){var r=K(t);return e[r]?i()({},e,I({},r,[].concat(L(e[r]),[t]))):i()({},e,I({},r,[t]))}),{});return z(t)},Y=function(e){if(!e||!e.layers||!m()(e.layers))return null;var t=e.mapInitialConfig&&e.mapInitialConfig.sources&&i()({},e.mapInitialConfig.sources)||{};return P()(t)?L(e.layers):e.layers.map((function(e){var r=V(t,e);return i()({},e,r)}))},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((function(e){return e.split("?")[0]+t}))},Q={},Z=function(e){return m()(e.url)?e.url[0]:e.url},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=b()(t.filter((function(t){return t.name===e})));return r||t.reduce((function(t,r){return t||!!r.nodes&&n.getGroupByName(e,r.nodes)}),void 0)},$=function(e,t){switch(t.toLowerCase()){case"elevation":return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return"elevation"===t.name.toLowerCase()||"depth"===t.name.toLowerCase()?i()({positive:"elevation"===t.name.toLowerCase()},t,{name:"elevation"===t.name.toLowerCase()?t.name:"DIM_"+t.name}):e}),null)}(e);default:return null}},ee=function(e,t){return e&&e.id||e.name+"__"+(t?t.length:Math.random().toString(36).substring(2,15))},te=function(e){return e.id?e:T(T({},e),{},{id:n.getLayerId(e)})},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[function(e){return(e.layers||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return!t})).length>0?T(T({},e),{},{layers:(e.layers||[]).map((function(e){return n.normalizeLayer(e)}))}):e},function(e){return e.groups?e:T(T({},e),{},{groups:{id:"Default",expanded:!0}})}].reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))(e)},ne=function(e){return function(t){return(t.group||"Default")===e||0===(t.group||"").indexOf("".concat(e,"."))}},oe=function(e,t){var r=0,n=e.map((function(e){return i()({},e,{storeIndex:r++})}));return n.reduce((function(e,t){return-1===e.indexOf(t.group||"Default")?e.concat([t.group||"Default"]):e}),[]).filter((function(e){return"background"!==e})).reverse().reduce((function(e,r){var o=r||"Default";return o.split(".").reduce((function(e,r,a,u){var c=o.split(".",a+1).join("."),l=function(e,t){return b()(t.filter((function(t){return d()(t)&&t.id===e})))}(c,e),s=a===u.length-1;return l?s&&(l.nodes=l.nodes.concat(D(c,n))):(l=function(e,t,r,n){return i()({},{id:e,title:(t||"").replace(/\${dot}/g,"."),name:t,nodes:n?D(e,r):[],expanded:!0})}(c,q(c,t)||r,n,s),e.push(l)),l.nodes}),e),e}),[])},ie=function(e){return e.reduce((function(e,t){return e.concat(n.getNotEmptyGroup(t))}),[])},ae=function(e){var t=e.nodes.reduce((function(e,t){return t.nodes?e.concat(n.getNotEmptyGroup(t)):e.concat(t)}),[]);return t.length>0?i()({},e,{nodes:t}):[]},ue=function(e,t){return t.filter((function(e){return"background"===e.group})).concat(k(e,t))},ce=function(e,t){var r=function(e){var t=!0;return e.forEach((function(e){e.visibility||(t=!1)})),t},n=function e(t,n){var o=t.nodes.map((function(t){return d()(t)?e(t,n):n.filter((function(e){return e.id===t}))[0]}));return i()({},t,{nodes:o,visibility:r(o)})},o=e.map((function(e){return i()({},e,{expanded:e.expanded||!1})}));return{flat:o,groups:t.map((function(e){return n(e,o)}))}},le=function(e,t){return t.filter((function(e){return"background"===e.group})).concat(k(e,t))},se=function(e,t){return function(r,n){return t(r,e,n)}},fe=function(e,t){return function(r,n){return t(r,n,e)}},pe=function(e){if(e&&m()(e.layers)){var t=n.getLayersByGroup(e.layers,e.groups);m()(e.groups)&&(t=e.groups.reduce((function(e,t){var r=e;if(t.title){var o={title:t.title,description:t.description,tooltipOptions:t.tooltipOptions,tooltipPlacement:t.tooltipPlacement};r=n.deepChange(r,t.id,o)}return n.deepChange(r,t.id,"expanded",t.expanded)}),[].concat(t)));var r=Y(e);return i()({},e,{layers:{flat:n.reorder(t,r),groups:t}})}return e},de=function(e,t){var r,n=u()(e);return r="FeatureCollection"===e.type?e.features.map((function(e,t){return e.id||(e.id=t),e.geometry&&e.geometry.bbox&&isNaN(e.geometry.bbox[0])&&(e.geometry.bbox=[null,null,null,null]),e})):[w()(T(T({},e),{},{id:j()(e.id)?l()():e.id}),["geometry","type","style","id"])],{type:"vector",visibility:!0,group:"Local shape",id:t,name:e.fileName,hideLoading:!0,bbox:{bounds:{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]},crs:"EPSG:4326"},features:r}},ge=function(e){return i()({id:e.id,features:e.features,format:e.format,thumbURL:e.thumbURL&&"blob"===e.thumbURL.split(":")[0]?void 0:e.thumbURL,group:e.group,search:e.search,source:e.source,name:e.name,opacity:e.opacity,provider:e.provider,description:e.description,styles:e.styles,style:e.style,styleName:e.styleName,availableStyles:e.availableStyles,layerFilter:e.layerFilter,title:e.title,transparent:e.transparent,tiled:e.tiled,type:e.type,url:e.url,bbox:e.bbox,visibility:e.visibility,singleTile:e.singleTile||!1,allowedSRS:e.allowedSRS,matrixIds:e.matrixIds,tileMatrixSet:e.tileMatrixSet,requestEncoding:e.requestEncoding,dimensions:e.dimensions||[],maxZoom:e.maxZoom,maxNativeZoom:e.maxNativeZoom,maxResolution:e.maxResolution,minResolution:e.minResolution,disableResolutionLimits:e.disableResolutionLimits,hideLoading:e.hideLoading||!1,handleClickOnLayer:e.handleClickOnLayer||!1,queryable:e.queryable,featureInfo:e.featureInfo,catalogURL:e.catalogURL,capabilitiesURL:e.capabilitiesURL,useForElevation:e.useForElevation||!1,hidden:e.hidden||!1,origin:e.origin,thematic:e.thematic,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,legendOptions:e.legendOptions,tileSize:e.tileSize,version:e.version},e.params?{params:e.params}:{},e.credits?{credits:e.credits}:{},e.extendedParams?{extendedParams:e.extendedParams}:{},e.localizedLayerStyles?{localizedLayerStyles:e.localizedLayerStyles}:{})},me=M,ye=function(e){M=e},be=function(){return M},ve=function(e){var t=e.url,r=e.regexRule||n.getRegGeoserverRule(),o=m()(t)?t[0]:t;return r.test(o)&&o.match(r)[0]||null},he=function(e){var t,r,o,i=n.findGeoServerName({url:e.url}),a=Z(e);if(i){var u=a.split(i);if(2===u.length){var c=e.name.split(":");2===c.length&&(a=u[0]+i+c[0]+"/"+c[1]+"/"+u[1])}}return t=a,r=T(T({},e.baseParams),e.params),o=Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("&"),-1===t.indexOf("?")?t+"?"+o:t+"&"+o},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.search&&e.search.url||e.url},Pe=function(e,t){return B(e,t)?function(e){return e&&e.invalid?i()({},e,{invalid:!1}):e}(e):i()({},e,{invalid:!0})},_e=function(e,t){return!!B(e,t)},Ee=function(e){return Q.getLayerTitleTranslations?Q.getLayerTitleTranslations(e):e.Title},Se=function(e,t){Q[e]=t},we=function(e){var t=J(m()(e.url)?e.url:[e.url]),r={};return t.forEach((function(t){(0,A.addAuthenticationParameter)(t,r,e.securityToken)})),r},xe=function(e){var t=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.group,n=e.visibility;return"background"===r&&"google"===t&&n})).length>0,r=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"google"!==t})),n=r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.group;return"background"===t}));if(t&&0===n.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visibility;return t})).length){if(n.length>0){var o=E()(r,{group:"background"});return r.map((function(e,t){return t===o?T(T({},e),{},{visibility:!0}):e}))}return[{type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0}].concat(L(r))}return r},je=function(e){var t=e.imageUrl,r=e.link,n=e.title,o=t?'<img src="'.concat(t,'" ').concat(n?'title="'.concat(n,'"'):"",">"):n;return r&&o?'<a href="'.concat(r,'" target="_blank">').concat(o,"</a>"):o},Ae=function(e){return d()(e)?{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}:{}},Ce=function(e){var t=e.title,r=e.name,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return(null==t?void 0:t[n])||(null==t?void 0:t.default)||t||r},Te=function(e,t){if(e.disableResolutionLimits)return!0;var r=e.minResolution||-1/0,n=e.maxResolution||1/0;return void 0===t||t<n&&t>=r};n={getGroupByName:X,getLayerId:ee,normalizeLayer:te,getNotEmptyGroup:ae,getLayersByGroup:oe,deepChange:W,reorder:ue,getRegGeoserverRule:be,findGeoServerName:ve,isInsideResolutionsLimits:Te}},17850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{COMPUTE_BBOX_HOOK:()=>j,DEFAULT_SCREEN_DPI:()=>O,EXTENT_TO_ZOOM_HOOK:()=>E,GET_COORDINATES_FROM_PIXEL_HOOK:()=>C,GET_PIXEL_FROM_COORDINATES_HOOK:()=>A,GOOGLE_MERCATOR:()=>_,METERS_PER_UNIT:()=>P,RESOLUTIONS_HOOK:()=>w,RESOLUTION_HOOK:()=>x,ZOOM_TO_EXTENT_HOOK:()=>S,addRootParentGroup:()=>oe,clearHooks:()=>M,compareMapChanges:()=>fe,createRegisterHooks:()=>pe,default:()=>de,defaultGetZoomForExtent:()=>z,dpi2dpm:()=>D,dpi2dpu:()=>N,executeHook:()=>R,generateNewUUIDs:()=>re,getBbox:()=>Q,getCenterForExtent:()=>J,getCurrentResolution:()=>Y,getGoogleMercatorResolutions:()=>q,getGoogleMercatorScale:()=>k,getGoogleMercatorScales:()=>G,getHook:()=>L,getIdFromUri:()=>ue,getResolutions:()=>W,getResolutionsForScales:()=>U,getScales:()=>K,getSimpleGeomType:()=>ae,getSphericalMercatorScale:()=>F,getSphericalMercatorScales:()=>B,getZoomForExtent:()=>H,getZoomFromResolution:()=>V,groupSaveFormatted:()=>ee,isNearlyEqual:()=>Z,isSimpleGeomType:()=>ie,mapUpdated:()=>X,mergeMapConfigs:()=>ne,parseLayoutValue:()=>ce,prepareMapObjectToCompare:()=>le,registerHook:()=>I,saveMapConfiguration:()=>te,transformExtent:()=>$,updateObjectFieldKey:()=>se});var n=r(14855),o=r(55595),i=r.n(o),a=r(89735),u=r(86226),c=r.n(u),l=(r(76517),r(26068),c()),s=r(36515),f=r(51312),p=r.n(f);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=96,P={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},_={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},E="EXTENT_TO_ZOOM_HOOK",S="ZOOM_TO_EXTENT_HOOK",w="RESOLUTIONS_HOOK",x="RESOLUTION_HOOK",j="COMPUTE_BBOX_HOOK",A="GET_PIXEL_FROM_COORDINATES_HOOK",C="GET_COORDINATES_FROM_PIXEL_HOOK",T={};function I(e,t){T[e]=t}function L(e){return T[e]}function R(e,t,r){var n=L(e);return n?t(n):r?r():null}function M(){T={}}function D(e){return e*(100/2.54)}function N(e,t){var r=(0,a.getUnits)(t||"EPSG:3857");return P[r]*D(e||O)}function F(e,t,r,n,o){return 2*Math.PI*e/(t*Math.pow(r,n)/D(o||O))}function k(e,t){return F(_.RADIUS,_.TILE_WIDTH,_.ZOOM_FACTOR,e,t)}function B(e,t,r,n,o,i){for(var a=[],u=n;u<=o;u++)a.push(F(e,t,r,u,i));return a}function G(e,t,r){return B(_.RADIUS,_.TILE_WIDTH,_.ZOOM_FACTOR,e,t,r)}function U(e,t,r){var n=N(r,t);return e.map((function(e){return e/n}))}function q(e,t,r){return U(G(e,t,r),"EPSG:3857",r)}function W(){return L("RESOLUTIONS_HOOK")?L("RESOLUTIONS_HOOK")():q(0,21,O)}function K(e,t){var r=N(t,e);return W().map((function(e){return e*r}))}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W(),r=t.map((function(t,r){return{diff:Math.abs(t-e),zoom:r}})),o=(0,n.minBy)(r,"diff"),i=o.zoom;return i}function z(e,t,r,n,o,i){var a=e[2]-e[0],u=e[3]-e[1],c=Math.abs(a/t.width),l=Math.abs(u/t.height),s=Math.max(c,l),f=(i||U(G(r,n,o||O),"EPSG:3857",o)).reduce((function(e,t,r){var n=Math.abs(t-s);return n>e.diff?e:{diff:n,zoom:r}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(f,n))}function H(e,t,r,n,o){return L("EXTENT_TO_ZOOM_HOOK")?L("EXTENT_TO_ZOOM_HOOK")(e,t,r,n,o):z(e,t,r,n,o,L("RESOLUTIONS_HOOK")?L("RESOLUTIONS_HOOK")(e,t,r,n,o,D(o||O)):null)}function Y(e,t,r,n){return L("RESOLUTION_HOOK")?L("RESOLUTION_HOOK")(e,t,r,n):q(t,r,n)[e]}function J(e,t){var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return{x:e[0]+r,y:e[1]+n,crs:t}}function Q(e,t){return R("COMPUTE_BBOX_HOOK",(function(r){return r(e,t)}))}var Z=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function X(e,t){var r,o,i,a;return!(!e||(0,n.isEmpty)(e)||!t||(0,n.isEmpty)(t)||Z(null==t||null===(r=t.center)||void 0===r?void 0:r.x,null==e||null===(o=e.center)||void 0===o?void 0:o.x)&&Z(null==t||null===(i=t.center)||void 0===i?void 0:i.y,null==e||null===(a=e.center)||void 0===a?void 0:a.y)&&(null==t?void 0:t.zoom)===(null==e?void 0:e.zoom))}function $(e,t,r,n){var o=(0,a.getUnits)(e);return"ft"===o?{width:r/P.ft,height:n/P.ft}:"us-ft"===o?{width:r/P["us-ft"],height:n/P["us-ft"]}:"degrees"===o?{width:r/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:n/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:r,height:n}}var ee=function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}};function te(e,t,r,o,i,a,u){var c={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},f=t.map((function(e){return(0,s.saveLayer)(e)})),d=r.reduce((function(e,t){return e.concat((0,s.getGroupNodes)(t))}),[].concat(r.map((function(e){return e.id})))).map((function(e){var t=(0,s.getNode)(r,e);return t&&t.nodes?ee(t):null})).filter((function(e){return e})),g=o.filter((function(e){return!!e.thumbnail})),m=(0,s.extractSourcesFromLayers)(f),y=f.map((function(e){return p()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),b=(0,n.findIndex)(y,(function(e){return"annotations"===e.id}));if(-1!==b){var h=y[b].features.map((function(e){return"FeatureCollection"===e.type?v(v({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?l("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?l("properties.geometryGeodesic",null,e):{}}));y[b]=l("features",h,y[b])}return v({version:2,map:p()({},c,{layers:y,groups:d,backgrounds:g,text_search_config:i,bookmark_search_config:a},!(0,n.isEmpty)(m)&&{sources:m}||{})},u)}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.cloneDeep)(e),r=v(v({},(0,n.get)(e,"map.layers",[]).reduce((function(e,t){return v(v({},e),{},h({},t.id,"annotations"===t.id?t.id:i()()))}),{})),(0,n.get)(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return v(v({},e),{},h({},t.id,i()()))}),{}));return l("map.backgrounds",(0,n.get)(e,"map.backgrounds",[]).map((function(e){return v(v({},e),{},{id:r[e.id]})})),l("widgetsConfig",{collapsed:(0,n.mapValues)((0,n.mapKeys)((0,n.get)(e,"widgetsConfig.collapsed",{}),(function(e,t){return r[t]})),(function(e){return v(v({},e),{},{layouts:(0,n.mapValues)(e.layouts,(function(e){return v(v({},e),{},{i:r[e.i]})}))})})),layouts:(0,n.mapValues)((0,n.get)(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return v(v({},e),{},{i:r[e.i]})}))})),widgets:(0,n.get)(e,"widgetsConfig.widgets",[]).map((function(e){return v(v({},e),{},{id:r[e.id],layer:v(v({},(0,n.get)(e,"layer",{})),{},{id:r[(0,n.get)(e,"layer.id")]})})}))},l("map.layers",(0,n.get)(e,"map.layers",[]).map((function(e){return v(v({},e),{},{id:r[e.id]})})),t)))},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return(0,n.pick)(e,(0,n.keys)(e).filter((function(t){return void 0!==e[t]})))}))},o=re(t),i=[].concat(m((0,n.get)(e,"map.backgrounds",[])),m((0,n.get)(o,"map.backgrounds",[]))),a=r((0,n.get)(e,"map.layers",[])),u=r((0,n.get)(o,"map.layers",[])),c=(0,n.find)(a,(function(e){return"annotations"===e.id})),l=(0,n.find)(u,(function(e){return"annotations"===e.id})),s=[].concat(m(u.filter((function(e){return"annotations"!==e.id}))),m(a.filter((function(e){return"annotations"!==e.id}))),m(c||l?[v(v(v({},c||{}),l||{}),{},{features:[].concat(m((0,n.get)(c,"features",[])),m((0,n.get)(l,"features",[])))})]:[])),f=s.filter((function(e){return"background"===e.group})),p=(0,n.findIndex)(f,(function(e){return e.visibility})),d=(0,n.get)(e,"map.sources",{}),g=(0,n.get)(o,"map.sources",{}),y=v(v({},d),g),b=(0,n.get)(e,"widgetsConfig",{}),O=(0,n.get)(o,"widgetsConfig",{});return v(v(v({},o),e),{},{catalogServices:v(v({},(0,n.get)(e,"catalogServices",{})),{},{services:v(v({},(0,n.get)(e,"catalogServices.services",{})),(0,n.get)(o,"catalogServices.services",{}))}),map:v(v(v({},o.map),e.map),{},{backgrounds:i,groups:(0,n.uniqWith)([].concat(m((0,n.get)(e,"map.groups",[])),m((0,n.get)(o,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(m(f.slice(0,p+1)),m(f.slice(p+1).map((function(e){return v(v({},e),{},{visibility:!1})}))),m(s.filter((function(e){return"background"!==e.group})))),sources:(0,n.isEmpty)(y)?void 0:y}),widgetsConfig:{collapsed:v(v({},b.collapsed),O.collapsed),layouts:(0,n.uniq)([].concat(m((0,n.keys)(b.layouts)),m((0,n.keys)(O.layouts)))).reduce((function(e,t){return v(v({},e),{},h({},t,[].concat(m((0,n.get)(b,"layouts.".concat(t),[])),m((0,n.get)(O,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(m((0,n.get)(b,"widgets",[])),m((0,n.get)(O,"widgets",[])))},timelineData:v(v({},(0,n.get)(e,"timelineData",{})),(0,n.get)(o,"timelineData",{})),dimensionData:v(v({},(0,n.get)(e,"dimensionData",{})),(0,n.get)(o,"dimensionData",{}))})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",r=(0,n.get)(e,"map.groups",[]),o=r.filter((function(e){return"Default"!==e.id})),a=(0,n.find)(r,(function(e){return"Default"===e.id})),u=a&&{id:i()(),title:t,expanded:a.expanded},c=a?[].concat(m(o.map((function(e){var t=e.id,r=g(e,["id"]);return v({id:"".concat(u.id,".").concat(t)},r)}))),[u]):o;return v(v({},e),{},{map:v(v({},e.map),{},{groups:c,layers:(0,n.get)(e,"map.layers",[]).map((function(e){var t,r=e.group;return v(v({},g(e,["group"])),{},{group:!a||"background"===r||"Default"!==r&&r?a&&(null===(t=(0,n.find)(c,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===r})))||void 0===t?void 0:t.id)||r:u.id})}))})})};function ie(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;case"Point":case"Circle":case"LineString":case"Polygon":default:return!0}}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":return e;case"MultiPoint":case"Marker":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection";case"Text":return"Point";default:return e}}var ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,r=decodeURIComponent(e),n=t.exec(r);return n&&n.length&&n.length>1?n[1]:null},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,n.isString)(e)&&-1!==e.indexOf("%")?parseFloat((0,n.trim)(e))*t/100:(0,n.isNumber)(e)?e:0},le=function e(t){var r=["apiKey","time","args","fixed"],n=function(e){return r.reduce((function(t,r){return t||e===r}),!1)};Object.keys(t).forEach((function(r){var o=t[r],i=d(o);"object"!==i||null===o||n(r)?"undefined"!==i&&o&&!n(r)||delete t[r]:(e(o),Object.keys(o).length||delete t[r])}))},se=function(e,t,r){e[t]&&(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],o=(0,n.pick)((0,n.cloneDeep)(e),r),i=(0,n.pick)((0,n.cloneDeep)(t),r);return se(o.map,"text_serch_config","text_search_config"),se(i.map,"text_serch_config","text_search_config"),le(o),le(i),(0,n.isEqual)(o,i)},pe=function(){var e={};return{registerHook:function(t,r){e[t]=r},getHook:function(t){return e[t]},executeHook:function(t,r,n){var o=e[t];return o?r(o):n?n():null}}};const de={createRegisterHooks:pe,EXTENT_TO_ZOOM_HOOK:E,RESOLUTIONS_HOOK:w,RESOLUTION_HOOK:x,COMPUTE_BBOX_HOOK:j,GET_PIXEL_FROM_COORDINATES_HOOK:A,GET_COORDINATES_FROM_PIXEL_HOOK:C,DEFAULT_SCREEN_DPI:O,ZOOM_TO_EXTENT_HOOK:S,registerHook:I,getHook:L,dpi2dpm:D,getSphericalMercatorScales:B,getSphericalMercatorScale:F,getGoogleMercatorScales:G,getGoogleMercatorResolutions:q,getGoogleMercatorScale:k,getResolutionsForScales:U,getZoomForExtent:H,defaultGetZoomForExtent:z,getCenterForExtent:J,getResolutions:W,getScales:K,getBbox:Q,mapUpdated:X,getCurrentResolution:Y,transformExtent:$,saveMapConfiguration:te,generateNewUUIDs:re,mergeMapConfigs:ne,addRootParentGroup:oe,isSimpleGeomType:ie,getSimpleGeomType:ae,getIdFromUri:ue,parseLayoutValue:ce,prepareMapObjectToCompare:le,updateObjectFieldKey:se,compareMapChanges:fe,clearHooks:M}},59766:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{bh:()=>getMonitoredState});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24852),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),object_assign__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51312),object_assign__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(object_assign__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14855),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(71703),react_redux__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_3__),url__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72500),url__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_4__),lodash_curry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70015),lodash_curry__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_curry__WEBPACK_IMPORTED_MODULE_5__),redux_observable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1376),redux_observable__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(redux_observable__WEBPACK_IMPORTED_MODULE_6__),redux__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(70913),_EpicsUtils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(24357);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function loadScript(e){return new Promise((function(t,r){var n,o=document.createElement("script"),i=!1;o.type="text/javascript",o.src=e,o.async=!0,o.onerror=function(e){r(e,o)},o.onload=o.onreadystatechange=function(){i||this.readyState&&"complete"!==this.readyState||(i=!0,t())};var a=null===(n=document.getElementsByTagName("script"))||void 0===n?void 0:n[0];a?a.parentElement.insertBefore(o,a):document.head.appendChild(o)}))}var dynamicFederation=function(e,t){return new Promise((function(e){return e(__webpack_require__.I&&__webpack_require__.I("default"))})).then((function(){return window[e].init(__webpack_require__.S.default)})).then((function(){return window[e].get(t).then((function(e){return e()}))}))},defaultMonitoredState=[{name:"mapType",path:"maptype.mapType"},{name:"user",path:"security.user"}],getFromPlugins=lodash_curry__WEBPACK_IMPORTED_MODULE_5___default()((function(e,t){return Object.keys(t).map((function(r){return t[r][e]})).reduce((function(e,t){return _objectSpread(_objectSpread({},e),t)}),{})})),getReducers=getFromPlugins("reducers"),getEpics=getFromPlugins("epics"),combineReducers=function(e,t){var r=getReducers(e);return(0,redux__WEBPACK_IMPORTED_MODULE_7__.UY)(_objectSpread(_objectSpread({},t),r))},combineEpics=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=_objectSpread(_objectSpread({},getEpics(e)),t);return redux_observable__WEBPACK_IMPORTED_MODULE_6__.combineEpics.apply(void 0,_toConsumableArray((0,_EpicsUtils__WEBPACK_IMPORTED_MODULE_8__.f)(n,r)))},filterState=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.memoize)((function(e,t){return t.reduce((function(t,r){return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(t,_defineProperty({},r.name,(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,r.path)))}),{})}),(function(e,t){return t.reduce((function(t,r){return t+JSON.stringify((0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,r.path))}),"")})),getPluginSimpleName=function(e){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.endsWith)(e,"Plugin")&&e.substring(0,e.length-6)||e},normalizeName=function(e){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.endsWith)(e,"Plugin")&&e||e+"Plugin"},getPluginConfiguration=function(e,t){var r=getPluginSimpleName(t);return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.head)(e.filter((function(e){return e.name===r||e===r})).map((function(e){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isString)(e)?{name:e}:e})))||{}},parseExpression=function parseExpression(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},value=arguments.length>2?arguments[2]:void 0,searchExpression=/^\{(.*)\}$/,expression=searchExpression.exec(value),dispatch=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){return state("store").dispatch(e.apply(null,[e].concat(r)))}},request=url__WEBPACK_IMPORTED_MODULE_4___default().parse(location.href,!0);return null!==expression?eval(expression[1]):value},handleExpression=function(e,t,r){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isString)(r)&&0===r.indexOf("{")?parseExpression(e,t,r):r},filterDisabledPlugins=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,"cfg.disablePluginIf")||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,"plugin.disablePluginIf");return!(n&&!(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,"cfg.skipAutoDisable")&&handleExpression(t,r.requires,n))},isContainedInList=function(e,t,r,n){return e&&t&&-1!==handleExpression(r,n,t).indexOf(e)},showIn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return(isContainedInList(o,r.showIn,e,t)||isContainedInList(n,r.showIn,e,t)||!r.showIn&&i)&&!(isContainedInList(o,r.hideFrom,e,t)||isContainedInList(n,r.hideFrom,e,t))},isMapStorePlugin=function(e){var t;return e.loadPlugin||e.displayName||(null===(t=e.prototype)||void 0===t?void 0:t.isReactComponent)||e.isMapStorePlugin},getPluginImplementation=function(e,t){return isMapStorePlugin(e)?e:e(t)},includeLoaded=function(e,t,r,n){if(t[e]){var o=t[e],i=getPluginImplementation(o.component||o,n);return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(i,r,{loadPlugin:void 0},_objectSpread({},o.containers))}return r},getPriority=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(t,r+".priority")||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(e,r+".priority")||0},getMorePrioritizedContainer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return r.reduce((function(r,n){var o=n.name||n,i=getPriority(e,t,o);return i>r.priority?{plugin:{name:o,impl:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e[o],t[o])},priority:i}:r}),{plugin:null,priority:n})},parsePluginConfig=function e(t,r,n){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isArray)(n)?n.map((function(n){return e(t,r,n)})):(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?Object.keys(n).reduce((function(o,i){var a=n[i];return object_assign__WEBPACK_IMPORTED_MODULE_1___default()(o,_defineProperty({},i,e(t,r,a)))}),{}):parseExpression(t,r,n)},canContain=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t[e]||r[e]||!1},isMorePrioritizedContainer=function(e,t,r,n){return null===getMorePrioritizedContainer(e,t,r,n).plugin},isValidConfiguration=function(e){return e&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isString)(e)||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)&&e.name},executeDeferredProp=function(e,t,r){return e&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isFunction)(e[r])?_objectSpread(_objectSpread({},e),{},_defineProperty({},r,e[r](t))):e},getPluginItems=function e(t,r,n,o,i,a,u,c){return Object.keys(r).map((function(e){var t=getPluginConfiguration(n,e);return{name:e,impl:executeDeferredProp(includeLoaded(getPluginSimpleName(e),u,r[e]),t,o),config:t}})).filter((function(e){return isValidConfiguration(e.config)})).filter((function(e){return canContain(o,e.impl,e.config.override)})).filter((function(e){return showIn(t,r.requires,e.config,o,i,a)})).filter((function(e){return isMorePrioritizedContainer(e.impl,e.config.override,n,getPriority(e.impl,e.config.override,o))})).map((function(i){var a=getPluginSimpleName(i.name),c=includeLoaded(a,u,i.impl),l=object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(c,o+".impl")||(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(c,o),(0,lodash__WEBPACK_IMPORTED_MODULE_2__.get)(i.config,"override."+o));return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({name:a},l,{cfg:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},c.cfg||{},parsePluginConfig(t,r.requires,i.config.cfg||{})||void 0)},{plugin:c,items:e(t,r,n,a,null,!0,u)})})).filter((function(e){return filterDisabledPlugins(e,t,r)})).filter((function(e){return!c||c(e)}))},pluginsMergeProps=function(e,t,r){var n=r.pluginCfg,o=_objectWithoutProperties(r,["pluginCfg"]);return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},o,e,t,n||{})},importPlugin=function(e){return dynamicFederation(e,"./plugin")},getMonitoredState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return filterState(e,defaultMonitoredState.concat(t))},mapPluginsPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var r=t.cfg&&t.cfg.containerPosition||"bodyPlugins";return _objectSpread(_objectSpread({},e),{},_defineProperty({},r,e[r]?[].concat(_toConsumableArray(e[r]),[t]):[t]))}),{})},getPlugins=function(e){return Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},e,(0,lodash__WEBPACK_IMPORTED_MODULE_2__.omit)(t,"reducers","epics"))}),{})},getPluginDescriptor=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.name:n,a=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.id:null,u=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.stateSelector:a||void 0,c=!(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)||void 0===n.isDefault||n.isDefault,l=((0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?n.name:n)+"Plugin",s=t[l];return s?{id:a||i,name:i,impl:includeLoaded(i,o,getPluginImplementation(s,u),u),cfg:object_assign__WEBPACK_IMPORTED_MODULE_1___default()({},s.cfg||{},(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(n)?parsePluginConfig(e,t.requires,n.cfg):{}),items:getPluginItems(e,t,r,i,a,c,o)}:null},getConfiguredPlugin=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(e){var n=t[e.name]||!e.plugin.loadPlugin&&e.plugin,o=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)?e.id:null,i=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)?e.stateSelector:o||void 0,a=getPluginImplementation(n,i),u=function(t){return a?react__WEBPACK_IMPORTED_MODULE_0___default().createElement(a,_extends({key:e.id},t,e.cfg,{pluginCfg:e.cfg,items:e.items||[]})):r};return u.loaded=!!n,u}return e},setRefToWrappedComponent=function(e){return function(t){t&&(window["".concat(e,"Plugin")]=t)}},connect=function(e,t,r,n){return(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.connect)(e,t,r||pluginsMergeProps,n)},createPlugin=function(e,t){var r,n=t.component,o=t.options,i=void 0===o?{}:o,a=t.containers,u=void 0===a?{}:a,c=t.reducers,l=void 0===c?{}:c,s=t.epics,f=void 0===s?{}:s,p=t.lazy,d=void 0!==p&&p,g=t.enabler,m=void 0===g?function(){return!0}:g,y=t.loader,b=normalizeName(e),v=d?{loadPlugin:function(e){y().then((function(t){var r=t.default||t;e(object_assign__WEBPACK_IMPORTED_MODULE_1___default()(r,{isMapStorePlugin:!0}))}))},enabler:m}:object_assign__WEBPACK_IMPORTED_MODULE_1___default()(n,{isMapStorePlugin:!0});return _defineProperty(r={},b,object_assign__WEBPACK_IMPORTED_MODULE_1___default()(v,u,i)),_defineProperty(r,"reducers",l),_defineProperty(r,"epics",f),r},loadPlugin=function(e,t){return loadScript(e).then((function(){return importPlugin(t)})).then((function(e){return{name:t,plugin:e}}))},__WEBPACK_DEFAULT_EXPORT__={combineReducers,combineEpics,filterState,filterDisabledPlugins,getMonitoredState,mapPluginsPosition,getPlugins,getPluginDescriptor,getPluginItems,getConfiguredPlugin,setRefToWrappedComponent,connect,createPlugin,importPlugin,loadPlugin,handleExpression,getMorePrioritizedContainer,getPluginConfiguration,isMapStorePlugin}},36493:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addAuthenticationParameter:()=>D,addAuthenticationToSLD:()=>k,addAuthenticationToUrl:()=>N,cleanAuthParamsFromURL:()=>B,clearNilValuesForParams:()=>F,default:()=>G,findUserAttribute:()=>A,findUserAttributeValue:()=>C,getAuthKeyParameter:()=>M,getAuthenticationMethod:()=>L,getAuthenticationRule:()=>R,getAuthenticationRules:()=>T,getBasicAuthHeader:()=>S,getRefreshToken:()=>x,getSecurityInfo:()=>_,getToken:()=>w,getUser:()=>E,getUserAttributes:()=>j,isAuthenticationActivated:()=>I,setStore:()=>P});var n=r(59154),o=r(72500),i=r.n(o),a=r(51312),u=r.n(a),c=r(10139),l=r.n(c),s=r(58328),f=r.n(s),p=r(22534),d=r.n(p),g=(r(70913),r(46569),r(54863),r(1376),r(19170)),m=r.n(g);r(49977);var y="persisted.reduxStore",b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"persisted.reduxStore";return n.ZP.getConfigProp(e)||{}};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;n.ZP.setConfigProp(t,e)}(e)}function _(){return(!m()(b(e))&&(null===(t=b(e))||void 0===t?void 0:t.getState())||{}).security||{};var e,t}function E(){var e;return null===(e=_())||void 0===e?void 0:e.user}function S(){var e;return null===(e=_())||void 0===e?void 0:e.authHeader}function w(){var e;return null===(e=_())||void 0===e?void 0:e.token}function x(){var e;return null===(e=_())||void 0===e?void 0:e.refresh_token}function j(e){var t=e||E();if(!t||!t.attribute)return[];var r=t.attribute;return d()(r)?r:[r]}function A(e){var t=j();return t&&e?l()(t.filter((function(t){return t.name&&t.name.toLowerCase()===e.toLowerCase()}))):null}function C(e){var t=A(e);return null==t?void 0:t.value}function T(){return n.ZP.getConfigProp("authenticationRules")||[]}function I(){return n.ZP.getConfigProp("useAuthenticationRules")||!1}function L(e){var t=l()(T().filter((function(t){return t&&t.urlPattern&&e.match(new RegExp(t.urlPattern,"i"))})));return null==t?void 0:t.method}function R(e){return l()(T().filter((function(t){return t&&t.urlPattern&&e.match(new RegExp(t.urlPattern,"i"))})))}function M(e){var t,r=R(e);return null!==(t=null==r?void 0:r.authkeyParamName)&&void 0!==t?t:"authkey"}function D(e,t,r){if(!e||!I())return t;switch(L(e)){case"authkey":var n=f()(r)?w():r;if(!n)return t;var o=M(e);return u()(t||{},O({},o,n));case"test":var i=R(e),a=i?i.token:"",c=M(e);return u()(t||{},O({},c,a));default:return t}}function N(e){if(!e||!I())return e;var t=i().parse(e,!0);return t.query=D(e,t.query),delete t.search,i().format(t)}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){return f()(e[r])?t:h(h({},t),{},O({},r,e[r]))}),{})}function k(e,t){if(e.SLD){var r=i().parse(e.SLD,!0),n=D(e.SLD,r.query,t.securityToken);return u()({},e,{SLD:i().format(u()({},r,{query:n,search:void 0}))})}return e}function B(e){return n.ZP.filterUrlParams(e,[M(e)].filter((function(e){return e})))}const G={setStore:P,getSecurityInfo:_,getUser:E,getBasicAuthHeader:S,getToken:w,getRefreshToken:x,getUserAttributes:j,findUserAttribute:A,findUserAttributeValue:C,getAuthenticationRules:T,isAuthenticationActivated:I,getAuthenticationMethod:L,getAuthenticationRule:R,addAuthenticationToUrl:N,addAuthenticationParameter:D,clearNilValuesForParams:F,addAuthenticationToSLD:k,getAuthKeyParameter:M,cleanAuthParamsFromURL:B}},15442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{optionsToVendorParams:()=>N});var n=r(89223),o=r(67451),i=r(57784),a=r(70831),u=r(96191),c=r.n(u),l=r(97240),s=r.n(l),f=r(89735),p=r(14855);function d(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v,h=function(e){return e&&e.replace?e.replace(/\'/g,"''"):e},O=function(e,t){return!(0,p.isNil)(e)&&"isNull"!==t||!(0,p.isUndefined)(e)&&"isNull"===t},P=function(e){return'"'+e+'"'},_=function(e){return e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0"},E={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},S=function(e,t,r,n){var o;if("><"===t){if(r.startDate&&r.endDate){var a=r.startDate.toISOString?r.startDate.toISOString():r.startDate,u=r.endDate.toISOString?r.endDate.toISOString():r.endDate;o=i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+a+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+u+"</"+n+":Literal></"+n+":UpperBoundary>")}}else if(r.startDate){var c=r.startDate.toISOString?r.startDate.toISOString():r.startDate;o=i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>"+c+"</"+n+":Literal>")}return o},w=function(e,t,r,n){var o;return O(r,t)&&(o="isNull"===t?i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag):"="===t?i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>"):i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>*"+r+"*</"+n+":Literal>")),o},x=function(e,t,r,n){var o="";return O(r,t)&&"="===t&&""!==r&&(o=i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},j=function(e,t,r,n){var o;if("><"===t)(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(o=i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+r.lowBound+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+r.upBound+"</"+n+":Literal></"+n+":UpperBoundary>")):o=i.ogcComparisonOperators["<="](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>"+r.upBound+"</"+n+":Literal>"):o=i.ogcComparisonOperators[">="](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>"+r.lowBound+"</"+n+":Literal>");else{var a=(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;(0,p.isNil)(a)||(o=i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>"+a+"</"+n+":Literal>"))}return o},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName,r=e.geometryName,n=e.cqlFilter,o=void 0===n?"INCLUDE":n;return"queryCollection('".concat(t,"', '").concat(r,"','").concat(h(o),"')")},C=function(e){return"collectGeometries(".concat(e,")")},T=function(e,t,r){var n,u,l,f,d,g,m,b=[];if(e.filterFields&&e.filterFields.length>0)""!==(n=e.groupFields&&e.groupFields.length>0?v.processOGCFilterGroup(e.groupFields[0],e,r):v.processOGCFilterFields(null,e,r))&&b.push(n);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){var h=i.ogcLogicalOperators.AND(r,e.simpleFilterFields.map((function(e){return function(e,t){var r="";switch(e.type){case"date":r=S(e.attribute,e.operator,e.values,t);break;case"number":r=j(e.attribute,e.operator,e.values,t);break;case"string":r=w(e.attribute,e.operator,e.values,t);break;case"boolean":r=x(e.attribute,e.operator,e.values,t);break;case"list":e.values&&e.values.length>0&&(r=e.values.reduce((function(r,n){var o=null===n||"null"===n?"isNull":"=";return r+w(e.attribute,o,n,t)}),""),r=i.ogcLogicalOperators.OR(t,r))}return r}(e,r)})).join(""));b.push(h)}if((0,p.isArray)(e.spatialField)?(f=(0,p.find)(e.spatialField,(function(e){return"BBOX"===e.operation})))||(l=e.spatialField):e.spatialField&&("BBOX"===e.spatialField.operation?f=e.spatialField:l=[e.spatialField]),f){if((0,p.isArray)(f.geometry&&f.geometry.extent[0])){var O=f.geometry.extent.reduce((function(e,n){var o=Object.assign({},f);return f.geometry.extent=n,e+v.processOGCSpatialFilter(t,o,r)}),"");u=i.ogcLogicalOperators.OR(r,O)}b.push(u)}else if(l&&(l=l.filter((function(e){return e&&e.geometry&&e.operation}))).length>0){var P=l.map((function(e){return v.processOGCSpatialFilter(t,e,r)})).join("");u=l.length>1?i.ogcLogicalOperators[e.spatialFieldOperator||"AND"](r,P):P,b.push(u)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){var _=y(y({},e.crossLayerFilter),{},{attribute:e.crossLayerFilter.attribute});Array.isArray()?_.forEach((function(e){return b.push(v.processOGCCrossLayerFilter(e,r))})):b.push(v.processOGCCrossLayerFilter(_,r))}return e.options&&e.options.cqlFilter&&b.push((d=e.options.cqlFilter,g={filterNS:r,wfsVersion:t,gmlVersion:(0,o.wfsToGmlVersion)(t)},m=s()(g),c()(m)((0,a.read)(d)))),b},I=function(e){var t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}var r,n,o=[];if(t.filterFields&&t.filterFields.length>0)(r=v.processCQLFilterGroup(t.groupFields[0],t))&&o.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){var i=t.simpleFilterFields.reduce((function(e,t){var r=e,n=v.processCQLSimpleFilterField(t);return!1!==n&&(r=e.length>0?e+" AND ("+n+")":"("+n+")"),r}),"");i=i.length>0?i:"INCLUDE",o.push(i)}if(t.spatialField&&(n=v.processCQLSpatialFilter(t))&&o.push(n),t.crossLayerFilter){var a=t.crossLayerFilter,u=a.operation,c=a.attribute,l=a.collectGeometries&&a.collectGeometries.queryCollection;if(u&&c&&l){var s=l.typeName,f=l.geometryName,p=v.getCrossLayerCqlFilter(a),d=C(A({typeName:s,geometryName:f,cqlFilter:p}));o.push("".concat(u,"(").concat(c,",").concat(d,")"))}}return o.length?"("+(o.length>1?o.join(") AND ("):o[0])+")":null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||(0,p.isArray)(e.spatialField)&&(0,p.findIndex)(e.spatialField,(function(e){return e.operation&&e.geometry}))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}v={processOGCFilterGroup:function(e,t,r){var n=v.processOGCFilterFields(e,t,r),o=v.findSubGroups(e,t.groupFields);return o.length>0&&o.forEach((function(e){n+=v.processOGCFilterGroup(e,t,r)})),""!==n?i.ogcLogicalOperators[e.logic](r,n):""},processOGCFilterFields:function(e,t,r){var n=e?t.filterFields.filter((function(t){return t.groupId===e.id&&O(t.value,t.operator)})):t.filterFields.filter((function(e){return O(e.value,e.operator)}));return n.length?n.reduce((function(e,t){var n;switch(t.type){case"date":case"date-time":case"time":n=S(t.attribute,t.operator,t.value,r);break;case"number":n=j(t.attribute,t.operator,t.value,r);break;case"string":n=w(t.attribute,t.operator,t.value,r);break;case"boolean":n=x(t.attribute,t.operator,t.value,r);break;case"list":n=function(e,t,r,n){var o;return(0,p.isNil)(r)||(o=i.ogcComparisonOperators[t](n,E[n].startTag+e+E[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o}(t.attribute,t.operator,t.value,r)}return"isNull"===t.operator&&(n=w(t.attribute,t.operator,t.operator,r)),n&&e.push(n),e}),[]).join(""):""},processOGCCrossLayerFilter:function(e,t){var r=t||"ogc",n=E[r].startTag+e.attribute+E[r].endTag;if(e.collectGeometries){var o=v.getCrossLayerCqlFilter(e);n+='<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection">'+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.typeName,"</ogc:Literal>")+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.geometryName,"</ogc:Literal>")+"<ogc:Literal><![CDATA[".concat(o,"]]></ogc:Literal>")+"</ogc:Function></ogc:Function>"}return"DWITHIN"===e.operation&&(n+="<"+r+':Distance units="m">'+(e.distance||0)+"</"+r+":Distance>"),i.ogcSpatialOperators[e.operation](r,n)},getGetFeatureBase:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=_(e),a="<wfs:GetFeature ";switch(a+=n?'outputFormat="'+n+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=o.viewParams?' viewParams="'.concat(o.viewParams,'" '):"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=r&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},toOGCFilterParts:T,findSubGroups:function(e,t){return t.filter((function(t){return t.groupId===e.id}))},toCQLFilter:I,getCrossLayerCqlFilter:function(e){return(0,p.get)(e,"collectGeometries.queryCollection.cqlFilter")||((0,p.get)(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&((0,p.get)(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&v.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE"},processCQLFilterGroup:function(e,t){var r="NOR"===e.logic?y(y({},e),{},{logic:"AND",negateAll:!0}):e,n=v.processCQLFilterFields(r,t),o=v.findSubGroups(r,t.groupFields);if(o.length>0){var i=o.map((function(e){return(r.negateAll?"NOT (":"(")+v.processCQLFilterGroup(e,t)+")"})).join(" "+r.logic+" ");return n?[n,i].join(" "+r.logic+" "):i}return n},processCQLSimpleFilterField:function(e){var t=!1;switch(e.type){case"date":t=v.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=v.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=v.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=v.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){var r=!1,n=e.values.reduce((function(e,t){return null===t||"null"===t?r=!0:e.push("'"+t+"'"),e}),[]);t=n.length>0?e.attribute+" IN("+n.join(",")+")":t,r&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},processCQLSpatialFilter:function(e){var t=((0,p.isArray)(e.spatialField)?e.spatialField:[e.spatialField]).filter((function(e){return e&&e.geometry&&e.operation})),r="";return t.forEach((function(n,o){if(r+=n.operation+'("'+n.attribute+'",',n.collectGeometries&&n.collectGeometries.queryCollection)r+=C(A(n.collectGeometries.queryCollection));else{var i=n.geometry.projection||"";i=2===i.split(":").length?"SRID="+i.split(":")[1]+";":"",r+=i+v.getCQLGeometryElement(n.geometry.coordinates,n.geometry.type)}r+=")",o<t.length-1&&(r+=" ".concat(e.spatialFieldOperator||"AND"," "))})),r},processCQLFilterFields:function(e,t){var r=t.filterFields.filter((function(t){return t.groupId===e.id})),n=[];return r&&(r.forEach((function(t){var r;switch(t.type){case"date":case"time":case"date-time":r=v.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=v.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=v.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=v.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=v.cqlListField(t.attribute,t.operator,t.value)}r&&n.push(e.negateAll?"NOT ("+r+")":r)})),n=n.join(" "+e.logic+" ")),n},getCQLGeometryElement:function(e,t){var r=t+"(";switch(t){case"Point":r+=e.join(" ");break;case"MultiPoint":e.forEach((function(t,n){r+=t.join(" "),r+=n<e.length-1?", ":""}));break;case"Polygon":e.forEach((function(t,o){r+="(";var i=(0,n.closePolygon)(t).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach((function(t,o){r+="(",t.forEach((function(e,o){r+="(";var i=(0,n.closePolygon)(e).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<t.length-1?", ":""})),r+=")",r+=o<e.length-1?", ":""}))}return r+=")"},cqlStringField:function(e,t,r){var n,o=P(e);return(0,p.isNil)(r)||(n="isNull"===t?"isNull("+o+")=true":"="===t?o+t+"'"+h(r)+"'":"ilike"===t?"strToLowerCase("+o+") LIKE '%"+h(r).toLowerCase()+"%'":o+" LIKE '%"+h(r)+"%'"),n},cqlDateField:function(e,t,r){var n;return"><"===t?r.startDate&&r.endDate&&(n="("+e+">='"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"' AND "+e+"<='"+(r.endDate.toISOString?r.endDate.toISOString():r.endDate)+"')"):r.startDate&&(n=e+t+"'"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"'"),n},cqlNumberField:function(e,t,r){var n,o=P(e);if("><"===t)(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?(0,p.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(n="("+o+">='"+r.lowBound+"' AND "+o+"<='"+r.upBound+"')"):n="("+o+"<='"+r.upBound+"')":n="("+o+">='"+r.lowBound+"')";else{var i=(0,p.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;(0,p.isNil)(i)||(n=o+" "+t+" '"+i+"'")}return n},cqlBooleanField:function(e,t,r){var n="";return(0,p.isNil)(r)||""===r||"="===t&&(n='"'+e+'"'+t+"'"+r+"'"),n},cqlListField:function(e,t,r){return v.cqlStringField(e,t,r)},toOGCFilter:function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{n=t instanceof Object?t:JSON.parse(t)}catch(e){return e}var l=_(r||"2.0"),s="2.0"===l?"fes":"ogc",f=v.getGetFeatureBase(l,n.pagination,i,a,t&&t.options),p=v.toOGCFilterParts(n,l,s),d="";return p.length>0&&(d="<"+s+":Filter>",1===p.length?d+=p[0]:(d+="<"+s+":And>",p.forEach((function(e){d+=e})),d+="</"+s+":And>"),d+="</"+s+":Filter>"),f+="<wfs:Query ".concat("2.0"===l?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==c&&'srsName="'.concat(c,'"')||"",">"),f+=d,u&&(f+=u.map((function(e){return E[s].startTag+e+E[s].endTag})).join("")),o&&o.sortBy&&o.sortOrder&&(f+="<"+s+":SortBy><"+s+":SortProperty>"+E[s].startTag+o.sortBy+E[s].endTag+"<"+s+":SortOrder>"+o.sortOrder+"</"+s+":SortOrder></"+s+":SortProperty></"+s+":SortBy>"),f+"</wfs:Query></wfs:GetFeature>"},reprojectFilterInNativeCrs:function(e,t){var r,n=e.spatialField.geometry.projection,o=e.spatialField.geometry.center,i=e.spatialField.geometry.radius,a=(0,f.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,u=o&&[(r=(0,f.reproject)(o,n,t)).x,r.y],c=i&&(0,f.reproject)([i,0],n,t).x;return y(y({},e),{},{spatialField:y(y({},e.spatialField),{},{geometry:y(y({},e.spatialField.geometry),{},{center:u,radius:c,coordinates:a,projection:t})})})},processOGCSpatialFilter:function(e,t,r){if(t.collectGeometries)return v.processOGCCrossLayerFilter(t);var a=E[r].startTag+t.attribute+E[r].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":a+=(0,n.processOGCGeometry)((0,o.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(a+="<"+r+':Distance units="m">'+(t.geometry.distance||0)+"</"+r+":Distance>");break;case"BBOX":var u=t.geometry.extent[0]+" "+t.geometry.extent[1],c=t.geometry.extent[2]+" "+t.geometry.extent[3];a+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+u+"</gml:lowerCorner><gml:upperCorner>"+c+"</gml:upperCorner></gml:Envelope>"}return i.ogcSpatialOperators[t.operation](r,a)},mergeFiltersToOGC:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nsPlaceholder,r=void 0===t?"ogc":t,n=e.ogcVersion,i=void 0===n?"2.0":n,u=e.addXmlnsToRoot,l=void 0!==u&&u,f=e.xmlnsToAdd,g=void 0===f?[]:f,m=s()({filterNS:r,wfsVersion:i,gmlVersion:(0,o.wfsToGmlVersion)(i)}),y=c()(m),b=arguments.length,v=new Array(b>1?b-1:0),h=1;h<b;h++)v[h-1]=arguments[h];var O=m.filter(m.and.apply(m,d((0,p.flatten)(v.filter((function(e){return!!e&&((0,p.isString)(e)||L(e)&&!e.disabled)})).map((function(e){return(0,p.isString)(e)?[y((0,a.read)(e))]:T(e,i,r)}))))));if(l){var P=O.indexOf(">");return"".concat(O.slice(0,P)).concat(g.length>0?" ".concat(g.join(" ")):"").concat(O.slice(P))}return O}};var N=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.layerFilter,o=t.filterObj,i=[L(n)&&!n.disabled&&I(n),L(o)&&I(o),t&&t.params&&t.params.CQL_FILTER,r];return(e=(i=i.filter((function(e){return!!e}))).length>1?i.map((function(e){return"(".concat(e,")")})).join(" AND "):i.pop())?M(M({},t.params),{},{CQL_FILTER:e}):t.params}},64973:(e,t,r)=>{"use strict";r.r(t),r.d(t,{needsReload:()=>s,toDescribeURL:()=>f,extractGeometryType:()=>p,extractGeometryAttributeName:()=>d});var n=r(15442),o=r(72500),i=r.n(o),a=r(14855);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t){var r=c(c({},(0,n.optionsToVendorParams)(e)||{}),{},{_v_:e._v_}),o=c(c({},(0,n.optionsToVendorParams)(t)||{}),{},{_v_:t._v_});return["_v_","CQL_FILTER","VIEWPARAMS"].reduce((function(e,t){return r[t]!==o[t]||e}),!1)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,o=e.url,a=e.describeFeatureTypeURL,u=i().parse(a||n.url||o,!0);return i().format(c(c({},u),{},{search:void 0,query:c(c({},u.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},p=function(e){var t=(0,a.get)(e,"featureTypes[0].properties")||[];return t&&(0,a.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.type.split(":")[1]})))},d=function(e){var t=(0,a.get)(e,"featureTypes[0].properties")||[];return t&&(0,a.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.name})))}},73418:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getDefaultMatrixId:()=>l,getMatrixIds:()=>s,limitMatrix:()=>f,getTileMatrixSet:()=>p,getRequestEncoding:()=>d,getOperations:()=>g,getOperation:()=>m,getGetTileURL:()=>y,getCapabilitiesURL:()=>b,getDefaultStyleIdentifier:()=>v,getDefaultFormat:()=>h,sortTileMatrix:()=>O,getTileMatrix:()=>P});var n,o=r(89735),i=r(14855);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){for(var t=new Array(30),r=0;r<30;++r)t[r]=e.tileMatrixPrefix+r;return t},s=function(e,t){return(0,i.isObject)(e)&&(0,i.isArray)(e[t])&&e[t]||(0,i.isArray)(e)&&e||[]},f=function(e,t){return e.length>t?(0,i.slice)(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e},p=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t;return e&&(0,i.isString)(e)?e:e?(0,o.getEquivalentSRS)(t,r).reduce((function(t,r){if((0,i.isArray)(e)){var a=(0,i.head)(e.filter((function(e){return(e["ows:Identifier"]===r||(0,o.getEPSGCode)(e["ows:SupportedCRS"])===r)&&n[e["ows:Identifier"]]})));return a&&a["ows:Identifier"]?a["ows:Identifier"]:t}return(0,i.isObject)(e)&&e[r]||t}),a):a},d=function(e){var t=n.getOperations(e);return n.getOperation(t,"GetTile","KVP")?"KVP":n.getOperation(t,"GetTile","RESTful")&&"RESTful"},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.castArray)(e.Capabilities["ows:OperationsMetadata"]["ows:Operation"])},m=function(e,t,r){return(0,i.head)((0,i.castArray)((0,i.head)(e.filter((function(e){return e.$.name===t})).map((function(e){return(0,i.castArray)(e["ows:DCP"]["ows:HTTP"]["ows:Get"])})))||[]).filter((function(e){return(e["ows:Constraint"]&&e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"])===r})).map((function(e){return e.$["xlink:href"]})))},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ResourceURL,r=e.GetTileURL,n=e.requestEncoding;return"KVP"===n?r:t&&(0,i.castArray)(t).map((function(e){var t=e.$,r=void 0===t?{}:t;return r.template||r.value}))||r},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.head)((0,i.castArray)(e.capabilitiesURL||e.GetTileURL))},v=function(e){return(0,i.head)((0,i.castArray)(e.Style).filter((function(e){var t=e.$;return"true"===(void 0===t?{}:t).isDefault})).map((function(e){return e["ows:Identifier"]})))},h=function(e){return(0,i.head)((0,i.castArray)(e.Format))},O=function(e,t){return e?u(u({},e),{},{TileMatrix:(0,i.sortBy)(null==e?void 0:e.TileMatrix.map((function(e){return u(u({},e),{},{ScaleDenominator:Number(e.ScaleDenominator)})})),"ScaleDenominator").reverse().filter((function(e){return!t||t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.identifier;return t})).indexOf(e["ows:Identifier"])>=0}))}):e},P=function(e,t){var r,n,o=p(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),a=e.matrixIds&&s(e.matrixIds,o||t),u=O((0,i.head)(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===o}))),a),c=null==u||null===(r=(n=u.TileMatrix).map)||void 0===r?void 0:r.call(n,(function(e){return e["ows:Identifier"]}));return{matrixIds:c&&a?a.sort((function(e,t){return c.indexOf(e.identifier)-c.indexOf(t.identifier)})):a,tileMatrixSetName:o,tileMatrixSet:u}};n={getOperations:g,getOperation:m}},13530:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r,n){var o=t[e];return o&&o.create?o.create(r,n):o?o(r,n):null},renderLayer:function(e,r,n,o,i){var a=t[e];return a&&a.render?a.render(r,n,o,i):null},updateLayer:function(e,r,n,o,i){var a=t[e];return a&&a.update?a.update(r,n,o,i):null},isSupported:function(e){return!!t[e]}};e.exports=r},27415:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r){var n=t[e];return n&&n.create?n.create(r):n?n(r):null},renderLayer:function(e,r,n,o,i){var a=t[e];return a&&a.render?a.render(r,n,o,i):null},updateLayer:function(e,r,n,o){var i=t[e];return i&&i.update?i.update(r,n,o):null},isValid:function(e,r){var n=t[e];return!n||!n.isValid||n.isValid(r)},isSupported:function(e){return!!t[e]}};e.exports=r},84109:(e,t,r)=>{var n=r(17850).getCurrentResolution,o=r(58328);e.exports={buildRequest:function(e,t){var r,i,a,u;return{request:{lat:t.point.latlng.lat,lng:t.point.latlng.lng},metadata:{fields:(null===(r=e.features)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.properties)&&Object.keys(e.features[0].properties)||[],title:e.name,resolution:o(null==t||null===(a=t.map)||void 0===a?void 0:a.resolution)?(null==t||null===(u=t.map)||void 0===u?void 0:u.zoom)&&n(t.map.zoom,0,21,96):t.map.resolution,buffer:t.buffer||2,units:t.map&&t.map.units,rowViewer:e.rowViewer,viewer:e.viewer},url:""}}}},17337:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(49977).Observable,u=r(89735).normalizeSRS,c=r(36515).getLayerUrl,l=r(14855).isObject,s=r(15442).optionsToVendorParams,f=r(83358),p=f.describeFeatureType,d=f.getFeature,g=r(64973).extractGeometryAttributeName,m=r(36493).addAuthenticationToSLD,y=r(51312);e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.map,n=void 0===r?{}:r,i=t.point,a=t.currentLocale,s=t.params,f=t.maxItems,p=void 0===f?10:f,d=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;return{request:m(o({point:i,service:"WFS",version:"1.1.1",request:"GetFeature",outputFormat:"application/json",exceptions:"application/json",id:e.id,typeName:e.name,srs:u(n.projection)||"EPSG:4326",feature_count:p},y({params:s})),e),metadata:{title:l(e.title)?e.title[a]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:d,featureInfo:g},url:c(e).replace(/[?].*$/g,"")}},getIdentifyFlow:function(e,t,r){var n=r.point,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,["point"]),i=function(e){var t,r,n=null==e||null===(t=e.geometricFilter)||void 0===t||null===(r=t.value)||void 0===r?void 0:r.geometry;if(n)return n;var o=e.latlng.lng;return{coordinates:[o-360*Math.floor(o/360+.5),e.latlng.lat],projection:"EPSG:4326",type:"Point"}}(n);return a.defer((function(){return p(e.url,e.name).then((function(r){var n=g(r),a=s({layerFilter:e.layerFilter,filterObj:{spatialField:{attribute:n,operation:"INTERSECTS",geometry:i}},params:y({},e.baseParams,e.params,o)});return d(t,e.name,a)}))}))}}},30048:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(17850).getCurrentResolution,u=r(89735),c=u.reproject,l=u.getProjectedBBox,s=u.normalizeSRS,f=r(36515).getLayerUrl,p=r(14855),d=p.isObject,g=p.isNil,m=r(15442).optionsToVendorParams,y=r(95525).generateEnvString,b=r(36493).addAuthenticationToSLD,v=r(51312);e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sizeBBox,n=t.map,i=void 0===n?{}:n,u=t.point,p=t.currentLocale,h=t.params,O=t.maxItems,P=void 0===O?10:O,_=t.env,E=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,w=arguments.length>4?arguments[4]:void 0,x=r&&r.height||101,j=r&&r.width||101,A=[x,j],C=0,T=g(i.resolution)?a(Math.ceil(i.zoom),0,21,96):i.resolution,I=u.latlng.lng,L=I-360*Math.floor(I/360+.5),R={x:L,y:u.latlng.lat},M=c(R,"EPSG:4326",i.projection),D=l(M,T,C,A,null),N=e.name;e.queryLayers&&(N=e.queryLayers.join(","));var F=y(_),k=m({layerFilter:e.layerFilter,filterObj:e.filterObj,params:v({},e.baseParams,e.params,h)});return{request:b(o({service:"WMS",version:"1.1.1",request:"GetFeatureInfo",exceptions:"application/json",id:e.id,layers:e.name,query_layers:N,styles:e.style,x:j%2==1?Math.ceil(j/2):j/2,y:j%2==1?Math.ceil(j/2):j/2,height:x,width:j,srs:s(i.projection)||"EPSG:4326",bbox:D.minx+","+D.miny+","+D.maxx+","+D.maxy,feature_count:P,info_format:E,ENV:F},v({},k)),e),metadata:{title:d(e.title)?e.title[p]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:S,featureInfo:w},url:f(e).replace(/[?].*$/g,"")}}}},41537:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(17850),u=a.getCurrentResolution,c=a.getResolutions,l=r(89735),s=l.reproject,f=l.normalizeSRS,p=r(73418),d=p.getTileMatrixSet,g=p.limitMatrix,m=p.getMatrixIds,y=p.getDefaultMatrixId,b=r(36515).getLayerUrl,v=r(15442).optionsToVendorParams,h=r(14855),O=h.isObject,P=h.isNil,_=r(51312);e.exports={buildRequest:function(e,t){var r=P(t.map.resolution)?u(Math.round(t.map.zoom),0,21,96):t.map.resolution,n=e.resolutions||c(),i=e.tileSize||256,a=[e.originX||-20037508.3428,e.originY||20037508.3428],l=t.point.latlng.lng,p={x:l-360*Math.floor(l/360+.5),y:t.point.latlng.lat},h=s(p,"EPSG:4326",t.map.projection),E=f(e.srs||t.map.projection||"EPSG:3857",e.allowedSRS),S=d(e.tileMatrixSet,E,e.allowedSRS,e.matrixIds),w=(h.x-a[0])/(r*i),x=(a[1]-h.y)/(r*i),j=Math.floor(w),A=Math.floor(x),C=Math.floor((w-j)*i),T=Math.floor((x-A)*i),I=g(e.matrixIds&&m(e.matrixIds,S||E)||y(e),n.length),L=v({layerFilter:e.layerFilter,filterObj:e.filterObj,params:_({},e.baseParams,e.params,t.params)});return{request:o(o({service:"WMTS",request:"GetFeatureInfo",layer:e.name,infoformat:t.format,style:e.style||""},_({},L)),{},{tilecol:j,tilerow:A,tilematrix:I[Math.round(t.map.zoom)],tilematrixset:S,i:C,j:T}),metadata:{title:O(e.title)?e.title[t.currentLocale]||e.title.default:e.title,regex:e.featureInfoRegex},url:b(e).replace(/[?].*$/g,"")}}}},70831:e=>{var t={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|-?\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){var t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);if(t){var r=e.length,n=e.indexOf("(",t[0].length);if(n>-1)for(var o=1;n<r&&o>0;)switch(n++,e.charAt(n)){case"(":o++;break;case")":o--}return[e.substr(0,n+1)]}return null},END:/^$/},r={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},n={"=":"=","<>":"<>","<":"<","<=":"<=",">":">",">=":">=",LIKE:"like",ILIKE:"ilike",BETWEEN:"><","IS NULL":"isNull"},o={AND:"and",OR:"or",NOT:"not"},i={RPAREN:3,LOGICAL:2,COMPARISON:1},a=function(e,t){return t instanceof RegExp?t.exec(e):t(e)},u=function(e,r){var n,o,i=r.length;for(n=0;n<i;n++){o=r[n];var u=a(e,t[o]);if(u){var c=u[0];return{type:o,text:c,remainder:e.substr(c.length).replace(/^\s*/,"")}}}var l="ERROR: In parsing: ["+e+"], expected one of: ";for(n=0;n<i;n++)l+="\n    "+(o=r[n])+": "+t[o];throw new Error(l)};e.exports={read:function(e){return function(e){for(var t=[],r=[];e.length;){var a=e.shift();switch(a.type){case"PROPERTY":case"GEOMETRY":case"VALUE":r.push(a);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var u=i[a.type];t.length>0&&i[t[t.length-1].type]<=u;)r.push(t.pop());t.push(a);break;case"SPATIAL":case"NOT":case"LPAREN":t.push(a);break;case"RPAREN":for(;t.length>0&&"LPAREN"!==t[t.length-1].type;)r.push(t.pop());t.pop(),t.length>0&&"SPATIAL"===t[t.length-1].type&&r.push(t.pop());break;case"COMMA":case"END":break;default:throw new Error("Unknown token type "+a.type)}}for(;t.length>0;)r.push(t.pop());var c=function e(){var t=r.pop();switch(t.type){case"LOGICAL":var i=e();return{filters:[e(),i],type:o[t.text.toUpperCase()]};case"NOT":return{filters:[e()],type:o.NOT};case"BETWEEN":r.pop();var a=e(),u=e();return{property:e(),lowerBoundary:u,upperBoundary:a,type:n.BETWEEN};case"COMPARISON":var c=e();return{property:e(),value:c,type:n[t.text.toUpperCase()]};case"IS_NULL":return{property:e(),type:n[t.text.toUpperCase()]};case"VALUE":var l=t.text.match(/^'(.*)'$/);return l?l[1].replace(/''/g,"'"):Number(t.text);case"SPATIAL":switch(t.text.toUpperCase()){case"BBOX":var s=e(),f=e(),p=e(),d=e();return{type:"BBOX",property:e(),value:[d,p,f,s]};case"INTERSECTS":var g=e();return{type:"INTERSECTS",property:e(),value:g};case"WITHIN":var m=e();return{type:"WITHIN",property:e(),value:m};case"CONTAINS":var y=e();return{type:"CONTAINS",property:e(),value:y};case"DWITHIN":var b=e();return{type:"DWITHIN",value:e(),property:e(),distance:Number(b)};default:return null}case"GEOMETRY":return function(){throw new Error("WKT parsing for CQL filter not supported yet")}(t.text);default:return t.text}}();if(r.length>0){for(var l="Remaining tokens after building AST: \n",s=r.length-1;s>=0;s--)l+=r[s].type+": "+r[s].text+"\n";throw new Error(l)}return c}(function(e){var t,n=[],o=e,i=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{if(o=(t=u(o,i)).remainder,i=r[t.type],"END"!==t.type&&!i)throw new Error("No follows list for "+t.type);n.push(t)}while("END"!==t.type);return n}(e))}}},97240:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(57784),i=o.logical,a=o.spatial,u=o.comparison,c=o.literal,l=o.propertyName,s=o.valueReference,f=o.distance,p=o.lower,d=o.upper,g=r(11168),m=g.filter,y=g.fidFilter,b=r(89223).processOGCGeometry;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterNS,r=void 0===t?"ogc":t,o=e.gmlVersion,g=e.wfsVersion,v=void 0===g?"1.1.0":g,h=o||"3.1.1",O=function(e){return b(h,e)},P=function(e){return"object"===n(e)&&Date,c(r,e)},_=0===v.indexOf("2.")?s:l;return{filter:m.bind(null,r),fidFilter:y.bind(null,r),and:i.and.bind(null,r),or:i.or.bind(null,r),not:i.not.bind(null,r),property:function(e){return{equalTo:function(t){return u.equal(r,_(r,e),P(t))},greaterThen:function(t){return u.greater(r,_(r,e),P(t))},greaterThenOrEqualTo:function(t){return u.greaterOrEqual(r,_(r,e),P(t))},lessThen:function(t){return u.less(r,_(r,e),P(t))},lessThenOrEqualTo:function(t){return u.lessOrEqual(r,_(r,e),P(t))},notEqualTo:function(t){return u.notEqual(r,_(r,e),P(t))},between:function(t,n){return u.between(r,_(r,e),p(r,P(t)),d(r,P(n)))},like:function(t,n){return u.like(r,_(r,e),P(t),n)},ilike:function(t,n){return u.ilike(r,_(r,e),P(t),n)},isNull:function(){return u.isNull(r,_(r,e))},intersects:function(t){return a.intersects(r,_(r,e),O(t))},within:function(t){return a.within(r,_(r,e),O(t))},dwithin:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return a.dwithin(r,_(r,e),O(t),f(r,n,o))},contains:function(t){return a.contains(r,_(r,e),O(t))}}}}}},11168:e=>{var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",t=arguments.length>1?arguments[1]:void 0;return"<".concat(e,":Filter>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Filter>")};e.exports={fidFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",r=arguments.length>1?arguments[1]:void 0;return t(e,"<".concat(e,':FeatureId fid="').concat(r,'"/>'))},filter:t}},96191:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=r(14855),a=i.includes,u=i.isNil,c=["and","or","not"],l={"=":"equalTo","<>":"notEqualTo","><":"between","<":"lessThen","<=":"lessThenOrEqualTo",">":"greaterThen",">=":"greaterThenOrEqualTo",like:"like",ilike:"ilike"};e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r){var o=r.type,i=r.filters,s=void 0===i?[]:i,f=r.value,p=r.property,d=r.lowerBoundary,g=r.upperBoundary;return a(c,o)?t[o].apply(t,n(s.map(e(t)))):t.property(p)[l[o]](u(f)?d:f,g)}}},57784:e=>{var t={"=":function(e,t){return"<".concat(e,":PropertyIsEqualTo>").concat(t,"</").concat(e,":PropertyIsEqualTo>")},">":function(e,t){return"<".concat(e,":PropertyIsGreaterThan>").concat(t,"</").concat(e,":PropertyIsGreaterThan>")},"<":function(e,t){return"<".concat(e,":PropertyIsLessThan>").concat(t,"</").concat(e,":PropertyIsLessThan>")},">=":function(e,t){return"<".concat(e,":PropertyIsGreaterThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsGreaterThanOrEqualTo>")},"<=":function(e,t){return"<".concat(e,":PropertyIsLessThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsLessThanOrEqualTo>")},"<>":function(e,t){return"<".concat(e,":PropertyIsNotEqualTo>").concat(t,"</").concat(e,":PropertyIsNotEqualTo>")},"><":function(e,t){return"<".concat(e,":PropertyIsBetween>").concat(t,"</").concat(e,":PropertyIsBetween>")},like:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="true" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},ilike:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},isNull:function(e,t){return"<".concat(e,":PropertyIsNull>").concat(t,"</").concat(e,":PropertyIsNull>")}},r={AND:function(e,t){return"<".concat(e,":And>").concat(t,"</").concat(e,":And>")},OR:function(e,t){return"<".concat(e,":Or>").concat(t,"</").concat(e,":Or>")},NOR:function(e,t){return"<".concat(e,":Not><").concat(e,":Or>").concat(t,"</").concat(e,":Or></").concat(e,":Not>")},NOT:function(e,t){return"<".concat(e,":Not>").concat(t,"</").concat(e,":Not>")}},n={INTERSECTS:function(e,t){return"<".concat(e,":Intersects>").concat(t,"</").concat(e,":Intersects>")},BBOX:function(e,t){return"<".concat(e,":BBOX>").concat(t,"</").concat(e,":BBOX>")},CONTAINS:function(e,t){return"<".concat(e,":Contains>").concat(t,"</").concat(e,":Contains>")},DWITHIN:function(e,t){return"<".concat(e,":DWithin>").concat(t,"</").concat(e,":DWithin>")},WITHIN:function(e,t){return"<".concat(e,":Within>").concat(t,"</").concat(e,":Within>")}},o=function(e,t,r){return t(e,Array.isArray(r)?r.join(""):r)},i={and:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return i&&i.length>0?o(e,r.AND,[t].concat(i)):o(e,r.AND,t)},or:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return i&&i.length>0?o(e,r.OR,[t].concat(i)):o(e,r.OR,t)},not:function(e,t){return o(e,r.NOT,t)},nor:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return i&&i.length>0?o(e,r.NOR,[t].concat(i)):o(e,r.NOR,t)}},a={intersects:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.INTERSECTS,r)},within:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.WITHIN,r)},bbox:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.BBOX,r)},dwithin:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.DWITHIN,r)},contains:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.CONTAINS,r)}},u={equal:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["="],n)},greater:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t[">"],n)},less:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["<"],n)},greaterOrEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t[">="],n)},lessOrEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["<="],n)},notEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["<>"],n)},between:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["><"],n)},like:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t.like,n)},ilike:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t.ilike,n)},isNull:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t.isNull,n)}};e.exports={ogcComparisonOperators:t,ogcLogicalOperators:r,ogcSpatialOperators:n,propertyName:function(e,t){return"<".concat(e,":PropertyName>").concat(t,"</").concat(e,":PropertyName>")},valueReference:function(e,t){return"<".concat(e,":ValueReference>").concat(t,"</").concat(e,":ValueReference>")},distance:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return"<".concat(e,':Distance units="').concat(r,'">').concat(t,"</").concat(e,":Distance>")},literal:function(e,t){return"<".concat(e,":Literal>").concat(t,"</").concat(e,":Literal>")},logical:i,spatial:a,comparison:u,lower:function(e,t){return"<".concat(e,":LowerBoundary>").concat(t,"</").concat(e,":LowerBoundary>")},upper:function(e,t){return"<".concat(e,":UpperBoundary>").concat(t,"</").concat(e,":UpperBoundary>")}}},89223:(e,t,r)=>{var n=r(14855).isArray,o=function(e){return 0===e.indexOf("2.")},i=function(e){if(e.length>=3){var t=e[0],r=e[e.length-1];if(t[0]!==r[0]||t[1]!==r[1])return e.concat([e[0]])}return e},a=function(e,t,r){var n='<gml:Point srsDimension="2"';return n+=t?' srsName="'+t+'">':">",(n+=o(r)?"<gml:coord><X>"+e[0]+"</X><Y>"+e[1]+"</Y></gml:coord>":"<gml:pos>"+e.join(" ")+"</gml:pos>")+"</gml:Point>"},u=function(e,t,r){var a=o(r),u="<gml:Polygon";return u+=t?' srsName="'+t+'">':">",(e.length&&n(e[0])&&e[0].length&&n(e[0][0])?e:[e]).forEach((function(e,t){var r=i(e).map((function(e){return e[0]+(a?",":" ")+e[1]})),n=a?"outerBoundaryIs":"exterior",o=a?"innerBoundaryIs":"exterior";u+=(t<1?"<gml:"+n+">":"<gml:"+o+">")+"<gml:LinearRing>"+(a?"<gml:coordinates>":"<gml:posList>")+r.join(" ")+(a?"</gml:coordinates>":"</gml:posList>")+"</gml:LinearRing>"+(t<1?"</gml:"+n+">":"</gml:"+o+">")})),u+="</gml:Polygon>"},c=function(e,t,r){var n=o(r),i="<gml:LineString";i+=t?' srsName="'+t+'">':">";var a=e.map((function(e){return e[0]+(n?",":" ")+e[1]}));return(i+=(n?"<gml:coordinates>":"<gml:posList>")+a.join(" ")+(n?"</gml:coordinates>":"</gml:posList>"))+"</gml:LineString>"};e.exports={closePolygon:i,pointElement:a,polygonElement:u,lineStringElement:c,processOGCGeometry:function(e,t){var r="",n=t.projection||"EPSG:4326";switch(t.type){case"Point":r+=a(t.coordinates,n,e);break;case"MultiPoint":r+='<gml:MultiPoint srsName="'+(t.projection||"EPSG:4326")+'">',t.coordinates.forEach((function(t){t&&(r+="<gml:pointMember>",r+=a(t,n,e),r+="</gml:pointMember>")})),r+="</gml:MultiPoint>";break;case"LineString":r+=c(t.coordinates,n,e);break;case"MultiLineString":var o="3.2"===e?"MultiCurve":"MultiLineString",i="3.2"===e?"curveMember":"lineStringMember";r+="<gml:".concat(o,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+i+">",r+=c(t,n,e),r+="</gml:"+i+">")})),r+="</gml:"+o+">";break;case"Polygon":r+=u(t.coordinates,n,e);break;case"MultiPolygon":var l="3.2"===e?"MultiSurface":"MultiPolygon",s="3.2"===e?"surfaceMembers":"polygonMember";r+="<gml:".concat(l,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+s+">",r+=u(t,n,e),r+="</gml:"+s+">")})),r+="</gml:"+l+">"}return r}}},67451:(e,t,r)=>{var n=r(14855),o=n.head,i=n.get,a=function(e){return/[<>&'"]/.test(e)?"<![CDATA[".concat(e,"]]>"):e},u=r(89223).processOGCGeometry,c={"1.0.0":"2.0","1.1.0":"3.1.1","2.0":"3.2","2.0.0":"3.2"},l=function(e){return i(e,"featureTypes[0].properties")},s=function(e,t){return o((l(t)||[]).filter((function(t){return t.name===e})))},f=function(e){return e.targetNamespace},p=function(e){return 0===e.type.indexOf("gml:")},d=function(e,t){return null==t||t&&!0===t.nillable||t&&!1===t.nillable&&null!=e},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geom,r=e.properties,n=arguments.length>1?arguments[1]:void 0;return d(p(n)?t:r[n.name],n)};e.exports={schemaLocation:f,isGeometryType:p,featureTypeSchema:function(e){return"xmlns:".concat(e.targetPrefix,'="').concat(f(e),'"')},getValue:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1.1.0",o=p(s(t,r));return o?e?u(n,{type:e.type,coordinates:e.coordinates}):"":null==e?"":"string"==typeof e?a(e):e},getPropertyDesciptor:s,findGeometryProperty:function(e){return o((l(e)||[]).filter((function(e){return 0===e.type.indexOf("gml:")})))},getFeatureTypeProperties:l,getTypeName:function(e){return e.targetPrefix?e.targetPrefix+":"+e.featureTypes[0].typeName:e.featureTypes[0].typeName},wfsToGmlVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.1.0";return c[e]},processOGCGeometry:u,isValid:function(e,t){return l(t).map((function(t){return g(e,t)}))},isValidProperty:g,isValidValueForPropertyName:function(e,t,r){return d(e,s(t,r))},isValidValue:d}},75866:(e,t,r)=>{"use strict";r.r(t),r.d(t,{registerType:()=>o,createLayer:()=>i,updateLayer:()=>a,removeLayer:()=>u,renderLayer:()=>c,isValid:()=>l,isSupported:()=>s,isCompatible:()=>f,default:()=>p});var n={},o=function(e,t){n[e]=t},i=function(e,t,r,o){var i=n[e];return i?i.create(t,r,o):null},a=function(e,t,r,o,i,a){var u=n[e];if(u&&u.update)return u.update(t,r,o,i,a);if(o&&t&&t.getSource()&&t.getSource().updateParams){var c=!1;o.params&&r.params?c=Object.keys(o.params).reduce((function(e,t){return r.params[t]!==o.params[t]||e}),!1):!o.params&&r.params&&(c=!0),c&&t.getSource().updateParams(r.params)}return null},u=function(e,t,r,o,i){var a=n[e];return a&&a.remove?a.remove(t,r,o,i):null},c=function(e,t,r,o,i){var a=n[e];return a&&a.render?a.render(t,r,o,i):null},l=function(e,t){var r=n[e];return!r||!r.isValid||r.isValid(t)},s=function(e){return!!n[e]},f=function(e,t){var r=n[e];return!r||!r.isCompatible||r.isCompatible(t)};const p={registerType:o,createLayer:i,updateLayer:a,removeLayer:u,renderLayer:c,isValid:l,isSupported:s,isCompatible:f}},19426:e=>{e.exports={name:"ReportExtension"}},10926:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ReportIdentifyViewer:()=>ln,default:()=>sn});var n=r(71703),o=r(19426),i=r(24852),a=r.n(i),u=r(7066),c=(r(49073),r(51312)),l=r.n(c),s=r(77580),f=r.n(s),p=r(43078),d=r.n(p);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const m=(y=u.zx,a().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,i=void 0===o?function(){}:o,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["disabled","className","onClick"]);return a().createElement(y,g({ref:t,className:r?d()("disabled",n):n,onClick:function(){r||i.apply(void 0,arguments)}},u),u.children)})));var y,b=r(58120),v=r.n(b),h=r(56394),O=r.n(h);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=r(68195).FormattedMessage,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(n);if(o){var r=j(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return w(this,e)});function u(){var e;_(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return A(x(e=i.call.apply(i,[this].concat(r))),"renderFormattedMsg",(function(e){var t=e.msgId,r=e.msgParams,n=e.children;return n&&"function"==typeof n?a().createElement(C,{id:t,values:r},(function(e){return n(e)})):a().createElement(C,{id:t,values:r})})),A(x(e),"renderMsg",(function(e){var t=e.msgId,r=e.children;return r&&"function"==typeof r?r(t):a().createElement("span",null,t||"")})),e}return t=u,(r=[{key:"render",value:function(){return this.context.intl?this.renderFormattedMsg(this.props):this.renderMsg(this.props)}}])&&E(t.prototype,r),u}(a().Component);A(T,"propTypes",{msgId:f().string.isRequired,msgParams:f().object}),A(T,"contextTypes",{intl:f().object});const I=T;function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(n);if(o){var r=G(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return k(this,e)});function u(){var e;D(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return U(B(e=i.call.apply(i,[this].concat(r))),"renderLoading",(function(){return e.props.maskLoading?a().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},a().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},a().createElement(I,{msgId:"loading"}),a().createElement(O(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),U(B(e),"renderRole",(function(t){return a().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),U(B(e),"hasRole",(function(t){return a().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),U(B(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=u,(r=[{key:"render",value:function(){var e=this,t=a().createElement("div",{id:this.props.id,style:M({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},a().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),a().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?a().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):a().createElement("span",null)),r=this.props.draggable?a().createElement(v(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=l()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?a().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&N(t.prototype,r),u}(a().Component);U(q,"propTypes",{id:f().string.isRequired,style:f().object,backgroundStyle:f().object,className:f().string,maskLoading:f().bool,containerClassName:f().string,headerClassName:f().string,bodyClassName:f().string,footerClassName:f().string,onClickOut:f().func,modal:f().bool,start:f().object,draggable:f().bool,bounds:f().oneOfType([f().string,f().object])}),U(q,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const W=q;function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(n);if(o){var r=Q(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Y(this,e)});function u(){var e;V(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Z(J(e=i.call.apply(i,[this].concat(r))),"getStyle",(function(){var t={cursor:e.props.disabled?"not-allowed":"pointer",margin:0,padding:0,display:"inline-block"};return e.props.image?l()(t,{overflow:"hidden"}):l()(t,{height:"48px",width:"48px",border:"1px solid grey",borderRadius:"4px",backgroundColor:"rgb(250, 250, 250)"}),l()(t,e.props.style),t})),e}return t=u,(r=[{key:"render",value:function(){return a().createElement("img",{className:this.props.className,id:this.props.id,title:this.props.tooltip,style:this.getStyle(),src:this.props.image,onClick:this.props.disabled?null:this.props.onClick})}}])&&z(t.prototype,r),u}(a().Component);Z(X,"propTypes",{id:f().string,image:f().string,onClick:f().func,style:f().object,disabled:f().bool,tooltip:f().string,className:f().string}),Z(X,"defaultProps",{disabled:!1,tooltip:null,className:void 0});const $=X;function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(n);if(o){var r=ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return oe(this,e)});function c(){var e;te(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ue(ie(e=i.call.apply(i,[this].concat(r))),"state",{isVisible:!1}),ue(ie(e),"getButton",(function(){return"normal"===e.props.btnType?a().createElement(m,{bsStyle:"info",bsSize:e.props.btnSize,onClick:e.open},e.props.glyphicon?a().createElement(u.gG,{glyph:e.props.glyphicon}):"",!e.props.hiddenText&&e.props.glyphicon?" ":"",e.props.hiddenText&&e.props.glyphicon?"":e.props.text||e.props.help):a().createElement($,{image:e.props.image,onClick:e.open})})),ue(ie(e),"close",(function(){e.setState({isVisible:!1})})),ue(ie(e),"open",(function(){e.setState({isVisible:!0})})),e}return t=c,(r=[{key:"render",value:function(){var e=a().createElement(W,{id:"mapstore-about",style:l()({},this.props.style,{display:this.state.isVisible?"block":"none"})},a().createElement("span",{role:"header"},a().createElement("span",{className:"about-panel-title"},this.props.title),a().createElement("button",{onClick:this.close,className:"about-panel-close close"},this.props.closeGlyph?a().createElement(u.gG,{glyph:this.props.closeGlyph}):a().createElement("span",null,"×"))),a().createElement("div",{role:"body"},this.props.body));return a().createElement("div",{id:this.props.id,style:this.props.style,className:this.props.className},this.getButton(),e)}}])&&re(t.prototype,r),c}(a().Component);ue(ce,"propTypes",{id:f().string,image:f().string,title:f().oneOfType([f().string,f().element]),body:f().oneOfType([f().string,f().element]),style:f().object,className:f().string,glyphicon:f().string,text:f().oneOfType([f().string,f().element]),help:f().oneOfType([f().string,f().element]),hiddenText:f().bool,btnSize:f().oneOf(["large","medium","small","xsmall"]),btnType:f().oneOf(["normal","image"]),modalOptions:f().object,closeGlyph:f().string}),ue(ce,"defaultProps",{id:"mapstore-infobutton",title:"Info",body:"",style:void 0,glyphicon:void 0,text:"Info",hiddenText:!1,btnSize:"medium",btnType:"normal",modalOptions:{},closeGlyph:""});const le=ce;var se,fe=r(23298),pe=r(71129),de=r(49977),ge=r.n(de),me=r(10306),ye=r.n(me);function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve="/reports",he="/jsonschemas",Oe=(be(se={},ve,[{id:"id1",feature_id:"fid1",report_model_id:"12345678-1234-5678-1234-567812345678",created_at:"2021-01-22T13:33:00+00:00",updated_by:"foo",created_by:"foo",updated_at:"2021-01-23T13:34:00+00:00",custom_field_values:{commentaire:"foo",date:"2021-01-22",category:"category1",file:"data:image/png;name=Screenshot%202021-05-12%20at%2016-44-44%20Datafeeder.png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ8AAABMCAYAAABzsWVhAAAHU0lEQVR4nO2d61MTVxiH+Uv8C5w4gxPFRSRiABEFb4zXikEaNBhEBFMFBYpVUVPQsWpoKNb7pVKdWItV8VpHGaDeQ1AHQQIiBnClOCLJrx8YVjYkmNTEk8v7zJwvmzfveZd5cs7u2ZMQAsJtWs1t2F9WzroMvyeEdQH+xpWr1xE+NQYSKYfDx06wLsevIfncoKa2DhIpJ7T5i5exLsmvIfncJLegCBIph9yCIvA8z7ocv4bkcxOe53Hl6nXWZQQEJJ8TWs1tNLJ5GZLPAUM3FSlp6axLCWhIPjuGrumG2lnDedYlBSwknx1Xrl4XxCvWltDU60VIPgfkFhTRTcVXIKjlM5oaWZcQ1ASlfDW1dUhakozwqTFoNbexLidoCTr5zhrOi24o1mRrWJcUtASdfDzPg5NFQyLloFCqaOplSNDJBwyOfrSEwp6Ale+c4Q+aUn2cgJOvprYO0xPm0iKxHxCQ8g2/ocgtKGJdEuGEgJMPABRKFRRKFWpq61iXQozCV5GvpbcfWXfNGFtpxJiTjzHm5GOMrTQi664ZLb39buczmhqRV7jF6ahGj8T8A6/Ld6qpWxDOWSs3WVzOl7FOI5pWSTT/xavyuSLeUDvV1O1Szn06vSAeJ4umqdWP8Zp8Pf1W0TT7uTa20ihMwUZTI4q1pQ5HtVZzGxRKFd3FBgBek09vsrgs3lDLPGSgZZIgwmvyJVU3uS1f4m81ouu5jHW0SBzI+JR8YyuNmL94Ge2nCxJ8Sr7YqmfeKofwQTwiH8/zqL52A/vLypGSlo7Dx05g7d1Wt+VbcbPFE+UQfoJb8rWa25xuvhx+raZQqnC741+35XN1uYUIDD4rH8/zSFqSLPpSjSPmL1424mck3Jl6k6qbPHhahD8QkpKWLixv7NPpHQbZj2qOOGs4j5raOtHaXE+/FbFVzz4r3iRDI3r6rV45QcJ3CRku1mijmkKpQsY6jdu/zNTTbx31+m/FzRYSL0gJGXpMpVCqnMrnCVp6+6E3WZBf3478+nboTRY86n7vtf4I3ycgt1QR/gHJRzCD5COYQfIRzCD5PESqSo2Dh4+yLsOv8Hv5irUlonXIoXbtxq0vzn3o6HFocje7FOvr8t38+zZ2le5hXYaIgJAvM+c7dHV3i9rHjx+/OPfDx0/w1+Vql2J9Xb7CH7aTfJ6mWFuCnA2bnL6u01dgS/FOaHfvRVziPMhnJCA5dSUahv1Mhk5fAe3uvTBcqEJ0/GyET42BzWaDTl+B9MxsIc5qtUKnr0DsrDkInTQFcYnzcOv2HQCD8u3T6aHJy0dYpBwR8unQ5G7G27efnvikqtQ4cfoM1FnrER0/G7KYeOwq3YOmF81IW52J6PjZkMcnQqevEJ0Dz/PYuLkQnCwaU+Rx2LCpEF3d3aK8J09XIkuzETEz52BaXAKyN+Shp+ctgEHxQsMiMJ6LBCeLxtIU5f/9c3uUoJBv3IRwVBw6Aqt18ElK6d59mLtwqSgmMWkRUtLS8cTYgLb2V8Lx4fL98uthxMycg1u37+B1Zydq6/+BxdIFYFCASTI5DBeq8K63F63mNixYuhzbd31auE9VqREeFYsnDSYAQNOLZkyYPBVR02fhibEBANDc8hITI6JQf+++8D51Vg7yCrfAYumCpasL6zduhjJ9jSjvxIgo4fssfe/fY8XK1di280chJmfDJhr5PE2xtgShYRHgZNGiNjAwAADCSGWz2YT3vGhuhkTKoa+vT4iZJJOju6dHlNtevvCoWFy8dMVhHakq9YgPwcnTlViUnCKKyS/aKopZrlyFgi3bxLlWqXHk+CkAwNPnzzExIgofPnwQXm81myGRcuh43Snkzc3/XpTjdOVZUd8knxco1pZg9dpsYbuX/bYvnb4CqSq16D2vOjogkXLofPNGiHG0YWK4fK87OyGRcjC3tTusI1Wlxv6fxf8Sy3ChCrPmLRTFlJUfFMWsVGeOOJaemS1MvRcuXsK4CeEjPlzjuUjcf/BQyGs/Vdv3TfJ5AVem3eGjF+BYPvsY++MdHa8hkXJof/XKYT+ObjgcyWcfs1KdCf3BQ6Jjw+U7/2cV5PGJTs/P1b5JPi/wteSz2WwIi5TjcvU1h/14S74GUyMkUg7NLS+dnqMrfWvy8lGsLXWagwUBIV/GOg0637wRtaFrJE/JBwD7y8oxY3YS6u/dB8/zaDA14kXz4NZ/b8kHAOqs9VjwjQIPHj0Gz/N4+vw5zvx+btS89n3vPVCGpCXJ4Hkefe99YzdRQMg32iKzJ+X7ODCAPT8dgHxGAkLDIhCXOA93a2oBeFe+d729KNq2A7KYeISGRWBaXAK27tCOmte+b0tXF1JXqSGdLMMSxbcjzpUFfi8f4b+QfAQzSD6CGSQfwQySj2AGyUcwg+QjmEHyEcwg+QhmkHwEM0g+ghkkH8EMko9gBslHMIPkI5hB8hHMIPkIZpB8BDNIPoIZJB/BDJKPYAbJRzCD5COYQfIRzCD5CGaQfAQzSD6CGSQfwYz/ADvaf8T5YBODAAAAAElFTkSuQmCC"}},{id:"id2",feature_id:"fid2",report_model_id:"12345678-1234-5678-1234-567812345679",created_at:"2021-02-15T13:33:00+00:00",updated_by:"bar",created_by:"bar",updated_at:"2021-02-16T13:34:00+00:00",custom_field_values:{commentaire:"bah"}}]),be(se,he,[{id:"12345678-1234-5678-1234-567812345678",name:"model1",layer_id:"ALLOWED_LAYER",JSONSchema:{$schema:"http://json-schema.org/draft-07/schema#",definitions:{Model1CustomFieldsSchema:{type:"object",required:["boolean","category","date","number"],properties:{boolean:{title:"boolean",type:"boolean"},category:{title:"category",type:"string",enum:["category1","category2"]},commentaire:{title:"commentaire",type:"string"},date:{title:"date",type:"string",format:"date"},file:{format:"data-url",title:"file",type:"string"},number:{title:"number",type:"number",format:"decimal"}},additionalProperties:!1},Model1ReportSchema:{type:"object",required:["feature_id","report_model_id"],properties:{custom_field_values:{type:"object",$ref:"#/definitions/Model1CustomFieldsSchema","ui:order":["category","date","number","boolean","file","commentaire"]},feature_id:{title:"feature_id",type:"string","ui:widget":"hidden"},id:{title:"id",type:"string","ui:widget":"hidden"},report_model_id:{title:"report_model_id",type:"string",default:"12345678-1234-5678-1234-567812345678","ui:widget":"hidden"}},additionalProperties:!1}},$ref:"#/definitions/Model1ReportSchema"},UISchema:{"ui:order":["id","feature_id","report_model_id","custom_field_values"],report_model_id:{"ui:widget":"hidden"},custom_field_values:{"ui:order":["category","date","number","boolean","file","commentaire"]},feature_id:{"ui:widget":"hidden"},id:{"ui:widget":"hidden"}}},{id:"12345678-1234-5678-1234-567812345679",name:"model2",layer_id:"ALLOWED_LAYER",JSONSchema:{$schema:"http://json-schema.org/draft-07/schema#",definitions:{Model2CustomFieldsSchema:{type:"object",properties:{commentaire:{title:"commentaire",type:"string"}},additionalProperties:!1},Model2ReportSchema:{type:"object",required:["feature_id","report_model_id"],properties:{custom_field_values:{type:"object",$ref:"#/definitions/Model2CustomFieldsSchema","ui:order":["commentaire"]},feature_id:{title:"feature_id",type:"string","ui:widget":"hidden"},id:{title:"id",type:"string","ui:widget":"hidden"},report_model_id:{title:"report_model_id",type:"string",default:"12345678-1234-5678-1234-567812345679","ui:widget":"hidden"}},additionalProperties:!1}},$ref:"#/definitions/Model2ReportSchema"},UISchema:{"ui:order":["id","feature_id","report_model_id","custom_field_values"],report_model_id:{"ui:widget":"hidden"},custom_field_values:{"ui:order":["commentaire"]},feature_id:{"ui:widget":"hidden"},id:{"ui:widget":"hidden"}}}]),se);function Pe(e,t){if(t=t||{},new URLSearchParams(window.location.search).has("usemocks"))return ge().Observable.of(t.data?Oe[e+"-post"]:Oe[e]);ye().create({baseURL:"../mapstore-reports/reports",headers:{"Content-type":"application/json"}});var r,n="../mapstore-reports".concat(e),o={};return t.layerId&&t.featureId&&(o={feature_id:t.featureId,layer_id:t.layerId}),r=(r=t.formData?ye().create({baseURL:n,headers:{"Content-type":"application/json"}}).post("",t.formData).catch((function(e){console.error("Error:",e)})):ye().get(n,{params:o})).then((function(e){return e.data})),ge().Observable.fromPromise(r)}Oe["/reports-post"]={};var _e=function(e){return e.created_at,e.updated_at,e.created_by,e.updated_by,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["created_at","updated_at","created_by","updated_by"])},Ee=function(e){var t=e.id,r=e.help,n=e.required,o=e.description,i=e.errors,u=e.children,c=e.uiSchema,l=e.formData,s=e.schema,f=e.classNames,p="data-url"===s.format;p&&(f+=" file-upload");var d,g=!(c["ui:widget"]&&"hidden"===c["ui:widget"]);return a().createElement("div",null," ",g&&a().createElement("div",{className:f},a().createElement("label",{htmlFor:t},s.title,n?"*":null),p&&l&&a().createElement("div",null,a().createElement("a",{href:l,download:"document."+Se(l)},"Document téléversé (",Se(l).toUpperCase()," -"," ",((.75*((d=l).length-(d.indexOf(",")+1))-("="===d.charAt(d.length-2)?2:"="===d.charAt(d.length-1)?1:0))/1e3).toFixed(1),"Kb)")),o,u,i,r)," ")};function Se(e){return e.split(";")[0].split(":")[1].split("/")[1]}function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){Re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Me=function(e){return console.log.bind(console,e)},De={id:null,name:"",JSONSchema:{},UISchema:{},formData:{feature_id:""}},Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Le(n);if(o){var r=Le(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Te(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).postReport=t.postReport.bind(Ie(t)),t.updateState=t.updateState.bind(Ie(t)),t.state={selectedSchema:De,editReport:!1,feature_id:e.feature.id,reports:[],layer_id:""},t}return t=c,(r=[{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentDidUpdate",value:function(e,t){this.props.feature.id!==e.feature.id&&this.updateState(),this.state.layer_id!==t.layer_id&&this.getReports()}},{key:"updateState",value:function(){var e=this.props.schemasByLayers&&0!=this.props.schemasByLayers.length&&this.props.schemasByLayers[0].layer_id?this.props.schemasByLayers[0].layer_id:void 0;this.setState({feature_id:this.props.feature.id,layer_id:e})}},{key:"getReports",value:function(){var e,t,r=this;this.subscription=(e=this.state.feature_id,t=this.state.layer_id,Pe(ve,{getreports:!0,featureId:e,layerId:t})).subscribe((function(e){var t=e;new URLSearchParams(window.location.search).has("usemocks")||(t=e.map((function(e){return JSON.parse(e)}))),r.setState({reports:t})}))}},{key:"schemaOption",value:function(e){return{label:e.name,value:e}}},{key:"selectSchema",value:function(e){e.formData?e.formData.feature_id=this.state.feature_id:e.formData={feature_id:this.state.feature_id},this.setState({selectedSchema:e})}},{key:"toggleEditReport",value:function(e){this.setState({editReport:e})}},{key:"showReport",value:function(e){this.setState({editReport:!0,feature_id:e.feature_id,selectedSchema:je(je({},this.props.schemasByLayers.filter((function(t){return t.id===e.report_model_id}))[0]),{},{formData:_e(e)})})}},{key:"postReport",value:function(e){var t,r=this;this.setState({editReport:!1}),this.subscription=(t=e.formData,Pe(ve,{postreport:!0,formData:t})).subscribe((function(){r.getReports()}))}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.state,r=t.selectedSchema,n=t.editReport,o=t.reports,i=this.props.feature.id,c=this.props.schemasByLayers.reduce((function(e,t){var r=o.filter((function(e){return e.report_model_id===t.id}));return r.length>0&&(e[t.name]=r),e}),{});return a().createElement(u.s_,null,a().createElement(u.X2,null,a().createElement(u.JX,{sm:10},i),a().createElement(u.JX,{sm:1},a().createElement(le,{glyphicon:"info-sign",text:"",title:"Feature "+i,body:this.renderFeaturePropertiesList()})),a().createElement(u.JX,{sm:1},a().createElement(u.zx,{bsStyle:"primary",onClick:function(){return e.toggleEditReport(!n)},"aria-controls":"edit-report","aria-expanded":n},a().createElement(u.gG,{glyph:"pencil"})))),a().createElement(u.UO,{in:n},a().createElement("div",{id:"edit-report"},a().createElement("div",{id:"model-select"},a().createElement("p",null,"Modèles de rapport"),a().createElement(pe.ZP,{options:this.props.schemasByLayers.map((function(t){return e.schemaOption(t)})),onChange:function(t){e.selectSchema(t.value)},value:this.schemaOption(r)})),r&&a().createElement(fe.ZP,{schema:r.JSONSchema,uiSchema:r.UISchema,formData:r.formData,onChange:Me("changed"),onSubmit:this.postReport,onError:Me("errors"),FieldTemplate:Ee}))),Object.keys(c).map((function(t){return[a().createElement("h5",null,t),a().createElement("ul",null,e.renderReportsList(c[t]))]})))}},{key:"renderFeaturePropertiesList",value:function(){var e=this.props.feature.properties;return a().createElement("ul",null,Object.keys(e).map((function(t,r){return a().createElement("li",null,a().createElement("strong",null,t,":")," ",e[t])})))}},{key:"renderReportsList",value:function(e){var t=this;return e.map((function(e){return a().createElement("li",{key:e.id},a().createElement("button",{class:"btn btn-link",onClick:function(){return t.showReport(e)}},t.formatDate(e.created_at)))}))}},{key:"formatDate",value:function(e){return new Intl.DateTimeFormat("fr-FR").format(new Date(e))}}])&&Ae(t.prototype,r),c}(a().Component);Re(Ne,"propTypes",{feature:f().object,schemasByLayers:f().object});const Fe=Ne;var ke=function(e){return{type:"LOADED_SCHEMAS",payload:e}},Be=function(e){return{type:"LOAD_ERROR",error:e}};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var We=r(6607),Ke=(r(17850),{TEXT:"text/plain",HTML:"text/html",JSONP:"text/javascript",PROPERTIES:"application/json",JSON:"application/json",GML2:"application/vnd.ogc.gml",GML3:"application/vnd.ogc.gml/3.1.1",TEMPLATE:"application/json"}),Ve={"text/plain":"TEXT","text/html":"HTML","text/javascript":"JSONP","application/json":"JSON","application/vnd.ogc.gml":"GML2","application/vnd.ogc.gml/3.1.1":"GML3"},ze=/^[\s\S]*<gml:featureMembers[^>]*>([\s\S]*)<\/gml:featureMembers>[\s\S]*$/i,He=/^[\s\S]*<body[^>]*>([\s\S]*)<\/body>[\s\S]*$/i;function Ye(e){if("string"==typeof e.response&&0!==e.response.indexOf("<?xml")){var t=e.response.match(He);return e.layerMetadata&&e.layerMetadata.regex?t&&t[1]&&t[1].match(e.layerMetadata.regex):t&&t[1]&&t[1].trim().length>0}return!1}function Je(e){if("string"==typeof e.response&&-1!==e.response.indexOf("<?xml")){var t=e.response.match(ze);return t&&t[1]&&t[1].trim().length>0}return!1}var Qe={HTML:{getValidResponses:function(e){return e.filter(Ye)},getNoValidResponses:function(e){return e.filter((function(e){return!Ye(e)}))}},TEXT:{getValidResponses:function(e){return e.filter((function(e){return""!==e.response&&"string"==typeof e.response&&0!==e.response.indexOf("no features were found")&&"string"==typeof e.response&&0!==e.response.indexOf("<?xml")}))},getNoValidResponses:function(e){return e.filter((function(e){return""===e.response||"string"==typeof e.response&&0===e.response.indexOf("no features were found")||e.response&&"string"==typeof e.response&&0===e.response.indexOf("<?xml")}))}},JSON:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},PROPERTIES:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},GML3:{getValidResponses:function(e){return e.filter(Je)},getNoValidResponses:function(e){return e.filter((function(e){return!Je(e)}))}},TEMPLATE:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}}},Ze=r(57162),Xe=r.n(Ze),$e=r(14855),et=r(67522),tt=r.n(et),rt=r(67076),nt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=(0,$e.isString)(t)&&(0,$e.trim)(t.substring(r,t.length-n))||"";return(0,$e.has)(e,o)},ot=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return""},a=(0,$e.isString)(e)&&e.match(r),u=a&&a.map((function(e){var r=e.replace(/(<([^>]+)>)/gi,"");return{previous:e,next:nt(t,r,n,o)?r:i(e)}}))||null;return u&&u.reduce((function(e,t){return e.replace(t.previous,t.next)}),e)||e||""};function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ft(n);if(o){var r=ft(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lt(this,e)});function u(){var e;at(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pt(st(e=i.call.apply(i,[this].concat(r))),"getSourceCode",(function(){return{__html:e.props.html}})),e}return t=u,(r=[{key:"render",value:function(){return a().createElement("div",{id:this.props.id,dangerouslySetInnerHTML:this.getSourceCode()})}}])&&ut(t.prototype,r),u}(a().Component);pt(dt,"propTypes",{html:f().string,id:f().string});const gt=dt;var mt=function(e){return new RegExp("<(.|\\n)*?>","g").test(e)};function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?Pt(e):t}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var St=["exclude","titleStyle","listStyle","componentStyle","title","feature"],wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_t(n);if(o){var r=_t(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ot(this,e)});function u(){var e;bt(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Et(Pt(e=i.call.apply(i,[this].concat(r))),"getBodyItems",(function(){return Object.keys(e.props).filter(e.toExclude).map((function(t){var r=e.renderProperty(e.props[t]);return a().createElement("tr",{key:t,style:e.props.listStyle},a().createElement("td",null,t),a().createElement("td",null,mt(r)?a().createElement("span",{dangerouslySetInnerHTML:{__html:r}}):r))}))})),Et(Pt(e),"renderHeader",(function(){return e.props.title?a().createElement("thead",{key:e.props.title,style:e.props.titleStyle,className:"ms-properties-viewer-title"},a().createElement("tr",null,a().createElement("th",{colSpan:"2"},e.props.title))):null})),Et(Pt(e),"renderBody",(function(){var t=e.getBodyItems();return 0===t.length?null:a().createElement("tbody",{className:"ms-properties-viewer-body"},t)})),Et(Pt(e),"renderProperty",(function(e){return(0,$e.isString)(e)?e:JSON.stringify(e)})),Et(Pt(e),"toExclude",(function(t){return-1===St.concat(e.props.exclude).indexOf(t)})),e}return t=u,(r=[{key:"render",value:function(){return a().createElement("table",{className:"ms-properties-viewer",style:this.props.componentStyle},this.renderHeader(),this.renderBody())}}])&&vt(t.prototype,r),u}(a().Component);Et(wt,"displayName","PropertiesViewer"),Et(wt,"propTypes",{title:f().string,exclude:f().array,titleStyle:f().object,listStyle:f().object,componentStyle:f().object}),Et(wt,"defaultProps",{exclude:[],titleStyle:{},listStyle:{},componentStyle:{}});const xt=wt;function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var At={TEMPLATE:function(e){var t=e.layer,r=void 0===t?{}:t,n=e.response;return a().createElement("div",{className:"ms-template-viewer"},n.features.map((function(e,t){return a().createElement("div",{key:t},a().createElement(gt,{html:(0,$e.template)(ot(r.featureInfo&&r.featureInfo.template||"",e,/\$\{.*?\}/g,2,1))(e)}))})))},PROPERTIES:function(e){var t=e.response,r=e.layer,n=e.rowViewer,o=r&&r.rowViewer||n||xt;return a().createElement("div",{className:"mapstore-json-viewer"},((null==t?void 0:t.features)||[]).map((function(e,t){return a().createElement(o,jt({key:t,feature:e,title:e.id+"",exclude:["bbox"]},e.properties))})))}};function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(0,rt.shouldUpdate)((function(e,t){return t.response!==e.response}))((function(e){var t=e.layer&&e.layer.featureInfo&&e.layer.featureInfo.format&&e.layer.featureInfo.template&&"<p><br></p>"!==e.layer.featureInfo.template&&e.layer.featureInfo.format||"PROPERTIES",r=At[t]||At.PROPERTIES;return a().createElement(r,e)}));var Dt,Nt,Ft,kt=/^[\s\S]*<body>([\s\S]*)<\/body>[\s\S]*$/i,Bt=/(<style[\s\=\w\/\"]*>[^<]*<\/style>)/i;function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e,t){return!t||"object"!==Gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mt(n);if(o){var r=Mt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Rt(this,e)});function u(){return Tt(this,u),i.apply(this,arguments)}return t=u,(r=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){var e=this.props.response||"",t=Bt.exec(e),r=t&&2===t.length?Bt.exec(e)[1]:"";r=r.replace(/body[,]+/g,"");var n=e.replace(kt,"$1").trim();return a().createElement(gt,{html:r+n})}}])&&It(t.prototype,r),u}(a().Component),Nt="propTypes",Ft={response:f().string},Nt in Dt?Object.defineProperty(Dt,Nt,{value:Ft,enumerable:!0,configurable:!0,writable:!0}):Dt[Nt]=Ft,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vt(n);if(o){var r=Vt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Kt(this,e)});function u(){return Ut(this,u),i.apply(this,arguments)}return t=u,(r=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){return a().createElement("pre",null,this.props.response)}}])&&qt(t.prototype,r),u}(a().Component),"propTypes",{response:f().string});var zt,Ht=r(17337),Yt=r.n(Ht),Jt=r(30048),Qt=r.n(Jt),Zt=r(41537),Xt=r.n(Zt),$t=r(84109),er=r.n($t);function tr(e){return function(e){if(Array.isArray(e))return rr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ar=function(e,t,r,n,o){return or({type:"vector",visibility:!0,name:e||"GetFeatureInfo",styleName:r||"marker",label:o,features:zt.clickedPointToGeoJson(t)},n)},ur={wfs:Yt(),wms:Qt(),wmts:Xt(),vector:er()};zt={AVAILABLE_FORMAT:["TEXT","PROPERTIES","HTML","TEMPLATE"],getAvailableInfoFormatLabels:function(){return Object.keys(zt.getAvailableInfoFormat())},getAvailableInfoFormat:function(){return Object.keys(Ke).filter((function(e){return-1!==zt.AVAILABLE_FORMAT.indexOf(e)})).reduce((function(e,t){return e[t]=Ke[t],e}),{})},getDefaultInfoFormatValue:function(){return Ke[zt.AVAILABLE_FORMAT[0]]},clickedPointToGeoJson:function(e){if(!e)return[];if("Feature"===e.type){var t=[Xe()(e)];return e&&e.geometry&&"Point"!==e.geometry.type&&t.push(e),t}return void 0===e.lng||void 0===e.lat?e.features||[]:[].concat(tr(e.features||[]),[{id:"get-feature-info-point",type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]},style:[{iconUrl:tt(),iconAnchor:[12,41],iconSize:[25,41]}]}])},services:ur,getDefaultInfoFormatValueFromLayer:function(e,t){return e.featureInfo&&e.featureInfo.format&&Ke[e.featureInfo.format]||t.format||zt.getDefaultInfoFormatValue()},getLayerFeatureInfoViewer:function(e){return e.featureInfo&&e.featureInfo.viewer?e.featureInfo.viewer:{}},getLayerFeatureInfo:function(e){return e&&e.featureInfo&&or({},e.featureInfo)||{}},VIEWERS:{}},window.customViewers=zt.VIEWERS,r(36515);var cr=r(24272),lr=r.n(cr),sr=r(68592),fr=r.n(sr),pr={iconUrl:lr(),shadowUrl:fr(),iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},dr=r(89735),gr=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},mr=(0,We.P1)([gr],(function(e){return e&&e.projection})),yr=((0,We.P1)([function(e){return(0,$e.get)(gr(e),"resolutions")},mr],(function(e,t){if(e&&t){var r=dr.default.getUnits(t);return e.map((function(e){return 3779.527559055118*e*("degrees"===r?111194.87428468118:1)}))}return[]})),function(e){return e.localConfig}),br=r(59154),vr=r(59766);function hr(e){return function(e){if(Array.isArray(e))return Or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Or(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pr=function(e){return e.context&&e.context.currentContext},_r=(0,We.P1)((function(){return(0,$e.get)(br.ZP.getConfigProp("plugins"),"desktop")}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{desktop:[].concat(hr(e),["Context"])}})),Er=(0,We.P1)((function(e){return(0,$e.get)(Pr(e),"plugins")}),(function(e){return(0,$e.get)(Pr(e),"userPlugins")}),(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&{desktop:[].concat(hr((0,$e.get)(e,"desktop",[])),hr(t.filter((function(e){return e.active}))))}})),Sr=((0,We.P1)(Pr,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.templates})),function(e){return function(e){return(0,$e.get)(e,"context.loading")}(e)?function(e){return _r(e)}(e):Er(e)||_r(e)}),wr=function(e){return(0,We.P1)(Pr,Sr,(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t||(0,$e.findIndex)((0,$e.get)(r,"desktop",[]),(function(t){return t.name===e}))>-1}))},xr=((0,We.P1)((function(e){return(0,vr.bh)(e,function(e){return(yr(e)||{}).monitorState}(e))}),(function(e){return JSON.stringify(e)})),function(e){return e.locale&&e.locale.current||"en-US"}),jr=((0,We.P1)([xr],(function(e){return(0,$e.head)(e.split("-"))})),function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"});function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ir=(0,We.P1)((function(e){return"cesium"===jr(e)}),(function(e){var t;return!(null==e||null===(t=e.mapInfo)||void 0===t||!t.showInMapPopup)}),(function(e,t){return!e&&t})),Lr=((0,We.P1)((function(e){return(0,$e.get)(e,"mapInfo.requests")||[]}),wr("Identify"),Ir,(function(e,t,r){return!r&&!!e&&e.length>0&&t})),function(e){return(0,$e.get)(e,"mapInfo.configuration.infoFormat","text/plain")}),Rr=function(e){return e&&e.mapInfo&&e.mapInfo.clickPoint},Mr=((0,We.P1)((function(e){return!(0,$e.get)(e,"mapInfo.enabled",!1)}),(function(e){return(0,$e.get)(e,"controls.measure.enabled")&&((0,$e.get)(e,"measurement.lineMeasureEnabled")||(0,$e.get)(e,"measurement.areaMeasureEnabled")||(0,$e.get)(e,"measurement.bearingMeasureEnabled"))}),(function(e){var t=(0,$e.get)(e,"draw.drawStatus",!1);return t&&"clean"!==t&&"stop"!==t}),(function(e){return(0,$e.get)(e,"annotations.editing")}),wr("Identify"),(function(e,t,r,n,o){return e||!!t||r||!!n||!o})),(0,We.zB)({format:Lr,map:gr,point:Rr,currentLocale:xr,maxItems:function(e){return(0,$e.get)(e,"mapInfo.configuration.maxItems")}}),(0,We.P1)((function(e){var t;return(null==e||null===(t=e.mapInfo)||void 0===t?void 0:t.requests)||[]}),(function(e){return e.mapInfo&&e.mapInfo.responses||[]}),Lr,(function(e,t,r){var n=function(e){var t={getValidResponses:function(e){return e},getNoValidResponses:function(){return[]}};return{getValidResponses:function(r){return r.reduce((function(r,n){if(n){var o;n.queryParams&&n.queryParams.hasOwnProperty("info_format")&&(o=n.queryParams.info_format),n.queryParams&&n.queryParams.hasOwnProperty("outputFormat")&&(o=n.queryParams.outputFormat);var i=(Qe[n.format||Ve[o]||Ve[e]]||t).getValidResponses([n]);return[].concat(tr(r),tr(i))}return tr(r)}),[])},getNoValidResponses:function(r){return r.reduce((function(r,n){if(n){var o;n.queryParams&&n.queryParams.hasOwnProperty("info_format")&&(o=n.queryParams.info_format),n.queryParams&&n.queryParams.hasOwnProperty("outputFormat")&&(o=n.queryParams.outputFormat);var i=(Qe[n.format||Ve[o]||Ve[e]]||t).getNoValidResponses([n]);return[].concat(tr(r),tr(i))}return tr(r)}),[])}}}(r);return e.length===t.length&&n.getValidResponses(t)}))),Dr=(0,We.P1)(Mr,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.mapInfo&&e.mapInfo.index}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]})),Nr=function(e){var t=Dr(e)||{};return(0,$e.get)(t,"layerMetadata.features")},Fr=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.style||t.geometry&&("Point"===t.geometry.type||"MultiPoint"===t.geometry.type)?e:(0,$e.omit)(e,"radius")}},kr=function(e){return function(t){return Cr(Cr({},t),{},{style:Fr(e)(t)})}},Br=(0,We.P1)(Rr,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.mapInfo&&e.mapInfo.highlight}),Nr,(function(e){var t=Dr(e)||{};return(0,$e.get)(t,"layerMetadata.featuresCrs")}),(function(e){return e&&e.mapInfo&&e.mapInfo.showMarker}),(function(e){return(0,$e.get)(e,"mapInfo.highlightStyle",{color:"#3388ff",weight:4,radius:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2})}),(function(e,t,r,n,o,i){return o&&e?t?Cr(Cr({},e),{},{featuresCrs:n,features:r&&(0,$e.isArray)(r)&&r.map(kr(i))}):e:void 0}));function Gr(e){return function(e){if(Array.isArray(e))return Ur(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(72500),r(14855).isObject;var qr=r(68195).addLocaleData,Wr=r(83836),Kr=r(61017),Vr=r(67249),zr=r(37179),Hr=r(2082),Yr=r(84425),Jr=r(41146),Qr=r(96864),Zr=r(39118),Xr=r(83416),$r=r(75784);qr([].concat(Gr(Wr),Gr(Kr),Gr(Vr),Gr(zr),Gr(Hr),Gr(Yr),Gr(Jr),Gr(Qr),Gr(Zr),Gr(Xr),Gr($r)));var en,tn={it:{code:"it-IT",description:"Italiano"},en:{code:"en-US",description:"English"},fr:{code:"fr-FR",description:"Français"},de:{code:"de-DE",description:"Deutsch"},es:{code:"es-ES",description:"Español"},zh:{code:"zh-ZH",description:"中文"},nl:{code:"nl-NL",description:"Nederlands"},hr:{code:"hr-HR",description:"Hrvatski"},pt:{code:"pt-PT",description:"Português"},vi:{code:"vi-VN",description:"tiếng Việt"},fi:{code:"fi-FI",description:"Suomi"}};function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){on(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function on(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}en={getLocale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(tn)[0],r=tn.en?{key:"en",locale:tn.en}:{key:t,locale:tn[t]},n=tn[en.normalizeLocaleCode(e.locale||(navigator?navigator.language||navigator.browserLanguage:r.key))];return n?n.code:r.locale.code},normalizeLocaleCode:function(e){var t;if(null==e)t=void 0;else{var r=/^[a-z]+/i.exec(e);t=r&&r.length>0?r[0].toLowerCase():void 0}return t}};var an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=e.config;return t&&(0,$e.isArray)(t)?t:t&&t.flat||r&&r.layers||[]};function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}(0,We.P1)([an,Br,function(e){return e.search&&e.search},function(e){return(0,$e.get)(e,"mapInfo.centerToMarker","")},function(e){return(0,$e.get)(e,"additionallayers",[])},function(e){return e.annotations&&e.annotations.showMarker&&e.annotations.clickPoint}],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=o.filter((function(e){return"override"===e.actionType})),u=o.filter((function(e){return"overlay"===e.actionType})).map((function(e){return e.options})),c=e.map((function(e){var t=((0,$e.head)(a.filter((function(t){return t.id===e.id})))||{}).options;return t?nn(nn({},e),t):nn({},e)}));if(c=c.concat(u),t){c.push(ar("GetFeatureInfoHighLight",{features:t.features},void 0,{overrideOLStyle:!0,featuresCrs:t.featuresCrs,style:nn(nn({},pr),{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2})}));var l="enabled"===n?(0,dr.getNormalizedLatLon)(t.latlng):t.latlng;c.push(ar("GetFeatureInfo",l))}if(i){var s="enabled"===n?(0,dr.getNormalizedLatLon)(i.latlng):i.latlng;c.push(ar("Annotations",s)),c.push(ar("GetFeatureInfo",nn({},s)))}if(r&&r.markerPosition){var f=(0,$e.isObject)(r.style)&&r.style||{};c.push(ar("GeoCoder",r.markerPosition,"marker",{overrideOLStyle:!0,style:nn(nn({},pr),f)},r.markerLabel))}return c})),r(72500),r(42111);var cn=function(e){var t=function(e){return e.reportExtension&&e.reportExtension.schemas||[]}(e),r=Dr(e),n=r&&r.layer&&r.layer.name;return t.filter((function(e){return e.layer_id===n}))},ln=(0,n.connect)((function(e){return{schemas:e.reportExtension&&e.reportExtension.schemas,display:e.reportExtension&&e.reportExtension.display,schemasByLayers:cn(e),selectedSchema:e.reportExtension&&e.reportExtension.selectedSchema,currentFeatures:Nr(e)}}),{fetchSchemas:function(){return{type:"FETCH_SCHEMAS"}},loadedSchemas:ke,loadError:Be,displayForm:function(){return{type:"DISPLAY_FORM"}}})((function(e){var t=e.display,r=e.schemasByLayers,n=e.currentFeatures,o=e.fetchSchemas,u=e.postReport;return(0,i.useEffect)((function(){o()}),[]),a().createElement("div",null,t&&a().createElement("div",{id:"report-extension"},n&&n.map((function(e){return a().createElement(Fe,{feature:e,schemasByLayers:r,postReport:u})}))))}));const sn={name:o.name,component:ln,reducers:{reportExtension:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{schemas:[{}],selectedSchema:void 0,display:!1,error:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADED_SCHEMAS":return Ue(Ue({},e),{},{schemas:t.payload});case"LOAD_ERROR":return Ue(Ue({},e),{},{error:t.error});case"DISPLAY_FORM":return Ue(Ue({},e),{},{display:!e.display});default:return e}}},epics:{fetchSchemasEpic:function(e){return e.ofType("FETCH_SCHEMAS").switchMap((function(){var e;return"reportViewer",e=ln,zt.VIEWERS.reportViewer=e,Pe(he).switchMap((function(e){return ge().Observable.of(ke(Object.values(e)))})).catch((function(e){return ge().Observable.of(Be(e.message))}))}))},displayFormEpic:function(e,t){return e.ofType("DISPLAY_FORM").mergeMap((function(){var e,r,n=t.getState().reportExtension.display?{format:"PROPERTIES",viewer:{type:"reportViewer"}}:void 0,o=an(t.getState()),i=(e=ge().Observable).of.apply(e,function(e){if(Array.isArray(e))return un(e)}(r=o.filter((function(e){return"wms"===e.type})).map((function(e){return{type:"UPDATE_NODE",node:e.id,nodeType:"layers",options:{featureInfo:n}}})))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return un(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?un(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=t.getState().mapInfo.clickPoint;return a?ge().Observable.merge(i,ge().Observable.of({type:"IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",point:a})):i}))}},containers:{Toolbar:{name:"reportExtension",position:10,icon:a().createElement(u.gG,{glyph:"list-alt"}),doNotHide:!0,action:function(){return{type:"DISPLAY_FORM"}},selector:function(e){return{bsStyle:e.reportExtension&&e.reportExtension.display?"success":"primary",active:!(!e.reportExtension||!e.reportExtension.display)}},priority:1}}}},49073:()=>{},42111:()=>{},67522:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg=="},24272:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QwKDiknI+uvvgAABttJREFUWMOll2uMVVcVx/9773PuPY/7mBcUZ4q1JmbiF6nQwtSY2pSYtobCB2yMrxhrHGOrfioEjQYlMWikH7TxUWNbjTFWU6gComm1UEgMAi20kFCrIMPMFIZ53Xvn3vPYZ++1/HBh6GVmmDu6k/+Xk/1fv7Mfa61zBDOjnfHihzZ1Gcg+YcUyCZrkvPf2A4efG2/HK24G+cuHN/cLS59nIT7DzH1Syli5jrGZUUTkKyGuAPa3RPTsA0f3vbEkyHfEBrlunbMVUn47LBYRhkE+7/uQORdCCDAzyAA6mkEURbpWqQpm/l4Q0I57X95rFoUcWLvxvazk71039/5b+noDVymQzsCZAWcZ2BKEkhCuC+E6kDkXmbUYv3QpylJ9zhj58EPHd/9zQcgf1228Xwnxh3Jnp+rq6XE5TmAb8aJ7rnwPIvQxPTlppicnLQGf3PSPvS/Mgey/c1OPVfzv3t7ecuj7MJUZsLVodwil4JQKiHSKS6OjDaFs/4a//2kUAOS1SVbxLwulkhd4HvTENMgYMPMcQcp5n5Mx0FMV+Pk8iuWyY6369bXYEgCeX7vh06zk+lu6O/O2WgeIWiQdB25nAbmeLsiOInI9XXA7y5A5d85cW62jp6s7L5Qa2LP2oS8CgNi3ZmOQCjP+7t6+wIOEnWm0bINT8kGej/FqBY1GAyZJoVwHQamE5YUSlCWYWgUgef2MiiESEIYuvZ14pLqdBOlq5eRF6Oehr0wAdP0iqDBAKhSGRoax8v6P4M5PbULxtlvRGB3Dud0HcG7Pn7Gyuwee77W8nJ2pIlzeA6UUJZSuVpv7+jcHfmF9yVGujTIAAoCAUA5URwEj01Po/8InsOprj8Dr6oCQEvmOElbcvQb+imV462+H0VXsAGcWbLnpZwHpKjQMmyTL3pSC+Z4w7/qkM4CuS7gOalECUS6g/7Ob571R7/nYfQhvX4npRh0yl2vxk84Q5l1fMN8jCRjwXQVOdXOrrko6AnGaYtldqyCEWPDqrhhYjcSkEIpb/Jxq+K4CAQOOIRs0SwWBmWbNzAzLBKdQWDQRzdVMaPUThBAgIl8COBUlCYRSrW+SZcgrB2Ovvn5TyNjJM8iznbMTQilESQICn5RE4nAjzTKhVIuZkhTlvIvKW+cxfOTYvIDx02dx+ehr6PQDkM7mVIAo0dqyfEUaaY5X01gLpcDWzoqSFCJO0Vcs4OCWHXjz+f0g0yywRITzL76Cl778dbyrWIbKLGwjavELpVBNG9rAHBdPf/DeXmZ3eE3frZKmKuDsHZVaSridZTTY4kK9jjiOUVqxHPUr41Cui9uLJZScHMzEOJivJ6NwHciuDrw6Omxh0CeYGc/c8dFjt5XLd/VIF7Y607JsFhaqWG4mJlskWiPv5uBJBYpmYGp1CG7dalUuYoIyHqpWjz1y6qUBBwA0xK6Rev3Z5cuXBaZmm3VolgLY6jSoVoHMuSg4Dqheh87M7DwGtaxeeg5Gx6ZiDfH92QIpnfgFbYyu6QzSC5t16AaxFeDYwM4k4NgABvPOk16ISqKRWlvvfrBz7yxk8MSRjMA/uVyvxcp3wJy1XMe2BUCFPkYb9dgyPfHwzt/Z1n5i7ZMTSaoispCBD+ZsyZKBi7qOUE0TYTN6uqWfAMCjZw5dBvDk0EwUK99rNqgbesVNBUAGPi7W6zGAJx47e2hyDgQAjLY7KzpB3WRQoT9vB1xIMvAxk2nMZJaEq3/wzrgtkMfOHppkIXZdjKJYhcHV1G9vFSr0MdRoRATeOXjiSHVBCAAYL7erZqyt6RQqDCAYi8ophKjpFI3MGGvtD2+MOQfylaMHaoL5u0NxGsvAB4FBRAuKBSB8DxeiKCLJOx49c6i+KAQAkMt+FFubVrMUTiGEYF5QquihohPElhK/OvHj+cLNCxk8cSQi8PahNItl4Deb1jxnIYSA9EIMpVnMQnzrc/85nbQNAQAd0VOptfUpnUAW8vPeKFEMMaUTpNbUum3wi4ViLQj56r8Oppbpm8OZjYUfAlK2ZreUkF4ew1kWk5Tf+PiZfXrJEAAY637fM5poekqnUGEOID0rp5DHlE6RWprofrD7VzeLc1PI9oNPGSuw7SJx82xU8xNVKAkEHoZslhCw7VqN+p8gADD2uvebzJrL45mBLIQAEVSxgCvawBBGx04Hzy0WY1HIdt5PLMTWEUKCwIfwPbDvYYQ4gZRbt/N++r8hAPCluw/uNmQvjFtit7OMK8YyEZ0fPPXXPe3424LgZ8RWyceHGVoTYQQiA7Cl7X+Xdv9+AeDnH7jvtbzAHSnj5OAbL69p1yexhMFCPJ5ACBZiC5ZkXELPYGb8dNX6bUv1/Bd7pfPVmVDtrAAAAABJRU5ErkJggg=="},68592:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},45968:()=>{}}]);